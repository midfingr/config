!function(){angular.module("components/castifyEdit/ui/crop-canvas/crop-canvas.html",[]).run(["$templateCache",function(a){a.put("components/castifyEdit/ui/crop-canvas/crop-canvas.html",'<div class="overlay top"></div><div class="overlay bottom"></div><div class="overlay left"></div><div class="overlay right"></div><div class="crop-box">    <div class="move-handle"></div>    <div class="crop-box-outer">        <div class="handle top-left"></div>        <div class="handle top-right"></div>        <div class="handle bottom-left"></div>        <div class="handle bottom-right"></div>    </div></div>')}]),angular.module("components/castifyEdit/ui/time-line/time-line.html",[]).run(["$templateCache",function(a){a.put("components/castifyEdit/ui/time-line/time-line.html",'<div class="scroll-container">    <div class="scrollable" ng-style="{width:scrollWidth + \'px\'}">        <cf-trim-slider max="{{config.video.duration}}"                        start="config.edit.trim.start"                        end="config.edit.trim.end"></cf-trim-slider>        <cf-time-ticks></cf-time-ticks>    </div></div><div layout="row" layout-align="end">    <div class="zoom-control" md-theme="grey" layout="row">        <span class="glyphicon glyphicon-search"></span>        <md-slider flex min="1" max="100" aria-label="Zoom" ng-model="zoom"></md-slider>    </div></div>')}]),angular.module("components/castifyEdit/ui/trim-slider/trim-slider.html",[]).run(["$templateCache",function(a){a.put("components/castifyEdit/ui/trim-slider/trim-slider.html",'<md-slider min="0" max="{{max}}" step="0.01" ng-model="start" aria-label="trim end"           class="start"></md-slider><md-slider min="0" max="{{max}}" step="0.01" ng-model="end" aria-label="trim start"        class="end"></md-slider>')}]),angular.module("components/castifyEdit/ui/video-controls/video-controls.html",[]).run(["$templateCache",function(a){a.put("components/castifyEdit/ui/video-controls/video-controls.html",'<md-button aria-label="play"           ng-click="play()"           ng-show="state.paused"        ><span class="glyphicon glyphicon-play"></span></md-button><md-button aria-label="pause"           ng-click="pause()"           ng-show="!state.paused"><span class="glyphicon glyphicon-pause"></span></md-button><md-slider flex max="{{state.duration}}" step="0.1"           aria-label="seek video"           ng-model="seekTime"></md-slider><span>{{state.currentTime|duration}}</span>/<span>{{state.duration|duration}}</span><md-progress-linear md-mode="indeterminate" ng-if="state.loading"></md-progress-linear>')}]),angular.module("components/castifyEdit/ui/video-editor.html",[]).run(["$templateCache",function(a){a.put("components/castifyEdit/ui/video-editor.html",'<div layout="column">    <md-toolbar>        <div class="md-toolbar-tools">            <span>Crop Video (experimental feature, use with care!)</span>        </div>    </md-toolbar>    <div class="canvas-container" flex layout="column">        <cf-video-canvas flex>            <video cf-video-ctrl-target autoplay cf-video-load="file"></video>            <cf-crop-canvas box="config.crop"></cf-crop-canvas>            <div class="loading" ng-if="!config.crop" layout layout-align="center center">                <md-progress-circular md-mode="indeterminate"></md-progress-circular>            </div>    </div>    <cf-video-controls></cf-video-controls>    <md-divider></md-divider>    <div layout="row" class="edit-actions">        <md-checkbox ng-model="config.meta.copy" hide>            Save as copy        </md-checkbox>        <div flex></div>        <md-button ng-click="cfCancel()">Cancel</md-button>        <md-button class="md-primary md-raised"                   ng-disabled="!config.crop || !upgradeHelper.isPaid()"                   ng-click="cfSave({config: config})">Save Copy        </md-button>        <div class="upgrade-hint" ng-if="!upgradeHelper.isPaid()">            This feature requires a paid Screencastify Version.            <md-button class="md-primary md-raised" ng-click="upgradeHelper.openBuy(\'editor\')">                Upgrade            </md-button>        </div>    </div></div>')}]),angular.module("components/castifyExt/ui/app-menu/app-menu.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/app-menu/app-menu.html",'<div class="app-menu dropdown-menu" role="menu">    <ul class="nav nav-pills nav-stacked">        <li role="presentation" class="dropdown-header">Menu</li>        <li>            <a href="#/files">                <span class="glyphicon glyphicon-home"></span>Your Screencasts</a>        </li>        <li>            <a href="#/options">                <span class="glyphicon glyphicon-cog"></span>Options</a>        </li>        <li ng-show="licensing.hasLicense()">            <a href="https://www.screencastify.com/buy?utm_source=app&utm_medium=menu&utm_campaign=recording_length">                <span class="glyphicon glyphicon-shopping-cart"></span>Buy</a>        </li>        <li class="divider"></li>        <li>            <a href="#/bugs">                <span class="glyphicon glyphicon-exclamation-sign"></span>Bug Report</a>        </li>        <li>            <a href="http://screencastify.uservoice.com/"               data-new-tab><span class="glyphicon glyphicon-comment"></span>Feedback</a>        </li>        <li>            <a href="https://google.com/+ScreencastifyChrome" new-tab>On Google+</a>        </li>        <li>            <a href="#/about"><span class="glyphicon glyphicon-info-sign"></span>About</a>        </li>    </ul></div>')}]),angular.module("components/castifyExt/ui/bugs/bug-report.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/bugs/bug-report.html",'<div class="container">    <div class="smallView bugReport">        <h2>Bug Report</h2>        <alert type="success" data-ng-show="submitted">            We received your bug report. Thank you for helping to improve ScreenCastify!        </alert>        <alert type="danger" ng-if="showError">            Oups, we could not send your Bug Report.        </alert>        <form name="report" role="form" data-ng-submit="submit()" data-ng-hide="submitted">            <div class="form-group">                <textarea data-ng-model="message" class="form-control" rows="10" required                          placeholder="{{messagePlaceholder}}">                </textarea>            </div>            <div class="form-group">                <label for="email" class="control-label">                    Email address                    <small>(required, in case we have further questions)</small>                </label>                <input required type="email" name="email" id="email" class="form-control"                       data-ng-model="email">            </div>            <div class="form-group">                <div class="checkbox">                    <label>                        <input type="checkbox" data-ng-model="attachLogs"> Attach extension logs.                        <small>This helps us to figure out what went wrong.</small>                    </label>                </div>                <textarea data-ng-model="logs" class="form-control" readonly disabled rows="8"                          data-ng-show="attachLogs">                </textarea>            </div>            <button type="submit" class="btn btn-primary"                    data-ng-disabled="!report.$valid || sending">                <span data-ng-hide="sending">                    Send Bug Report                </span>                <span data-ng-show="sending">                    Sending...                </span>            </button>        </form>    </div></div>')}]),angular.module("components/castifyExt/ui/device-chooser/device-chooser.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/device-chooser/device-chooser.html",'<cf-select-dropdown options="sources" class="device-chooser"                    ng-model="ngModel"></cf-select-dropdown>')}]),angular.module("components/castifyExt/ui/edit-jobs-info/edit-jobs-info.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/edit-jobs-info/edit-jobs-info.html",'<div ng-repeat="job in scheduler.getJobsByState(\'running\') track by id" class="running-job">    We are currently processing your video <em>{{job.fileTitle}}</em>.    <md-button ng-click="scheduler.cancel(job.id)">Cancel</md-button>    <md-progress-linear md-mode="determinate" ng-value="job.progress * 100"></md-progress-linear></div><div class="export-job" ng-if="lastCompleteExportJob">    <h4>GIF export is ready <small>{{lastCompleteExportJob.fileTitle}}</small></h4>    <md-button class="md-primary md-raised" ng-click="saveGif(lastCompleteExportJob)">Save GIF</md-button></div><div ng-if="numQueued" class="num-waiting">    <ng-pluralize count="numQueued"                  when="{\'one\': \'One more video edit is\',                         \'other\': \'{} more video edits are\'}"></ng-pluralize>    waiting to get processed.</div>')}]),angular.module("components/castifyExt/ui/file-detail/file-detail.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/file-detail/file-detail.html",'<div class="container file-detail" ng-controller="FileActionsCtrl as fileActionsCtrl"     ng-class="{\'loading-overlay\': !file}">    <div data-editable-text="file.title"         data-is-editing="item.isRenaming"         data-on-renamed="fileActionsCtrl.rename(file, newText)"         class="heading">        <span class="file-name" data-ng-click="editTitle($event)">{{file.title}}</span>        <a data-tooltip="rename" class="rename-action"           data-ng-click="editTitle($event)">            <span class="glyphicon glyphicon-pencil"></span>        </a>    </div>    <div class="row">        <div class="player">            <cf-video-player file="file"></cf-video-player>        </div>        <div class="tools">            <button class="btn btn-primary" ng-click="showShareDialog()"                    ng-if="!enterprisePolicy.disableSharing"><span                    class="glyphicon-share-alt glyphicon"></span>                Share...            </button>            <a class="btn" ng-href="#/edit/{{file.id}}">                <span class="glyphicon-edit glyphicon"></span>                Crop            </a>            <div class="btn-group" dropdown ng-if="!enterprisePolicy.disableSaveToDisk">                <cf-save-file-button file="file" class="btn"><span                        class="glyphicon-save glyphicon"></span>                    Save to Disk                </cf-save-file-button>                <button type="button" class="btn dropdown-toggle" dropdown-toggle                        aria-expanded="false">                    <span class="caret"></span>                </button>                <ul class="dropdown-menu" role="menu">                    <li role="presentation" class="dropdown-header"><span                            class="glyphicon-picture glyphicon"></span> Animated GIF                    </li>                    <li ng-class="{disabled: !upgradeHelper.isPaid() || !canExportGif()}"><a ng-click="exportGif()">Export                        GIF</a>                    </li>                    <li ng-if="!upgradeHelper.isPaid()" class="upgrade-hint">                        <a ng-click="upgradeHelper.openBuy(\'gif\')">                            Upgrade to paid version to use GIF exports.</a></li>                    <li ng-if="!canExportGif()" class="gif-size-hint">                        File too large for GIF export. Try to crop it first.</li>                </ul>            </div>            <button class="btn btn-danger" ng-click="fileActionsCtrl.remove(file)"><span                    class="glyphicon-trash glyphicon"></span>                Delete            </button>            <table class="info">                <tr>                    <th>Resolution:</th>                    <td><span                            data-pixel-resolution="file"></span></td>                </tr>                <tr>                    <th>Duration:</th>                    <td>{{file.duration|duration}}</td>                </tr>                <tr>                    <th>File size:</th>                    <td>{{file.size|bytes}}</td>                </tr>                <tr>                    <th>Date:</th>                    <td>{{file.createdAt|date}}</td>                </tr>            </table>            <upload-info data-file="file"></upload-info>            <cf-file-sync-info file="file"></cf-file-sync-info>        </div>    </div>    <div class="share-links" ng-show="file.youtubeInfo || file.driveInfo">        <h3>Share</h3>        <div data-ng-show="file.youtubeInfo.id">            <h4><a data-ng-href="http://youtu.be/{{file.youtubeInfo.id}}"                   target="_blank"                   data-analytics-event="files,viewYoutube">                <span class="wbIcon-youtube-red"></span>                Youtube            </a></h4>            <input type="text" value="http://youtu.be/{{file.youtubeInfo.id}}"                   class="share-link" wb-autoselect autofocus readonly>        </div>        <div data-ng-show="file.driveInfo">            <h4><a data-ng-href="{{file.driveInfo.alternateLink}}"                   target="_blank"                   data-analytics-event="files,viewYoutube">                <span class="wbIcon-drive"></span> Google Drive            </a></h4>            <input type="text" value="{{file.driveInfo.alternateLink}}"                   class="share-link" wb-autoselect autofocus readonly>        </div>    </div></div>')}]),angular.module("components/castifyExt/ui/file-edit/file-edit.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/file-edit/file-edit.html",'<div class="file-edit" layout="column">    <cf-video-editor cf-file="file" flex                     cf-cancel="onCancel()" cf-save="onSave(config)"></cf-video-editor></div>')}]),angular.module("components/castifyExt/ui/file-list/file-item.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/file-list/file-item.html",'<div class="file-item" ng-controller="FileActionsCtrl as fileActionsCtrl">    <div data-editable-text="file.title"         data-is-editing="item.isRenaming"         data-on-renamed="fileActionsCtrl.rename(file, newText)"         class="heading">        <div class="file-name"><a ng-href="#/files/{{file.id}}">{{file.title}}</a></div>        <a data-tooltip="rename" class="rename-action"           data-ng-click="editTitle($event)">            <span class="glyphicon glyphicon-pencil"></span>        </a>        <div class="file-actions">            <a data-tooltip="delete"               data-ng-click="fileActionsCtrl.remove(file)">                <span class="glyphicon glyphicon-trash"></span>            </a>        </div>    </div>    <div class="metadata">        <div>{{file.size | bytes}}</div>        <div>{{file.createdAt| date:\'short\'}}        </div>    </div>    <a ng-href="#/files/{{file.id}}">        <div class="preview" wb-bg-img="file.thumbnailUrl">            <div class="preview-overlay">                <cf-file-sync-icon file="file"></cf-file-sync-icon>            </div>        </div>    </a></div>')}]),angular.module("components/castifyExt/ui/file-list/files-list.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/file-list/files-list.html",'<div class="files-list">    <button type="button" class="btn pull-right remove-all" ng-click="removeAll()" ng-show="files.length">        <span class="glyphicon glyphicon-trash"></span>        Delete all    </button>    <h2>Your Screencasts</h2>    <cf-sync-info></cf-sync-info>    <cf-edit-jobs-info></cf-edit-jobs-info>    <ul>        <li data-ng-repeat="file in files | orderBy:\'-createdAt\' track by file.id">            <cf-file-item data-file="file"></cf-file-item>        </li>    </ul>    <div data-ng-show="files.length == 0 && !loading && !error">        You have not recorded anything yet.</div>    <div ng-show="loading">Loading...</div>    <alert type="danger" ng-if="error">        Failed to load. Please try to reload the page.    </alert></div>')}]),angular.module("components/castifyExt/ui/file-sync-info/file-sync-icon.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/file-sync-info/file-sync-icon.html",'<div class="file-sync-status-icon" ng-class="\'state-\' + syncInfo.state" ng-show="syncInfo">    <cf-sync-progress-icon ng-if="syncInfo.progress" value="syncInfo.progress"></cf-sync-progress-icon></div>')}]),angular.module("components/castifyExt/ui/file-sync-info/file-sync-info.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/file-sync-info/file-sync-info.html",'<div class="file-sync-info">    <cf-file-sync-icon file="file"></cf-file-sync-icon>    <span ng-switch="syncInfo.state">        <span ng-switch-when="disabled">stored locally</span>        <span ng-switch-when="synced">stored on Drive</span>        <span ng-switch-default>not stored on Drive yet</span>    </span></div>')}]),angular.module("components/castifyExt/ui/getting-started/getting-started.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/getting-started/getting-started.html",'<div class="container getting-started">    <h2>Getting Started</h2>    <iframe width="400" height="295" class="demo-video"            src="https://www.youtube.com/embed/aDvSjk6DtCY?rel=0&amp;showinfo=0&amp;autoplay=1&amp;cc_load_policy=1"            frameborder="0" allowfullscreen></iframe></div>')}]),angular.module("components/castifyExt/ui/license-hint/license-hint.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/license-hint/license-hint.html",'<div class="license-hint">    <div ng-if="licensing.shouldLimitLength()">        <div class="free-info" ng-if="!licensing.hasLicense()">            You are not signed in. Recording length is limited to 10&nbsp;minutes.            <a ng-click="signIn()">Sign In</a>        </div>        <div class="free-info" ng-if="licensing.hasLicense()">            You are using Screencastify Lite. Recording length is limited to 10&nbsp;minutes.            <a new-tab               href="https://www.screencastify.com/buy?utm_source=app&utm_medium=popup&utm_campaign=recording_length">Upgrade</a>        </div>    </div>    <div class="free-info" ng-if="!licensing.shouldLimitLength() && !licensing.isPaid()">        Do you like Screencastify?        <a new-tab           href="https://www.screencastify.com/buy?utm_source=app&utm_medium=popup&utm_campaign=support">Support            us.</a>    </div></div>')}]),angular.module("components/castifyExt/ui/livepreview/livePreviewCanvas.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/livepreview/livePreviewCanvas.html",'<div class="live-preview-canvas">    <video autoplay class="screen"></video>    <video autoplay class="camera"></video></div>')}]),angular.module("components/castifyExt/ui/livepreview/livepreview.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/livepreview/livepreview.html",'<div class="livepreview recorder-state" data-ng-class="recorder.info.state"     data-ng-show="recorder.info.state && recorder.info.state != \'inactive\'">    <cf-live-preview-canvas></cf-live-preview-canvas>    <div class="ctrlContainer" ng-class="{\'loading-overlay\': recorder.info.isBlocked}">        <div class="ctrlLeft">            <div class="status-icon"></div>            <div class="status-text">                <span class="show-on-paused">Recording is paused</span>                <span class="show-on-recording">Recording</span>            </div>        </div>        <div class="ctrlMiddle">            <button class="btn show-on-recording" data-ng-click="recorder.pause()">Pause</button>            <button class="btn show-on-paused" data-ng-click="recorder.resume()">Resume</button>        </div>    </div></div>')}]),angular.module("components/castifyExt/ui/mic-level/mic-level-slider.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/mic-level/mic-level-slider.html",'<div class="mic-level-slider">    <input type="range" min="-2" max="5" step="0.01" ng-model="micGainRange"           list=volsettings>    <datalist id=volsettings>        <option>0</option>    </datalist></div>')}]),angular.module("components/castifyExt/ui/nonacl.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/nonacl.html",'<div>    <h1>Your Browser lacks NaCl support</h1>    <p>        Ops, your Browser does not seem to have NaCl support compiled in.        You are most likely using an outdated or crippled        chromium build.    </p>    <p>        Please install the        <a data-new-tab href="https://www.google.com/intl/en/chrome/browser/">official        Google Chrome build</a> and try again.    </p>    <p>        If you are using an official Chrome Version, you might have        <a new-tab href="chrome://plugins">disabled Native Client</a> accidentally.    </p></div>')}]),angular.module("components/castifyExt/ui/options/options.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/options/options.html",'<div class="container">    <div class="smallView options">        <h2>Screencastify Options</h2>        <section>            <h4>Where to Store your Recordings <cf-policy-hint key="driveSync"></cf-policy-hint></h4>            <cf-storage-option ng-model="opt.driveSync"></cf-storage-option>        </section>        <section>            <h4>Notifications</h4>            <div class="checkbox">                <label>                    <input type="checkbox" ng-model="opt.notifyTabFocus">Warn                    me when I\'m recording a background tab. <br>                    <small>Screencastify records the tab it was started on.                        When you want it to record a new tab,                        you need to instruct it to do so manually.                        This notification helps you to remember this.                    </small>                </label>            </div>            <div class="checkbox">                <label>                    <input type="checkbox" ng-model="opt.notifySyncProgress"                           ng-show="opt.driveSync">Show Drive Upload Progress<br>                    <small>It takes some time to store your recordings on Drive. This                        notification shows the current progress.</small>                </label>            </div>            <div class="checkbox">                <label>                    <input type="checkbox" ng-model="opt.notifyEditProgress"                           ng-show="opt.driveSync">Show Video Edit Progress<br>                    <small>It takes some time to process video edits. This                        notification shows the current progress.</small>                </label>            </div>        </section>        <section>            <h4>Automation</h4>            <div class="checkbox">                <label>                    <input type="checkbox" ng-model="opt.enableDiskSpaceWatcher">Pause on low disk space.                    <br>                    <small>                        Pause recording when there is less than                        1GB of free disk space left. This avoids using up all disk space,                        which may lead to corrupted recordings. Strongly recommended.                    </small>                </label>            </div>            <div class="checkbox">                <label>                    <input type="checkbox" ng-model="opt.autoOpen">Open                    screencast after recording. <br>                    <small>Your recorded video will be opened in a new tab                        where you can directly view and share it.                    </small>                </label>            </div>        </section>        <section>            <h4>Keyboard Shortcuts</h4>            Shortcuts can be configured <a                href="chrome://extensions/configureCommands" new-tab>here</a>.        </section>    </div></div>')}]),angular.module("components/castifyExt/ui/options/storage-option.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/options/storage-option.html",'<div class="radio">    <label>        <input type="radio" ng-model="ngModel" ng-value="true">Google Drive. <br>        <small>Screencastify will store your recordings on Google Drive.            They will not use any disk space on this device and you can access them            from            other devices.        </small>    </label></div><div class="radio">    <label>        <input type="radio" ng-model="ngModel" ng-value="false">Locally on this        Device.        <br>        <small>ScreenCastify will store your recordings locally on this Device.            You cannot access your recordings from other devices without sharing            them manually. Uninstalling Screencastify or removing your            Chrome User will delete all your recordings.            Not recommended on ChromeOS as Users may get deleted automatically when            running out of disk space.        </small>    </label></div>')}]),angular.module("components/castifyExt/ui/policy-hint/policy-hint.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/policy-hint/policy-hint.html",'<span class="policy-hint" ng-if="show"      tooltip="Only your domain administrator can change this setting.">Set by enterprise policy</span>')}]),angular.module("components/castifyExt/ui/record-options/record-options.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/record-options/record-options.html",'<div class="cf-record-options">    <div class="option-label capture">        <span class="multi-label">Capture: </span>        <label class="radio-inline">            <input type="radio" value="tab"                   data-ng-model="recordConfig.captureSource">Tab        </label>        <label class="radio-inline">            <input type="radio" value="desktop"                   data-ng-model="recordConfig.captureSource">Desktop        </label>        <label class="radio-inline" ng-show="hasCam">            <input type="radio" value="cam"                   data-ng-model="recordConfig.captureSource">Cam        </label>    </div>    <div class="group-heading">        <span class="glyphicon glyphicon-volume-up"></span> Audio    </div>    <div class="option-label checkbox" ng-if="hasMic">        <label>            <input type="checkbox" data-ng-model="recordConfig.audio.mic">            Microphone:            <cf-device-chooser ng-model="recordConfig.audio.micSourceId" input-type="audio">            </cf-device-chooser>        </label>        <cf-mic-level-and-slider ng-if="recordConfig.audio.mic"                                 source-id="recordConfig.audio.micSourceId">        </cf-mic-level-and-slider>    </div>    <div class="option-label" ng-if="!hasMic">        No microphone connected.    </div>    <div class="option-label checkbox" ng-show="canCaptureSystemAudio">        <label>            <input type="checkbox"                   data-ng-model="recordConfig.audio.system">{{systemAudioLabel}}        </label>    </div>    <div class="group-heading">        <span class="glyphicon glyphicon-facetime-video"></span> Video    </div>    <div class="option-label checkbox"         data-ng-show="recordConfig.audio.mic && hasCam && recordConfig.captureSource != \'cam\'">        <label>            <input type="checkbox"                   data-ng-model="recordConfig.embedWebcam">            Embed webcam:            <cf-select-dropdown options="camPositions" ng-model="recordConfig.camPosition">            </cf-select-dropdown>        </label>    </div>    <div class="option-label"         ng-show="(recordConfig.audio.mic && recordConfig.embedWebcam) || recordConfig.captureSource == \'cam\'">        Webcam:        <cf-device-chooser ng-model="recordConfig.camSourceId" input-type="video">        </cf-device-chooser>    </div>    <div data-collapse="!optionsShown">        <div data-ng-show="recordConfig.captureSource == \'tab\'" class="option-label">            Tab size:            <span class="dropdown" dropdown>                <a class="dropdown-toggle" dropdown-toggle><span                        data-pixel-resolution="tab"></span></a>                <ul class="dropdown-menu">                    <li role="presentation" class="dropdown-header">                        Resize tab to                    </li>                    <li data-ng-repeat="res in resolutions">                        <a data-ng-click="resizeTab(res)">{{res.name}}                            (<span                                    data-pixel-resolution="res"></span>)</a>                    </li>                </ul>            </span>        </div>        <div class="option-label" ng-show="recordConfig.captureSource != \'cam\'">            Max frame rate:            <span class="dropdown" dropdown>                <a class="dropdown-toggle" dropdown-toggle>{{recordConfig.targetFPS}}FPS</a>                <ul class="dropdown-menu">                    <li data-ng-repeat="fps in frameRates">                        <a data-ng-click="recordConfig.targetFPS=fps.value">{{fps.value}}                            FPS                            <small>{{fps.help}}</small>                        </a>                    </li>                </ul>            </span>        </div>        <div class="option-label checkbox">            <label>                <input type="checkbox"                       data-ng-model="recordConfig.limitResolution">Limit                Resolution</label><span                class="dropdown dropup" dropdown                data-ng-show="recordConfig.limitResolution">:            <a class="dropdown-toggle" dropdown-toggle><span                    data-pixel-resolution="recordConfig.maxResolution"></span></a>            <ul class="dropdown-menu">                <li data-ng-repeat="res in resolutions">                    <a data-ng-click="recordConfig.maxResolution=res">{{res.name}}                        (<span data-pixel-resolution="res"></span>)</a>                </li>            </ul>        </span>        </div>        <div class="option-label checkbox"             data-ng-show="recordConfig.captureSource == \'tab\'">            <label><input type="checkbox"                          data-ng-model="recordConfig.mouse.enable">Show mouse cursor            </label>        </div>    </div>    <div class="resolution-info">        Your video will be recorded with        <span data-pixel-resolution="recordingResolution"></span>&nbsp;px        <span ng-show="recordConfig.captureSource != \'cam\'">at            {{recordConfig.targetFPS}}&nbsp;FPS</span>        <a data-ng-click="optionsShown = !optionsShown"           data-ng-hide="optionsShown">(More...)</a>    </div>    <div class="divider"></div>    <div class="option-label checkbox">        <label>            <input type="checkbox"                   data-ng-model="recordConfig.showPreview">Show preview window.        </label>    </div></div>')}]),angular.module("components/castifyExt/ui/recorder/capture-source-info.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/recorder/capture-source-info.html",'<div data-ng-switch="recorder.config.captureSource">    <div data-ng-switch-when="tab">        <div data-ng-show="recorder.config.tabId == tab.id">            This tab is being recorded        </div>        <div data-ng-show="recorder.config.tabId != tab.id">            Another tab is currently being recorded            (<a class="tab-title"                data-ng-click="showTab()">{{recorder.config.tabTitle}}</a>)        </div>    </div>    <div data-ng-switch-when="cam">        Your webcam is being recorded.    </div>    <div data-ng-switch-default>        Your desktop is being recorded.    </div></div>');

}]),angular.module("components/castifyExt/ui/recorder/mic-level-and-slider.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/recorder/mic-level-and-slider.html",'<div class="mic-level-container">    <div tooltip="Adjust the slider if your recordings are to silent                                 or too loud. The volume indicator should be in the middle                                 (green to yellow) when you speak normally.                                 Avoid orange and red to avoid clipping."         tooltip-top="bottom">        <cf-mic-level width="50" height="5" source-id="sourceId"                      orientation="horizontal"></cf-mic-level>        <cf-mic-level-slider></cf-mic-level-slider>    </div></div>')}]),angular.module("components/castifyExt/ui/recorder/record-ctrl-buttons.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/recorder/record-ctrl-buttons.html",'<div class="ctrlButtons">    <button data-ng-show="recorder.config.tabId != tab.id && recorder.config.captureSource == \'tab\'"            data-tooltip="switch recording focus to this tab"            class="btn full"            data-ng-click="replaceStream()">        Record this tab.    </button>    <button class="btn pause bigicon"            data-ng-click="pause()"            data-ng-show="recorder.state==\'recording\'">        <span class="glyphicon glyphicon-pause"></span>        <span>Pause</span>    </button>    <button class="btn resume bigicon"            data-ng-click="resume()"            data-ng-show="recorder.state==\'paused\'">        <span class="glyphicon glyphicon-play"></span>        <span>Resume</span>    </button>    <button class="btn btn-primary stop bigicon"            data-ng-click="stop()">        <span class="glyphicon glyphicon-stop"></span>        <span>Stop Recording</span>    </button></div>')}]),angular.module("components/castifyExt/ui/recorder/recorder.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/recorder/recorder.html",'<div class="recorder"     ng-class="{\'loading-overlay\': recorder.isBlocked && !recorder.isDesktopDialogShown}">    <div class="recorder-state" ng-class="recorder.state">        <div ng-if="recorder.state == \'inactive\'">            <h1>Record Screencast</h1>            <alert type="danger" close="recorder.startError = false"                   data-ng-show="recorder.startError">                Failed to start recording. <a                            cf-search-help="start recording">(Help)</a>            </alert>            <cf-record-options config="recordConfig"></cf-record-options>            <cf-license-hint></cf-license-hint>            <div class="ctrlButtons">                <a class="btn full" open-in-app-tab href="app.html#/files">                    Show existing Screencasts                </a>                <button class="btn btn-primary start full bigicon"                        data-ng-click="record()">                    Start Recording                </button>            </div>        </div>        <div ng-if="recorder.state == \'recording\' || recorder.state == \'paused\'">            <h1 class="show-on-recording">Recording - {{recorder.time|duration}}</h1>            <h1 class="show-on-paused">Paused - {{recorder.time|duration}}</h1>            <cf-capture-source-info></cf-capture-source-info>            <div class="recording-info">                <div>                    Resolution: <span data-pixel-resolution="recorder.recordingResolution"></span>                </div>                <div class="show-on-recording">FPS: {{recorder.fps | number:0}}                </div>                <div class="divider"></div>                <div class="checkbox">                    <label>                        <input type="checkbox"                               data-ng-model="recorder.previewShown"                               data-ng-change="onShowPreview()">                        Show preview window.                    </label>                </div>            </div>            <div ng-if="recorder.config.audio.mic">                <div class="group-heading">                    <span class="glyphicon glyphicon-volume-up"></span> Audio                </div>                <cf-mic-level-and-slider source-id="recorder.config.audio.micSourceId">                </cf-mic-level-and-slider>            </div>            <cf-record-ctrl-buttons></cf-record-ctrl-buttons>        </div>        <div ng-if="!recorder.state">            <h1>Loading...</h1>        </div>    </div>    <div ng-if="recorder.isDesktopDialogShown" class="desktop-choose-prompt">        <div class="message">            Please proceed in the dialog window.        </div>        <div class="hint">            Not seeing a dialog window? You might have clicked into the background.            Check you open Chrome windows for a window titled "Share your Screen - Screencastify".        </div>    </div></div>')}]),angular.module("components/castifyExt/ui/select-dropdown/select-dropdown.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/select-dropdown/select-dropdown.html",'<span class="dropdown" dropdown>    <a class="dropdown-toggle" dropdown-toggle>{{selected.name}}</a>    <ul class="dropdown-menu">        <li ng-repeat="item in options">            <a data-ng-click="select(item)">{{item.name}}</a>        </li>    </ul></span>')}]),angular.module("components/castifyExt/ui/share/share-dialog.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/share/share-dialog.html",'<div class="cf-upload-dialog" wb-location-change="$dismiss()">    <div class="modal-header">        <button type="button" class="close"                tabindex="-1"                data-ng-click="$dismiss()">&times;</button>        <h4>Share Screencast</h4>    </div>    <div class="modal-body" ng-class="{\'loading-overlay\': loading}">        <alert type="danger" close="saveError=false"               data-ng-show="saveError">            We failed to update your privacy setting.        </alert>        <div class="option-row">            <div class="option-label">Share on:</div>            <label class="radio-inline">                <input type="radio" value="youtube" ng-model="options.target">                <span class="wbIcon-youtube-red"></span>                Youtube            </label>            <label class="radio-inline">                <input type="radio" value="drive" ng-model="options.target">                <span class="wbIcon-drive"></span>                Google Drive            </label>        </div>        <div class="option-row" ng-show="options.target === \'youtube\'">            <div class="option-label">Youtube Channel:</div>            <cf-youtube-channel-chooser                    ng-model="options.youtubeChannelId">            </cf-youtube-channel-chooser>        </div>        <div class="option-row privacy" ng-hide="fileStatus.uploading">            <div class="option-label">Privacy:</div>            <label class="radio">                <input type="radio" value="public" ng-model="options.privacy">                <span class="glyphicon glyphicon-globe"></span>                Public                <span class="option-help">                    Anybody can view the video.                </span>            </label>            <label class="radio">                <input type="radio" value="unlisted" ng-model="options.privacy">                <span class="glyphicon glyphicon-link"></span>                Unlisted                <span class="option-help">                    Only people who have the link to the video can view it.                </span>            </label>            <label class="radio">                <input type="radio" value="private" ng-model="options.privacy">                <span class="glyphicon glyphicon-user"></span>                Private                <span class="option-help">                    Only you can view the video.                </span>            </label>        </div>        <div ng-show="fileStatus.uploaded" class="upload-hint">            This video is already uploaded. You can change the privacy setting above.        </div>        <div ng-show="fileStatus.uploading" class="upload-hint">            Upload is in progress. Please wait for the upload to complete.        </div>    </div>    <div class="modal-footer">        <button class="btn btn-primary" ng-show="fileStatus.uploaded"                tabindex="0"                ng-disabled="!isValid() || fileStatus.privacy == options.privacy"                data-ng-click="save()">            Save Privacy        </button>        <button class="btn btn-primary" ng-hide="fileStatus.uploaded"                tabindex="0"                ng-disabled="!isValid() || fileStatus.uploading"                data-ng-click="upload()">            Upload        </button>        <button class="btn"                data-ng-click="$dismiss()"                tabindex="0">            Cancel        </button>    </div></div>')}]),angular.module("components/castifyExt/ui/sync-info/sync-info.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/sync-info/sync-info.html",'<div class="sync-info" ng-switch="state.type">    <div ng-switch-when="synced" ng-show="state.numTotalFiles">        <span class="wbIcon wbIcon-cloud-black-checked"></span>        <ng-pluralize                count="state.numTotalFiles"                when="{\'one\': \'Your recording is\', \'other\': \'All {} recordings are\'}">        </ng-pluralize>        stored on Google Drive.    </div>    <div ng-switch-when="uploading">        <cf-sync-progress-icon value="state.progress"></cf-sync-progress-icon>        <ng-pluralize                count="state.numTotalFiles - state.numCompleteFiles"                when="{\'0\': \'One recording is\',                \'one\': \'One recording is\',                \'other\': \'{} recordings are\'}">        </ng-pluralize>        being uploaded to Google Drive.    </div>    <div ng-switch-when="waiting">        <span class="wbIcon wbIcon-cloud-black-empty"></span>        <ng-pluralize                count="state.numTotalFiles"                when="{\'one\': \'One recording is\',                \'other\': \'{} recordings are\'}">        </ng-pluralize>        waiting to get saved on Google Drive.    </div>    <div ng-switch-when="offline">        <span class="wbIcon wbIcon-cloud-black-warn"></span>        You are offline.        <ng-pluralize                count="state.numTotalFiles"                when="{\'0\': \'Some recordings are\', \'one\': \'One recording is\',                \'other\': \'{} recordings are\'}">        </ng-pluralize>        not saved on Google Drive yet.    </div>    <div ng-switch-when="error">        <span class="wbIcon wbIcon-cloud-black-warn"></span>        We failed to save some recordings on Google Drive. <a ng-click="retry()">Retry</a>        <div ng-if="state.errorReason == \'forbidden\'">            Google Drive Apps seem to be disabled for your domain. <a cf-search-help="Drive Apps">Search Help</a>        </div>    </div>    <div ng-switch-when="disabled">        <span class="wbIcon wbIcon-cloud-black-empty"></span>        Synchronization with Google Drive is disabled. Your        recordings are stored locally on this computer.    </div></div>')}]),angular.module("components/castifyExt/ui/sync-progress-icon/sync-progress-icon.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/sync-progress-icon/sync-progress-icon.html",'<div class="sync-progress-icon">    <div ng-if="progress"         class="progress-icon"         ng-style="{width: progress * 100 + \'%\'}"></div></div>')}]),angular.module("components/castifyExt/ui/sync-setup/sync-setup-auth-prompt.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/sync-setup/sync-setup-auth-prompt.html",'<div class="sync-setup-auth-prompt">    <div ng-show="dialogShown" class="message">        Please grant access in the dialog window.    </div>    <div ng-hide="dialogShown">        <div class="message">            You have chosen to store your recordings on Google Drive. To do this, Screencastify            needs            permission to store files in your Drive Account.        </div>        <button class="btn btn-primary" ng-click="grantAuth()">Grant Permission</button>    </div></div>')}]),angular.module("components/castifyExt/ui/sync-setup/sync-setup-view.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/sync-setup/sync-setup-view.html",'<div class="container sync-setup">    <h2>Google Drive Setup</h2>    <div ng-switch="state">        <cf-sync-setup-auth-prompt ng-switch-when="authMissing"                                   auth-granted="onAuthGranted()"></cf-sync-setup-auth-prompt>        <div ng-switch-when="loading">Loading...</div>        <div ng-switch-when="complete">Congratulations!            Screencastify is ready to be used with Google Drive.        </div>        <div ng-switch-when="disabled"></div>    </div></div>')}]),angular.module("components/castifyExt/ui/syncaware-video/iframe.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/syncaware-video/iframe.html",'<html><body>    <script src="/components/castifyExt/ui/syncaware-video/frame-app.js"></script>    <video></video></body></html>')}]),angular.module("components/castifyExt/ui/topnav/topnav.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/topnav/topnav.html",'<header class="topnav" role="banner" ng-show="showTopNav">    <div class="logo"></div>    <div class="btn-group menu-btn" dropdown>        <button type="button" class="btn dropdown-toggle" dropdown-toggle>            <span class="wbIcon-appbar-black"></span>            <span class="caret"></span>        </button>        <cf-app-menu class="sidebar" role="menu"></cf-app-menu>    </div>    <a class="brand" href="#/">Screencastify        <small ng-show="licensing.shouldLimitLength()">Lite</small>    </a>    <div class="user-info">        <span class="user-email" ng-show="userInfo.isSignedIn"              tooltip="Chrome User Account" tooltip-placement="bottom">            {{userInfo.me.email}}        </span>        <a ng-hide="userInfo.isSignedIn" ng-click="userInfo.signIn()">            Sign In        </a>    </div></header>')}]),angular.module("components/castifyExt/ui/update-notice/update-notice.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/update-notice/update-notice.html",'<div class="container">    <h2>Screencastify has been Updated</h2>    <p>        Screencastify now uses a new authentication system under the hood.        <b>You have been signed out and may need to to sign in again.</b> <br>        After that, everything will work just as it did before.    </p></div>')}]),angular.module("components/castifyExt/ui/upload-info/upload-info.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/upload-info/upload-info.html",'<div class="upload-info">    <div ng-repeat="upload in uploads" class="upload-item" ng-hide="upload.isSyncUpload">        <div class="upload-target">            Upload to {{getHumanTargetName(upload.target)}}        </div>        <div data-ng-switch data-on="upload.state">            <div data-ng-switch-when="queued">                waiting...            </div>            <div data-ng-switch-when="uploading">                <progressbar value="upload.progress" max="1" animate="false"                             class="upload-progress-bar"></progressbar>            </div>            <div data-ng-switch-when="error" class="error">                <div data-ng-switch data-on="upload.error.reason">                    <div data-ng-switch-when="youtubeSignupRequired">                        Your Google Account not associated with a Youtube                        Channel.                        <a                                href="https://www.youtube.com/create_channel" target="_blank"                                new-tab>                            Create a Youtube Channel</a> or                        <a href="https://www.google.com/plus" new-tab>enable Google+</a> for your                        Account                        to                        use this feature.<br>                    </div>                    <div data-ng-switch-default>                        Upload failed: {{upload.error.reason}} <a                            cf-search-help="{{upload.error.reason}}">(Help)</a>                    </div>                </div>            </div>        </div>    </div></div>')}]),angular.module("components/castifyExt/ui/video-player/video-player.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/video-player/video-player.html",'<div class="video-player">    <video autoplay controls disable-contextmenu cf-video-load="file"></video>    <div class="loading-indicator" ng-show="loading"></div></div>')}]),angular.module("components/castifyExt/ui/welcome/welcome.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/welcome/welcome.html",'<div class="container welcome">    <h2>Screencastify Setup</h2>    <p>        Congratulations! You have successfully installed Screencastify. <br>        <span ng-show="!setupComplete">Just one more step before you can start recording.</span>    </p>    <div ng-show="loading">Loading...</div>    <div ng-hide="loading">        <div class="setup-step" ng-hide="setupState.cam">            <h3>Voice and Camera Recording</h3>            <p>                Screencastify needs access to your microphone and camera for voice and camera                recording.            </p>            <div>                <button class="btn btn-primary" ng-click="setupCam()">Setup Camera Access</button>            </div>        </div>        <div class="setup-step" ng-hide="appOptions.isSetByEnterprisePolicy(\'driveSync\')">            <h3>Choose Where to Store your Recordings</h3>            <cf-storage-option ng-model="driveSync"></cf-storage-option>        </div>        <div class="setup-step" ng-show="!setupState.signIn && driveSync">            <h3>Google Drive</h3>            <cf-sync-setup-auth-prompt                    auth-granted="onSignedIn()"></cf-sync-setup-auth-prompt>        </div>        <a class="btn get-started btn-primary"           href="#/getting-started"                ng-show="setupComplete"><span class="glyphicon glyphicon-ok"></span> Get Started        </a>    </div></div>')}]),angular.module("components/castifyExt/ui/youtube-channel-chooser/youtube-channel-chooser.html",[]).run(["$templateCache",function(a){a.put("components/castifyExt/ui/youtube-channel-chooser/youtube-channel-chooser.html",'<div class="youtube-channel-chooser dropdown" dropdown ng-class="{\'loading-overlay\': loading}"     is-open="isDropdownOpen">    <a ng-click="openOrAdd($event)">        <div class="channel-icon" ng-if="selected.thumbnailUrl"             wb-bg-img="selected.thumbnailUrl"></div>        {{selected.title}}    </a>    <ul class="dropdown-menu">        <li ng-repeat="item in channels" data-ng-click="select(item)" class="channel">            <div class="channel-icon" wb-bg-img="item.thumbnailUrl"></div>            <div class="channel-name">{{item.title}}</div>            <span class="glyphicon glyphicon-remove channel-remove" ng-click="remove(item, $event)"                  tooltip="remove channel"></span>        </li>        <li role="presentation" class="divider"></li>        <li class="add"><a ng-click="addChannel()">            <span class="glyphicon glyphicon-plus"></span>Add Channel</a>        </li>    </ul></div>')}]),angular.module("components/w69b/ui/drivepicker.html",[]).run(["$templateCache",function(a){a.put("components/w69b/ui/drivepicker.html",'<button class="btn" ng-disabled="isDisabled"        ng-click="openDriveDialog()" ng-transclude></button>')}]),angular.module("components/w69b/ui/simple-dialog/simple-dialog.html",[]).run(["$templateCache",function(a){a.put("components/w69b/ui/simple-dialog/simple-dialog.html",'<div class="wb-simple-dialog" wb-location-change="$dismiss()">    <div class="modal-header" ng-show="options.title">        <button type="button" class="close"                tabindex="-1"                data-ng-click="$dismiss()">&times;</button>        <h4>{{options.title}}</h4>    </div>    <div class="modal-body">        <div class="message">{{options.message}}</div>    </div>    <div class="modal-footer">        <button class="btn btn-primary"                tabindex="0"                ng-show="options.ok"                data-ng-click="$close(true)">            {{options.ok}}        </button>        <button class="btn"                ng-show="options.cancel"                data-ng-click="$dismiss()"                tabindex="0">            {{options.cancel}}        </button>    </div></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">    <button ng-show="closeable" type="button" class="close" ng-click="close()">        <span aria-hidden="true">&times;</span>        <span class="sr-only">Close</span>    </button>    <div ng-transclude></div></div>')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade"     ng-class="{in: animate}"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div class="modal fade {{ windowClass }}" ng-class="{in: animate}" data-wb-loop-focus     ng-click="close($event)">    <div class="modal-dialog">        <div class="modal-content" ng-transclude></div>    </div></div>')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div></div>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">  <div class="tooltip-arrow"></div>  <div class="tooltip-inner" bind-html-unsafe="content"></div></div>')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">  <div class="tooltip-arrow"></div>  <div class="tooltip-inner" ng-bind="content"></div></div>')}]),angular.module("templates",["components/castifyEdit/ui/crop-canvas/crop-canvas.html","components/castifyEdit/ui/time-line/time-line.html","components/castifyEdit/ui/trim-slider/trim-slider.html","components/castifyEdit/ui/video-controls/video-controls.html","components/castifyEdit/ui/video-editor.html","components/castifyExt/ui/app-menu/app-menu.html","components/castifyExt/ui/bugs/bug-report.html","components/castifyExt/ui/device-chooser/device-chooser.html","components/castifyExt/ui/edit-jobs-info/edit-jobs-info.html","components/castifyExt/ui/file-detail/file-detail.html","components/castifyExt/ui/file-edit/file-edit.html","components/castifyExt/ui/file-list/file-item.html","components/castifyExt/ui/file-list/files-list.html","components/castifyExt/ui/file-sync-info/file-sync-icon.html","components/castifyExt/ui/file-sync-info/file-sync-info.html","components/castifyExt/ui/getting-started/getting-started.html","components/castifyExt/ui/license-hint/license-hint.html","components/castifyExt/ui/livepreview/livePreviewCanvas.html","components/castifyExt/ui/livepreview/livepreview.html","components/castifyExt/ui/mic-level/mic-level-slider.html","components/castifyExt/ui/nonacl.html","components/castifyExt/ui/options/options.html","components/castifyExt/ui/options/storage-option.html","components/castifyExt/ui/policy-hint/policy-hint.html","components/castifyExt/ui/record-options/record-options.html","components/castifyExt/ui/recorder/capture-source-info.html","components/castifyExt/ui/recorder/mic-level-and-slider.html","components/castifyExt/ui/recorder/record-ctrl-buttons.html","components/castifyExt/ui/recorder/recorder.html","components/castifyExt/ui/select-dropdown/select-dropdown.html","components/castifyExt/ui/share/share-dialog.html","components/castifyExt/ui/sync-info/sync-info.html","components/castifyExt/ui/sync-progress-icon/sync-progress-icon.html","components/castifyExt/ui/sync-setup/sync-setup-auth-prompt.html","components/castifyExt/ui/sync-setup/sync-setup-view.html","components/castifyExt/ui/syncaware-video/iframe.html","components/castifyExt/ui/topnav/topnav.html","components/castifyExt/ui/update-notice/update-notice.html","components/castifyExt/ui/upload-info/upload-info.html","components/castifyExt/ui/video-player/video-player.html","components/castifyExt/ui/welcome/welcome.html","components/castifyExt/ui/youtube-channel-chooser/youtube-channel-chooser.html","components/w69b/ui/drivepicker.html","components/w69b/ui/simple-dialog/simple-dialog.html","template/alert/alert.html","template/modal/backdrop.html","template/modal/window.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html"]),function(a){"use strict";function b(a,b,c){for(var d=[b],e=0;e<c.length;e++)d[e+1]=c[e];var f=A(Function.prototype.bind,a,d);return f}function c(a,c){var d=new(b(a,null,c));return d}function d(){return"__$"+Math.floor(1e9*Math.random())+"$"+ ++B+"$__"}function e(a){return C[a]}function f(){var a=d();return C[a]=!0,a}function g(a,b,c){return[D,a,b,c]}function h(a){return a&&a[0]===D}function i(){E=f(),Function.prototype.call=j(function(){var a=l(function(a){for(var b=[],c=1;c<arguments.length;++c)b[c-1]=arguments[c];var d=g(this,a,b);return d},this,arguments);return a}),Function.prototype.apply=j(function(){var a=l(function(a,b){var c=g(this,a,b);return c},this,arguments);return a})}function j(a){return null===E&&i(),a[E]=!0,a}function k(a){return!!a[E]}function l(a,b,c){var d=c[0];if(h(d))return d=A(a,b,d[3]);for(d=g(a,b,c);;){if(d=k(a)?A(a,d[2],[d]):A(a,d[2],d[3]),!h(d))return d;a=d[1]}}function m(){var a;return a=k(this)?c(this,[g(null,null,arguments)]):c(this,arguments)}if(!a.$traceurRuntime){var n=Object,o=TypeError,p=n.create,q=n.defineProperties,r=n.defineProperty,s=n.freeze,t=n.getOwnPropertyDescriptor,u=n.getOwnPropertyNames,v=n.keys,w=n.prototype.hasOwnProperty,x=(n.prototype.toString,Object.preventExtensions),y=Object.seal,z=Object.isExtensible,A=Function.prototype.call.bind(Function.prototype.apply),B=0,C=p(null),D=Object.create(null),E=null;!function(){function b(a){return{configurable:!0,enumerable:!1,value:a,writable:!0}}function c(a){return"object"==typeof a&&a instanceof k}function h(a){return c(a)?"symbol":typeof a}function i(a){var b=new k(a);if(!(this instanceof i))return b;throw new TypeError("Symbol cannot be new'ed")}function k(a){var b=d();r(this,Z,{value:this}),r(this,X,{value:b}),r(this,Y,{value:a}),B(this),$[b]=this}function A(a){var b=a[_];return b&&b.self===a?b:z(a)?(ba.hash.value=ca++,ba.self.value=a,aa.value=p(null,ba),r(a,_,aa),aa.value):void 0}function B(a){return A(a),s.apply(this,arguments)}function D(a){return A(a),x.apply(this,arguments)}function E(a){return A(a),y.apply(this,arguments)}function F(a){return $[a]||C[a]}function G(a){return c(a)?a[X]:a}function H(a){for(var b=[],c=0;c<a.length;c++)F(a[c])||b.push(a[c]);return b}function I(a){return H(u(a))}function J(a){return H(v(a))}function K(a){for(var b=[],c=u(a),d=0;d<c.length;d++){var e=$[c[d]];e&&b.push(e)}return b}function L(a,b){return t(a,G(b))}function M(a){return w.call(this,G(a))}function N(b){return a.$traceurRuntime.options[b]}function O(a,b,d){return c(b)&&(b=b[X]),r(a,b,d),a}function P(a){r(a,"defineProperty",{value:O}),r(a,"getOwnPropertyNames",{value:I}),r(a,"getOwnPropertyDescriptor",{value:L}),r(a.prototype,"hasOwnProperty",{value:M}),r(a,"freeze",{value:B}),r(a,"preventExtensions",{value:D}),r(a,"seal",{value:E}),r(a,"keys",{value:J})}function Q(a){for(var b=1;b<arguments.length;b++)for(var c=u(arguments[b]),d=0;d<c.length;d++){var e=c[d];F(e)||!function(b,c){r(a,c,{get:function(){return b[c]},enumerable:!0})}(arguments[b],c[d])}return a}function R(a){return null!=a&&("object"==typeof a||"function"==typeof a)}function S(a){if(null==a)throw o();return n(a)}function T(a){if(null==a)throw new TypeError("Value cannot be converted to an Object");return a}function U(a,b){a.Symbol||(a.Symbol=b,Object.getOwnPropertySymbols=K),a.Symbol.iterator||(a.Symbol.iterator=b("Symbol.iterator")),a.Symbol.observer||(a.Symbol.observer=b("Symbol.observer"))}function V(a){U(a,i),a.Reflect=a.Reflect||{},a.Reflect.global=a.Reflect.global||a,P(a.Object)}var W=b,X=d(),Y=d(),Z=d(),$=p(null);r(i.prototype,"constructor",b(i)),r(i.prototype,"toString",W(function(){var a=this[Z];return a[X]})),r(i.prototype,"valueOf",W(function(){var a=this[Z];if(!a)throw TypeError("Conversion from symbol to string");return N("symbols")?a:a[X]})),r(k.prototype,"constructor",b(i)),r(k.prototype,"toString",{value:i.prototype.toString,enumerable:!1}),r(k.prototype,"valueOf",{value:i.prototype.valueOf,enumerable:!1});var _=f(),aa={value:void 0},ba={hash:{value:void 0},self:{value:void 0}},ca=0;B(k.prototype),V(a),a.$traceurRuntime={call:l,checkObjectCoercible:T,construct:m,continuation:g,createPrivateName:f,defineProperties:q,defineProperty:r,exportStar:Q,getOwnHashObject:A,getOwnPropertyDescriptor:t,getOwnPropertyNames:u,initTailRecursiveFunction:j,isObject:R,isPrivateName:e,isSymbolString:F,keys:v,options:{},setupGlobals:V,toObject:S,toProperty:G,"typeof":h}}()}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),function(){function a(a,b,c,d,e,f,g){var h=[];return a&&h.push(a,":"),c&&(h.push("//"),b&&h.push(b,"@"),h.push(c),d&&h.push(":",d)),e&&h.push(e),f&&h.push("?",f),g&&h.push("#",g),h.join("")}function b(a){return a.match(h)}function c(a){if("/"===a)return"/";for(var b="/"===a[0]?"/":"",c="/"===a.slice(-1)?"/":"",d=a.split("/"),e=[],f=0,g=0;g<d.length;g++){var h=d[g];switch(h){case"":case".":break;case"..":e.length?e.pop():f++;break;default:e.push(h)}}if(!b){for(;f-->0;)e.unshift("..");0===e.length&&e.push(".")}return b+e.join("/")+c}function d(b){var d=b[i.PATH]||"";return d=c(d),b[i.PATH]=d,a(b[i.SCHEME],b[i.USER_INFO],b[i.DOMAIN],b[i.PORT],b[i.PATH],b[i.QUERY_DATA],b[i.FRAGMENT])}function e(a){var c=b(a);return d(c)}function f(a,c){var e=b(c),f=b(a);if(e[i.SCHEME])return d(e);e[i.SCHEME]=f[i.SCHEME];for(var g=i.SCHEME;g<=i.PORT;g++)e[g]||(e[g]=f[g]);if("/"==e[i.PATH][0])return d(e);var h=f[i.PATH],j=h.lastIndexOf("/");return h=h.slice(0,j+1)+e[i.PATH],e[i.PATH]=h,d(e)}function g(a){if(!a)return!1;if("/"===a[0])return!0;var c=b(a);return c[i.SCHEME]?!0:!1}var h=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),i={
SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};$traceurRuntime.canonicalizeUrl=e,$traceurRuntime.isAbsolute=g,$traceurRuntime.removeDotSegments=c,$traceurRuntime.resolveUrl=f}(),function(a){"use strict";function b(a,b){this.url=a,this.value_=b}function c(a,b){this.message=this.constructor.name+": "+this.stripCause(b)+" in "+a,this.stack=b instanceof c||!b.stack?"":this.stripStack(b.stack)}function d(a,b){var c=[],d=b-3;0>d&&(d=0);for(var e=d;b>e;e++)c.push(a[e]);return c}function e(a,b){var c=b+1;c>a.length-1&&(c=a.length-1);for(var d=[],e=b;c>=e;e++)d.push(a[e]);return d}function f(a){for(var b="",c=0;a-1>c;c++)b+="-";return b}function g(a,c){b.call(this,a,null),this.func=c}function h(a){if(a){var b=r.normalize(a);return o[b]}}function i(a){var b=arguments[1],c=Object.create(null);return Object.getOwnPropertyNames(a).forEach(function(d){var e,f;if(b===q){var g=Object.getOwnPropertyDescriptor(a,d);g.get&&(e=g.get)}e||(f=a[d],e=function(){return f}),Object.defineProperty(c,d,{get:e,enumerable:!0})}),Object.preventExtensions(c),c}var j,k=$traceurRuntime,l=k.canonicalizeUrl,m=k.resolveUrl,n=k.isAbsolute,o=Object.create(null);j=a.location&&a.location.href?m(a.location.href,"./"):"",c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.stripError=function(a){return a.replace(/.*Error:/,this.constructor.name+":")},c.prototype.stripCause=function(a){return a?a.message?this.stripError(a.message):a+"":""},c.prototype.loadedBy=function(a){this.stack+="\n loaded by "+a},c.prototype.stripStack=function(a){var b=[];return a.split("\n").some(function(a){return/UncoatedModuleInstantiator/.test(a)?!0:void b.push(a)}),b[0]=this.stripError(b[0]),b.join("\n")},g.prototype=Object.create(b.prototype),g.prototype.getUncoatedModule=function(){if(this.value_)return this.value_;try{var b;return void 0!==typeof $traceurRuntime&&$traceurRuntime.require&&(b=$traceurRuntime.require.bind(null,this.url)),this.value_=this.func.call(a,b)}catch(g){if(g instanceof c)throw g.loadedBy(this.url),g;if(g.stack){var h=this.func.toString().split("\n"),i=[];g.stack.split("\n").some(function(a){if(a.indexOf("UncoatedModuleInstantiator.getUncoatedModule")>0)return!0;var b=/(at\s[^\s]*\s).*>:(\d*):(\d*)\)/.exec(a);if(b){var c=parseInt(b[2],10);i=i.concat(d(h,c)),i.push(f(b[3])+"^"),i=i.concat(e(h,c)),i.push("= = = = = = = = =")}else i.push(a)}),g.stack=i.join("\n")}throw new c(this.url,g)}};var p=Object.create(null),q={},r={normalize:function(a,b){if("string"!=typeof a)throw new TypeError("module name must be a string, not "+typeof a);if(n(a))return l(a);if(/[^\.]\/\.\.\//.test(a))throw new Error("module name embeds /../: "+a);return"."===a[0]&&b?m(b,a):l(a)},get:function(a){var b=h(a);if(!b)return void 0;var c=p[b.url];return c?c:(c=i(b.getUncoatedModule(),q),p[b.url]=c)},set:function(a,b){a=String(a),o[a]=new g(a,function(){return b}),p[a]=b},get baseURL(){return j},set baseURL(a){j=String(a)},registerModule:function(a,b,c){var d=r.normalize(a);if(o[d])throw new Error("duplicate module named "+d);o[d]=new g(d,c)},bundleStore:Object.create(null),register:function(a,b,c){b&&(b.length||c.length)?this.bundleStore[a]={deps:b,execute:function(){var a=arguments,d={};b.forEach(function(b,c){return d[b]=a[c]});var e=c.call(this,d);return e.execute.call(this),e.exports}}:this.registerModule(a,b,c)},getAnonymousModule:function(b){return new i(b.call(a),q)},getForTesting:function(a){var b=this;return this.testingPrefix_||Object.keys(p).some(function(a){var c=/(traceur@[^\/]*\/)/.exec(a);return c?(b.testingPrefix_=c[1],!0):void 0}),this.get(this.testingPrefix_+a)}},s=new i({ModuleStore:r});r.set("@traceur/src/runtime/ModuleStore",s),r.set("@traceur/src/runtime/ModuleStore.js",s);var t=$traceurRuntime.setupGlobals;$traceurRuntime.setupGlobals=function(a){t(a)},$traceurRuntime.ModuleStore=r,a.System={register:r.register.bind(r),registerModule:r.registerModule.bind(r),get:r.get,set:r.set,normalize:r.normalize},$traceurRuntime.getModuleImpl=function(a){var b=h(a);return b&&b.getUncoatedModule()}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),System.registerModule("traceur-runtime@0.0.87/src/runtime/async.js",[],function(){"use strict";function a(){}function b(){}function c(a){return a.prototype=j(b.prototype),a.__proto__=b,a}function d(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var e=j(b.prototype);return e[k]=this,e[l]=c,e[m]=a,e}function e(a,b){return new Promise(function(c,d){var e=a({next:function(a){return b.call(e,a)},"throw":function(a){d(a)},"return":function(a){c(a)}})})}function f(a){return Promise.resolve().then(a)}function g(a,b){return new q(a,b)}if("object"!=typeof $traceurRuntime)throw new Error("traceur runtime not found.");var h=$traceurRuntime.createPrivateName,i=$traceurRuntime.defineProperty,j=($traceurRuntime.defineProperties,Object.create),k=h(),l=h(),m=h();a.prototype=b,b.constructor=a,i(b,"constructor",{enumerable:!1});var n=function(a){var b=this;this.decoratedObserver=$traceurRuntime.createDecoratedGenerator(a,function(){b.done=!0}),this.done=!1,this.inReturn=!1};$traceurRuntime.createClass(n,{"throw":function(a){if(!this.inReturn)throw a},"yield":function(a){if(this.done)throw void(this.inReturn=!0);var b;try{b=this.decoratedObserver.next(a)}catch(c){throw this.done=!0,c}if(void 0!==b){if(b.done)throw this.done=!0,void(this.inReturn=!0);return b.value}},yieldFor:function(a){var b=this;return $traceurRuntime.observeForEach(a[$traceurRuntime.toProperty(Symbol.observer)].bind(a),function(a){if(b.done)return void this["return"]();var c;try{c=b.decoratedObserver.next(a)}catch(d){throw b.done=!0,d}if(void 0!==c)return c.done&&(b.done=!0),c})}},{}),b.prototype[Symbol.observer]=function(a){var b=this[m],c=new n(a);return $traceurRuntime.schedule(function(){return b(c)}).then(function(a){c.done||c.decoratedObserver["return"](a)})["catch"](function(a){c.done||c.decoratedObserver["throw"](a)}),c.decoratedObserver},i(b.prototype,Symbol.observer,{enumerable:!1});var o=Symbol(),p=Symbol(),q=function(a,b){this[o]=a,this[p]=b};return $traceurRuntime.createClass(q,{next:function(a){var b=this[o].next(a);return void 0!==b&&b.done&&this[p].call(this),b},"throw":function(a){return this[p].call(this),this[o]["throw"](a)},"return":function(a){return this[p].call(this),this[o]["return"](a)}},{}),$traceurRuntime.initAsyncGeneratorFunction=c,$traceurRuntime.createAsyncGeneratorInstance=d,$traceurRuntime.observeForEach=e,$traceurRuntime.schedule=f,$traceurRuntime.createDecoratedGenerator=g,{}}),System.registerModule("traceur-runtime@0.0.87/src/runtime/classes.js",[],function(){"use strict";function a(a,b){var c=n(a);do{var d=m(c,b);if(d)return d;c=n(c)}while(c);return void 0}function b(a){return a.__proto__}function c(b,c,d){var e=a(c,d);return e?e.get?e.get.call(b):e.value:void 0}function d(b,c,d,e){var f=a(c,d);if(f&&f.set)return f.set.call(b,e),e;throw i("super has no setter '"+d+"'.")}function e(a){for(var b={},c=p(a),d=0;d<c.length;d++){var e=c[d];b[e]=m(a,e)}for(var f=q(a),d=0;d<f.length;d++){var g=f[d];b[$traceurRuntime.toProperty(g)]=m(a,$traceurRuntime.toProperty(g))}return b}function f(a,b,c,d){return l(b,"constructor",{value:a,configurable:!0,enumerable:!1,writable:!0}),arguments.length>3?("function"==typeof d&&(a.__proto__=d),a.prototype=j(g(d),e(b))):a.prototype=b,l(a,"prototype",{configurable:!1,writable:!1}),k(a,e(c))}function g(a){if("function"==typeof a){var b=a.prototype;if(h(b)===b||null===b)return a.prototype;throw new i("super prototype must be an Object or null")}if(null===a)return null;throw new i("Super expression must either be null or a function, not "+typeof a+".")}var h=Object,i=TypeError,j=h.create,k=$traceurRuntime.defineProperties,l=$traceurRuntime.defineProperty,m=$traceurRuntime.getOwnPropertyDescriptor,n=($traceurRuntime.getOwnPropertyNames,Object.getPrototypeOf),o=Object,p=o.getOwnPropertyNames,q=o.getOwnPropertySymbols;return $traceurRuntime.createClass=f,$traceurRuntime.superConstructor=b,$traceurRuntime.superGet=c,$traceurRuntime.superSet=d,{}}),System.registerModule("traceur-runtime@0.0.87/src/runtime/destructuring.js",[],function(){"use strict";function a(a){for(var b,c=[],d=0;!(b=a.next()).done;)c[d++]=b.value;return c}return $traceurRuntime.iteratorToArray=a,{}}),System.registerModule("traceur-runtime@0.0.87/src/runtime/generators.js",[],function(){"use strict";function a(a){return{configurable:!0,enumerable:!1,value:a,writable:!0}}function b(a){return new Error("Traceur compiler bug: invalid state in state machine: "+a)}function c(){this.state=0,this.GState=r,this.storedException=void 0,this.finallyFallThrough=void 0,this.sent_=void 0,this.returnValue=void 0,this.oldReturnValue=void 0,this.tryStack_=[]}function d(a,b,c,d){switch(a.GState){case s:throw new Error('"'+c+'" on executing generator');case u:if("next"==c)return{value:void 0,done:!0};if(d===x)return{value:a.returnValue,done:!0};throw d;case r:if("throw"===c){if(a.GState=u,d===x)return{value:a.returnValue,done:!0};throw d}if(void 0!==d)throw q("Sent value to newborn generator");case t:a.GState=s,a.action=c,a.sent=d;var e;try{e=b(a)}catch(f){if(f!==x)throw f;e=a}var g=e===a;return g&&(e=a.returnValue),a.GState=g?u:t,{value:e,done:g}}}function e(){}function f(){}function g(a,b,d){var e=k(a,d),f=new c,g=p(b.prototype);return g[y]=f,g[z]=e,g}function h(a){return a.prototype=p(f.prototype),a.__proto__=f,a}function i(){c.call(this),this.err=void 0;var a=this;a.result=new Promise(function(b,c){a.resolve=b,a.reject=c})}function j(a,b){var c=k(a,b),d=new i;return d.createCallback=function(a){return function(b){d.state=a,d.value=b,c(d)}},d.errback=function(a){l(d,a),c(d)},c(d),d.result}function k(a,b){return function(c){for(;;)try{return a.call(b,c)}catch(d){l(c,d)}}}function l(a,b){a.storedException=b;var c=a.tryStack_[a.tryStack_.length-1];return c?(a.state=void 0!==c["catch"]?c["catch"]:c["finally"],void(void 0!==c.finallyFallThrough&&(a.finallyFallThrough=c.finallyFallThrough))):void a.handleException(b)}if("object"!=typeof $traceurRuntime)throw new Error("traceur runtime not found.");var m=$traceurRuntime.createPrivateName,n=$traceurRuntime.defineProperties,o=$traceurRuntime.defineProperty,p=Object.create,q=TypeError,r=0,s=1,t=2,u=3,v=-2,w=-3,x={};c.prototype={pushTry:function(a,b){if(null!==b){for(var c=null,d=this.tryStack_.length-1;d>=0;d--)if(void 0!==this.tryStack_[d]["catch"]){c=this.tryStack_[d]["catch"];break}null===c&&(c=w),this.tryStack_.push({"finally":b,finallyFallThrough:c})}null!==a&&this.tryStack_.push({"catch":a})},popTry:function(){this.tryStack_.pop()},maybeUncatchable:function(){if(this.storedException===x)throw x},get sent(){return this.maybeThrow(),this.sent_},set sent(a){this.sent_=a},get sentIgnoreThrow(){return this.sent_},maybeThrow:function(){if("throw"===this.action)throw this.action="next",this.sent_},end:function(){switch(this.state){case v:return this;case w:throw this.storedException;default:throw b(this.state)}},handleException:function(a){throw this.GState=u,this.state=v,a},wrapYieldStar:function(a){var b=this;return{next:function(b){return a.next(b)},"throw":function(c){var d;if(c===x){if(a["return"]){if(d=a["return"](b.returnValue),!d.done)return b.returnValue=b.oldReturnValue,d;b.returnValue=d.value}throw c}if(a["throw"])return a["throw"](c);throw a["return"]&&a["return"](),q("Inner iterator does not have a throw method")}}}};var y=m(),z=m();return e.prototype=f,o(f,"constructor",a(e)),f.prototype={constructor:f,next:function(a){return d(this[y],this[z],"next",a)},"throw":function(a){return d(this[y],this[z],"throw",a)},"return":function(a){return this[y].oldReturnValue=this[y].returnValue,this[y].returnValue=a,d(this[y],this[z],"throw",x)}},n(f.prototype,{constructor:{enumerable:!1},next:{enumerable:!1},"throw":{enumerable:!1},"return":{enumerable:!1}}),Object.defineProperty(f.prototype,Symbol.iterator,a(function(){return this})),i.prototype=p(c.prototype),i.prototype.end=function(){switch(this.state){case v:this.resolve(this.returnValue);break;case w:this.reject(this.storedException);break;default:this.reject(b(this.state))}},i.prototype.handleException=function(){this.state=w},$traceurRuntime.asyncWrap=j,$traceurRuntime.initGeneratorFunction=h,$traceurRuntime.createGeneratorInstance=g,{}}),System.registerModule("traceur-runtime@0.0.87/src/runtime/relativeRequire.js",[],function(){"use strict";function a(a,c){function d(a){return"/"===a.slice(-1)}function e(a){return"/"===a[0]}function f(a){return"."===a[0]}return b=b||"undefined"!=typeof require&&require("path"),d(c)||e(c)?void 0:require(f(c)?b.resolve(b.dirname(a),c):c)}var b;return $traceurRuntime.require=a,{}}),System.registerModule("traceur-runtime@0.0.87/src/runtime/spread.js",[],function(){"use strict";function a(){for(var a,b=[],c=0,d=0;d<arguments.length;d++){var e=$traceurRuntime.checkObjectCoercible(arguments[d]);if("function"!=typeof e[$traceurRuntime.toProperty(Symbol.iterator)])throw new TypeError("Cannot spread non-iterable object.");for(var f=e[$traceurRuntime.toProperty(Symbol.iterator)]();!(a=f.next()).done;)b[c++]=a.value}return b}return $traceurRuntime.spread=a,{}}),System.registerModule("traceur-runtime@0.0.87/src/runtime/type-assertions.js",[],function(){"use strict";function a(a){for(var b=[],e=1;e<arguments.length;e++)b[e-1]=arguments[e];var f=d,g=$traceurRuntime.getOwnHashObject(a).hash;f[g]||(f[g]=Object.create(null)),f=f[g];for(var h=0;h<b.length-1;h++)g=$traceurRuntime.getOwnHashObject(b[h]).hash,f[g]||(f[g]=Object.create(null)),f=f[g];var i=b[b.length-1];return g=$traceurRuntime.getOwnHashObject(i).hash,f[g]||(f[g]=new c(a,b)),f[g]}var b={any:{name:"any"},"boolean":{name:"boolean"},number:{name:"number"},string:{name:"string"},symbol:{name:"symbol"},"void":{name:"void"}},c=function(a,b){this.type=a,this.argumentTypes=b};$traceurRuntime.createClass(c,{},{});var d=Object.create(null);return $traceurRuntime.GenericType=c,$traceurRuntime.genericType=a,$traceurRuntime.type=b,{}}),System.registerModule("traceur-runtime@0.0.87/src/runtime/runtime-modules.js",[],function(){"use strict";return System.get("traceur-runtime@0.0.87/src/runtime/relativeRequire.js"),System.get("traceur-runtime@0.0.87/src/runtime/spread.js"),System.get("traceur-runtime@0.0.87/src/runtime/destructuring.js"),System.get("traceur-runtime@0.0.87/src/runtime/classes.js"),System.get("traceur-runtime@0.0.87/src/runtime/async.js"),System.get("traceur-runtime@0.0.87/src/runtime/generators.js"),System.get("traceur-runtime@0.0.87/src/runtime/type-assertions.js"),{}}),System.get("traceur-runtime@0.0.87/src/runtime/runtime-modules.js"),System.registerModule("traceur-runtime@0.0.87/src/runtime/polyfills/utils.js",[],function(){"use strict";function a(a){return a>>>0}function b(a){return a&&("object"==typeof a||"function"==typeof a)}function c(a){return"function"==typeof a}function d(a){return"number"==typeof a}function e(a){return a=+a,u(a)?0:0!==a&&t(a)?a>0?s(a):r(a):a}function f(a){var b=e(a);return 0>b?0:w(b,y)}function g(a){return b(a)?a[Symbol.iterator]:void 0}function h(a){return c(a)}function i(a,b){return{value:a,done:b}}function j(a,b,c){b in a||Object.defineProperty(a,b,c)}function k(a,b,c){j(a,b,{value:c,configurable:!0,enumerable:!1,writable:!0})}function l(a,b,c){j(a,b,{value:c,configurable:!1,enumerable:!1,writable:!1})}function m(a,b){for(var c=0;c<b.length;c+=2){var d=b[c],e=b[c+1];k(a,d,e)}}function n(a,b){for(var c=0;c<b.length;c+=2){var d=b[c],e=b[c+1];l(a,d,e)}}function o(a,b,c){c&&c.iterator&&!a[c.iterator]&&(a["@@iterator"]&&(b=a["@@iterator"]),Object.defineProperty(a,c.iterator,{value:b,configurable:!0,enumerable:!1,writable:!0}))}function p(a){z.push(a)}function q(a){z.forEach(function(b){return b(a)})}var r=Math.ceil,s=Math.floor,t=isFinite,u=isNaN,v=Math.pow,w=Math.min,x=$traceurRuntime.toObject,y=v(2,53)-1,z=[];return{get toObject(){return x},get toUint32(){return a},get isObject(){return b},get isCallable(){return c},get isNumber(){return d},get toInteger(){return e},get toLength(){return f},get checkIterable(){return g},get isConstructor(){return h},get createIteratorResultObject(){return i},get maybeDefine(){return j},get maybeDefineMethod(){return k},get maybeDefineConst(){return l},get maybeAddFunctions(){return m},get maybeAddConsts(){return n},get maybeAddIterator(){return o},get registerPolyfill(){return p},get polyfillAll(){return q}}}),System.registerModule("traceur-runtime@0.0.87/src/runtime/polyfills/Map.js",[],function(){"use strict";function a(a,b){if(e(b)){var c=h(b);return c&&a.objectIndex_[c.hash]}return"string"==typeof b?a.stringIndex_[b]:a.primitiveIndex_[b]}function b(a){a.entries_=[],a.objectIndex_=Object.create(null),a.stringIndex_=Object.create(null),a.primitiveIndex_=Object.create(null),a.deletedCount_=0}function c(a){var b=a,c=b.Object,d=b.Symbol;a.Map||(a.Map=k);var e=a.Map.prototype;void 0===e.entries&&(a.Map=k),e.entries&&(f(e,e.entries,d),f(c.getPrototypeOf((new a.Map).entries()),function(){return this},d))}var d=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/utils.js"),e=d.isObject,f=d.maybeAddIterator,g=d.registerPolyfill,h=$traceurRuntime.getOwnHashObject,i=Object.prototype.hasOwnProperty,j={},k=function(){var a,c,d=arguments[0];if(!e(this))throw new TypeError("Map called on incompatible type");if(i.call(this,"entries_"))throw new TypeError("Map can not be reentrantly initialised");if(b(this),null!==d&&void 0!==d){var f=!0,g=!1,h=void 0;try{for(var j=void 0,k=d[$traceurRuntime.toProperty(Symbol.iterator)]();!(f=(j=k.next()).done);f=!0){var l=j.value,m=(a=l[$traceurRuntime.toProperty(Symbol.iterator)](),(c=a.next()).done?void 0:c.value),n=(c=a.next()).done?void 0:c.value;this.set(m,n)}}catch(o){g=!0,h=o}finally{try{f||null==k["return"]||k["return"]()}finally{if(g)throw h}}}};return $traceurRuntime.createClass(k,{get size(){return this.entries_.length/2-this.deletedCount_},get:function(b){var c=a(this,b);return void 0!==c?this.entries_[c+1]:void 0},set:function(b,c){var d=e(b),f="string"==typeof b,g=a(this,b);if(void 0!==g)this.entries_[g+1]=c;else if(g=this.entries_.length,this.entries_[g]=b,this.entries_[g+1]=c,d){var i=h(b),j=i.hash;this.objectIndex_[j]=g}else f?this.stringIndex_[b]=g:this.primitiveIndex_[b]=g;return this},has:function(b){return void 0!==a(this,b)},"delete":function(a){var b,c,d=e(a),f="string"==typeof a;if(d){var g=h(a);g&&(b=this.objectIndex_[c=g.hash],delete this.objectIndex_[c])}else f?(b=this.stringIndex_[a],delete this.stringIndex_[a]):(b=this.primitiveIndex_[a],delete this.primitiveIndex_[a]);return void 0!==b?(this.entries_[b]=j,this.entries_[b+1]=void 0,this.deletedCount_++,!0):!1},clear:function(){b(this)},forEach:function(a){for(var b=arguments[1],c=0;c<this.entries_.length;c+=2){var d=this.entries_[c],e=this.entries_[c+1];d!==j&&a.call(b,e,d,this)}},entries:$traceurRuntime.initGeneratorFunction(function l(){var a,b,c;return $traceurRuntime.createGeneratorInstance(function(d){for(;;)switch(d.state){case 0:a=0,d.state=12;break;case 12:d.state=a<this.entries_.length?8:-2;break;case 4:a+=2,d.state=12;break;case 8:b=this.entries_[a],c=this.entries_[a+1],d.state=9;break;case 9:d.state=b===j?4:6;break;case 6:return d.state=2,[b,c];case 2:d.maybeThrow(),d.state=4;break;default:return d.end()}},l,this)}),keys:$traceurRuntime.initGeneratorFunction(function m(){var a,b,c;return $traceurRuntime.createGeneratorInstance(function(d){for(;;)switch(d.state){case 0:a=0,d.state=12;break;case 12:d.state=a<this.entries_.length?8:-2;break;case 4:a+=2,d.state=12;break;case 8:b=this.entries_[a],c=this.entries_[a+1],d.state=9;break;case 9:d.state=b===j?4:6;break;case 6:return d.state=2,b;case 2:d.maybeThrow(),d.state=4;break;default:return d.end()}},m,this)}),values:$traceurRuntime.initGeneratorFunction(function n(){var a,b,c;return $traceurRuntime.createGeneratorInstance(function(d){for(;;)switch(d.state){case 0:a=0,d.state=12;break;case 12:d.state=a<this.entries_.length?8:-2;break;case 4:a+=2,d.state=12;break;case 8:b=this.entries_[a],c=this.entries_[a+1],d.state=9;break;case 9:d.state=b===j?4:6;break;case 6:return d.state=2,c;case 2:d.maybeThrow(),d.state=4;break;default:return d.end()}},n,this)})},{}),Object.defineProperty(k.prototype,Symbol.iterator,{configurable:!0,writable:!0,value:k.prototype.entries}),g(c),{get Map(){return k},get polyfillMap(){return c}}}),System.get("traceur-runtime@0.0.87/src/runtime/polyfills/Map.js"),System.registerModule("traceur-runtime@0.0.87/src/runtime/polyfills/Set.js",[],function(){"use strict";function a(a){a.map_=new g}function b(a){var b=a,c=b.Object,d=b.Symbol;a.Set||(a.Set=i);var f=a.Set.prototype;f.values&&(e(f,f.values,d),e(c.getPrototypeOf((new a.Set).values()),function(){return this},d))}var c=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/utils.js"),d=c.isObject,e=c.maybeAddIterator,f=c.registerPolyfill,g=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/Map.js").Map,h=($traceurRuntime.getOwnHashObject,Object.prototype.hasOwnProperty),i=function(){var b=arguments[0];if(!d(this))throw new TypeError("Set called on incompatible type");if(h.call(this,"map_"))throw new TypeError("Set can not be reentrantly initialised");if(a(this),null!==b&&void 0!==b){var c=!0,e=!1,f=void 0;try{for(var g=void 0,i=b[$traceurRuntime.toProperty(Symbol.iterator)]();!(c=(g=i.next()).done);c=!0){var j=g.value;this.add(j)}}catch(k){e=!0,f=k}finally{try{c||null==i["return"]||i["return"]()}finally{if(e)throw f}}}};return $traceurRuntime.createClass(i,{get size(){return this.map_.size},has:function(a){return this.map_.has(a)},add:function(a){return this.map_.set(a,a),this},"delete":function(a){return this.map_["delete"](a)},clear:function(){return this.map_.clear()},forEach:function(a){var b=arguments[1],c=this;return this.map_.forEach(function(d,e){a.call(b,e,e,c)})},values:$traceurRuntime.initGeneratorFunction(function j(){var a,b;return $traceurRuntime.createGeneratorInstance(function(c){for(;;)switch(c.state){case 0:a=c.wrapYieldStar(this.map_.keys()[Symbol.iterator]()),c.sent=void 0,c.action="next",c.state=12;break;case 12:b=a[c.action](c.sentIgnoreThrow),c.state=9;break;case 9:c.state=b.done?3:2;break;case 3:c.sent=b.value,c.state=-2;break;case 2:return c.state=12,b.value;default:return c.end()}},j,this)}),entries:$traceurRuntime.initGeneratorFunction(function k(){var a,b;return $traceurRuntime.createGeneratorInstance(function(c){for(;;)switch(c.state){case 0:a=c.wrapYieldStar(this.map_.entries()[Symbol.iterator]()),c.sent=void 0,c.action="next",c.state=12;break;case 12:b=a[c.action](c.sentIgnoreThrow),c.state=9;break;case 9:c.state=b.done?3:2;break;case 3:c.sent=b.value,c.state=-2;break;case 2:return c.state=12,b.value;default:return c.end()}},k,this)})},{}),Object.defineProperty(i.prototype,Symbol.iterator,{configurable:!0,writable:!0,value:i.prototype.values}),Object.defineProperty(i.prototype,"keys",{configurable:!0,writable:!0,value:i.prototype.values}),f(b),{get Set(){return i},get polyfillSet(){return b}}}),System.get("traceur-runtime@0.0.87/src/runtime/polyfills/Set.js"),System.registerModule("traceur-runtime@0.0.87/node_modules/rsvp/lib/rsvp/asap.js",[],function(){"use strict";function a(a,b){m[h]=a,m[h+1]=b,h+=2,2===h&&g()}function b(){return function(){process.nextTick(f)}}function c(){var a=0,b=new k(f),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function d(){var a=new MessageChannel;return a.port1.onmessage=f,function(){a.port2.postMessage(0)}}function e(){return function(){setTimeout(f,1)}}function f(){for(var a=0;h>a;a+=2){var b=m[a],c=m[a+1];b(c),m[a]=void 0,m[a+1]=void 0}h=0}var g,h=0,i=a,j="undefined"!=typeof window?window:{},k=j.MutationObserver||j.WebKitMutationObserver,l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,m=new Array(1e3);return g="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?b():k?c():l?d():e(),{get default(){return i}}}),System.registerModule("traceur-runtime@0.0.87/src/runtime/polyfills/Promise.js",[],function(){"use strict";function a(a){return a&&"object"==typeof a&&void 0!==a.status_}function b(a){return a}function c(a){throw a}function d(a){var d=void 0!==arguments[1]?arguments[1]:b,f=void 0!==arguments[2]?arguments[2]:c,g=e(a.constructor);switch(a.status_){case void 0:throw TypeError;case 0:a.onResolve_.push(d,g),a.onReject_.push(f,g);break;case 1:k(a.value_,[d,g]);break;case-1:k(a.value_,[f,g])}return g.promise}function e(a){if(this===t){var b=g(new t(r));return{promise:b,resolve:function(a){h(b,a)},reject:function(a){i(b,a)}}}var c={};return c.promise=new a(function(a,b){c.resolve=a,c.reject=b}),c}function f(a,b,c,d,e){return a.status_=b,a.value_=c,a.onResolve_=d,a.onReject_=e,a}function g(a){return f(a,0,void 0,[],[])}function h(a,b){j(a,1,b,a.onResolve_)}function i(a,b){j(a,-1,b,a.onReject_)}function j(a,b,c,d){0===a.status_&&(k(c,d),f(a,b,c))}function k(a,b){p(function(){for(var c=0;c<b.length;c+=2)l(a,b[c],b[c+1])})}function l(b,c,e){try{var f=c(b);if(f===e.promise)throw new TypeError;a(f)?d(f,e.resolve,e.reject):e.resolve(f)}catch(g){try{e.reject(g)}catch(g){}}}function m(a){return a&&("object"==typeof a||"function"==typeof a)}function n(b,c){if(!a(c)&&m(c)){var d;try{d=c.then}catch(f){var g=u.call(b,f);return c[v]=g,g}if("function"==typeof d){var h=c[v];if(h)return h;var i=e(b);c[v]=i.promise;try{d.call(c,i.resolve,i.reject)}catch(f){i.reject(f)}return i.promise}}return c}function o(a){a.Promise||(a.Promise=s)}var p=System.get("traceur-runtime@0.0.87/node_modules/rsvp/lib/rsvp/asap.js")["default"],q=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/utils.js").registerPolyfill,r={},s=function(a){if(a!==r){if("function"!=typeof a)throw new TypeError;var b=g(this);try{a(function(a){h(b,a)},function(a){i(b,a)})}catch(c){i(b,c)}}};$traceurRuntime.createClass(s,{"catch":function(a){return this.then(void 0,a)},then:function(e,f){"function"!=typeof e&&(e=b),"function"!=typeof f&&(f=c);var g=this,h=this.constructor;return d(this,function(b){return b=n(h,b),b===g?f(new TypeError):a(b)?b.then(e,f):e(b)},f)}},{resolve:function(b){return this===t?a(b)?b:f(new t(r),1,b):new this(function(a){a(b)})},reject:function(a){return this===t?f(new t(r),-1,a):new this(function(b,c){c(a)})},all:function(a){var b=e(this),c=[];try{var d=function(a){return function(d){c[a]=d,0===--f&&b.resolve(c)}},f=0,g=0,h=!0,i=!1,j=void 0;try{for(var k=void 0,l=a[$traceurRuntime.toProperty(Symbol.iterator)]();!(h=(k=l.next()).done);h=!0){var m=k.value,n=d(g);this.resolve(m).then(n,function(a){b.reject(a)}),++g,++f}}catch(o){i=!0,j=o}finally{try{h||null==l["return"]||l["return"]()}finally{if(i)throw j}}0===f&&b.resolve(c)}catch(p){b.reject(p)}return b.promise},race:function(a){var b=e(this);try{for(var c=0;c<a.length;c++)this.resolve(a[c]).then(function(a){b.resolve(a)},function(a){b.reject(a)})}catch(d){b.reject(d)}return b.promise}});var t=s,u=t.reject,v="@@thenable";return q(o),{get Promise(){return s},get polyfillPromise(){return o}}}),System.get("traceur-runtime@0.0.87/src/runtime/polyfills/Promise.js"),System.registerModule("traceur-runtime@0.0.87/src/runtime/polyfills/StringIterator.js",[],function(){"use strict";function a(a){var b=String(a),c=Object.create(j.prototype);return c[f(h)]=b,c[f(i)]=0,c}var b,c=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/utils.js"),d=c.createIteratorResultObject,e=c.isObject,f=$traceurRuntime.toProperty,g=Object.prototype.hasOwnProperty,h=Symbol("iteratedString"),i=Symbol("stringIteratorNextIndex"),j=function(){};return $traceurRuntime.createClass(j,(b={},Object.defineProperty(b,"next",{value:function(){var a=this;if(!e(a)||!g.call(a,h))throw new TypeError("this must be a StringIterator object");var b=a[f(h)];if(void 0===b)return d(void 0,!0);var c=a[f(i)],j=b.length;if(c>=j)return a[f(h)]=void 0,d(void 0,!0);var k,l=b.charCodeAt(c);if(55296>l||l>56319||c+1===j)k=String.fromCharCode(l);else{var m=b.charCodeAt(c+1);k=56320>m||m>57343?String.fromCharCode(l):String.fromCharCode(l)+String.fromCharCode(m)}return a[f(i)]=c+k.length,d(k,!1)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(b,Symbol.iterator,{value:function(){return this},configurable:!0,enumerable:!0,writable:!0}),b),{}),{get createStringIterator(){return a}}}),System.registerModule("traceur-runtime@0.0.87/src/runtime/polyfills/String.js",[],function(){"use strict";function a(a){var b=String(this);if(null==this||"[object RegExp]"==o.call(a))throw TypeError();var c=b.length,d=String(a),e=(d.length,arguments.length>1?arguments[1]:void 0),f=e?Number(e):0;isNaN(f)&&(f=0);var g=Math.min(Math.max(f,0),c);return p.call(b,d,f)==g}function b(a){var b=String(this);if(null==this||"[object RegExp]"==o.call(a))throw TypeError();var c=b.length,d=String(a),e=d.length,f=c;if(arguments.length>1){var g=arguments[1];void 0!==g&&(f=g?Number(g):0,isNaN(f)&&(f=0))}var h=Math.min(Math.max(f,0),c),i=h-e;return 0>i?!1:q.call(b,d,i)==i}function c(a){if(null==this)throw TypeError();var b=String(this);if(a&&"[object RegExp]"==o.call(a))throw TypeError();var c=b.length,d=String(a),e=d.length,f=arguments.length>1?arguments[1]:void 0,g=f?Number(f):0;g!=g&&(g=0);var h=Math.min(Math.max(g,0),c);return e+h>c?!1:-1!=p.call(b,d,g)}function d(a){if(null==this)throw TypeError();var b=String(this),c=a?Number(a):0;if(isNaN(c)&&(c=0),0>c||c==1/0)throw RangeError();if(0==c)return"";for(var d="";c--;)d+=b;return d}function e(a){if(null==this)throw TypeError();var b=String(this),c=b.length,d=a?Number(a):0;if(isNaN(d)&&(d=0),0>d||d>=c)return void 0;var e,f=b.charCodeAt(d);return f>=55296&&56319>=f&&c>d+1&&(e=b.charCodeAt(d+1),e>=56320&&57343>=e)?1024*(f-55296)+e-56320+65536:f}function f(a){var b=a.raw,c=b.length>>>0;if(0===c)return"";for(var d="",e=0;;){if(d+=b[e],e+1===c)return d;d+=arguments[++e]}}function g(){var a,b,c=[],d=Math.floor,e=-1,f=arguments.length;if(!f)return"";for(;++e<f;){var g=Number(arguments[e]);if(!isFinite(g)||0>g||g>1114111||d(g)!=g)throw RangeError("Invalid code point: "+g);65535>=g?c.push(g):(g-=65536,a=(g>>10)+55296,b=g%1024+56320,c.push(a,b))}return String.fromCharCode.apply(null,c)}function h(){var a=$traceurRuntime.checkObjectCoercible(this),b=String(a);return j(b)}function i(i){var j=i.String;l(j.prototype,["codePointAt",e,"endsWith",b,"includes",c,"repeat",d,"startsWith",a]),l(j,["fromCodePoint",g,"raw",f]),m(j.prototype,h,Symbol)}var j=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/StringIterator.js").createStringIterator,k=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/utils.js"),l=k.maybeAddFunctions,m=k.maybeAddIterator,n=k.registerPolyfill,o=Object.prototype.toString,p=String.prototype.indexOf,q=String.prototype.lastIndexOf;return n(i),{get startsWith(){return a},get endsWith(){return b},get includes(){return c},get repeat(){return d},get codePointAt(){return e},get raw(){return f},get fromCodePoint(){return g},get stringPrototypeIterator(){return h},get polyfillString(){return i}}}),System.get("traceur-runtime@0.0.87/src/runtime/polyfills/String.js"),System.registerModule("traceur-runtime@0.0.87/src/runtime/polyfills/ArrayIterator.js",[],function(){"use strict";function a(a,b){var c=g(a),d=new m;return d.iteratorObject_=c,d.arrayIteratorNextIndex_=0,d.arrayIterationKind_=b,d}function b(){return a(this,l)}function c(){return a(this,j)}function d(){return a(this,k)}var e,f=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/utils.js"),g=f.toObject,h=f.toUint32,i=f.createIteratorResultObject,j=1,k=2,l=3,m=function(){};return $traceurRuntime.createClass(m,(e={},Object.defineProperty(e,"next",{value:function(){var a=g(this),b=a.iteratorObject_;if(!b)throw new TypeError("Object is not an ArrayIterator");var c=a.arrayIteratorNextIndex_,d=a.arrayIterationKind_,e=h(b.length);return c>=e?(a.arrayIteratorNextIndex_=1/0,i(void 0,!0)):(a.arrayIteratorNextIndex_=c+1,d==k?i(b[c],!1):d==l?i([c,b[c]],!1):i(c,!1))},configurable:!0,enumerable:!0,writable:!0}),
Object.defineProperty(e,Symbol.iterator,{value:function(){return this},configurable:!0,enumerable:!0,writable:!0}),e),{}),{get entries(){return b},get keys(){return c},get values(){return d}}}),System.registerModule("traceur-runtime@0.0.87/src/runtime/polyfills/Array.js",[],function(){"use strict";function a(a){var b,c,d=arguments[1],e=arguments[2],f=this,g=u(a),h=void 0!==d,i=0;if(h&&!n(d))throw TypeError();if(m(g)){b=o(f)?new f:[];var j=!0,k=!1,l=void 0;try{for(var p=void 0,q=g[$traceurRuntime.toProperty(Symbol.iterator)]();!(j=(p=q.next()).done);j=!0){var r=p.value;b[i]=h?d.call(e,r,i):r,i++}}catch(s){k=!0,l=s}finally{try{j||null==q["return"]||q["return"]()}finally{if(k)throw l}}return b.length=i,b}for(c=t(g.length),b=o(f)?new f(c):new Array(c);c>i;i++)b[i]=h?"undefined"==typeof e?d(g[i],i):d.call(e,g[i],i):g[i];return b.length=c,b}function b(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(var c=this,d=a.length,e=o(c)?new c(d):new Array(d),f=0;d>f;f++)e[f]=a[f];return e.length=d,e}function c(a){var b=void 0!==arguments[1]?arguments[1]:0,c=arguments[2],d=u(this),e=t(d.length),f=s(b),g=void 0!==c?s(c):e;for(f=0>f?Math.max(e+f,0):Math.min(f,e),g=0>g?Math.max(e+g,0):Math.min(g,e);g>f;)d[f]=a,f++;return d}function d(a){var b=arguments[1];return f(this,a,b)}function e(a){var b=arguments[1];return f(this,a,b,!0)}function f(a,b){var c=arguments[2],d=void 0!==arguments[3]?arguments[3]:!1,e=u(a),f=t(e.length);if(!n(b))throw TypeError();for(var g=0;f>g;g++){var h=e[g];if(b.call(c,h,g,e))return d?g:h}return d?-1:void 0}function g(f){var g=f,h=g.Array,l=g.Object,m=g.Symbol,n=k;m&&m.iterator&&h.prototype[m.iterator]&&(n=h.prototype[m.iterator]),p(h.prototype,["entries",i,"keys",j,"values",n,"fill",c,"find",d,"findIndex",e]),p(h,["from",a,"of",b]),q(h.prototype,n,m),q(l.getPrototypeOf([].values()),function(){return this},m)}var h=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/ArrayIterator.js"),i=h.entries,j=h.keys,k=h.values,l=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/utils.js"),m=l.checkIterable,n=l.isCallable,o=l.isConstructor,p=l.maybeAddFunctions,q=l.maybeAddIterator,r=l.registerPolyfill,s=l.toInteger,t=l.toLength,u=l.toObject;return r(g),{get from(){return a},get of(){return b},get fill(){return c},get find(){return d},get findIndex(){return e},get polyfillArray(){return g}}}),System.get("traceur-runtime@0.0.87/src/runtime/polyfills/Array.js"),System.registerModule("traceur-runtime@0.0.87/src/runtime/polyfills/Object.js",[],function(){"use strict";function a(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}function b(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d=null==c?[]:m(c),e=void 0,f=d.length;for(e=0;f>e;e++){var g=d[e];l(g)||(a[g]=c[g])}}return a}function c(a,b){var c,d,e=k(b),f=e.length;for(c=0;f>c;c++){var g=e[c];l(g)||(d=j(b,e[c]),i(a,e[c],d))}return a}function d(d){var e=d.Object;f(e,["assign",b,"is",a,"mixin",c])}var e=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/utils.js"),f=e.maybeAddFunctions,g=e.registerPolyfill,h=$traceurRuntime,i=h.defineProperty,j=h.getOwnPropertyDescriptor,k=h.getOwnPropertyNames,l=h.isPrivateName,m=h.keys;return g(d),{get is(){return a},get assign(){return b},get mixin(){return c},get polyfillObject(){return d}}}),System.get("traceur-runtime@0.0.87/src/runtime/polyfills/Object.js"),System.registerModule("traceur-runtime@0.0.87/src/runtime/polyfills/Number.js",[],function(){"use strict";function a(a){return g(a)&&m(a)}function b(b){return a(b)&&k(b)===b}function c(a){return g(a)&&n(a)}function d(b){if(a(b)){var c=k(b);if(c===b)return l(c)<=o}return!1}function e(e){var f=e.Number;h(f,["MAX_SAFE_INTEGER",o,"MIN_SAFE_INTEGER",p,"EPSILON",q]),i(f,["isFinite",a,"isInteger",b,"isNaN",c,"isSafeInteger",d])}var f=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/utils.js"),g=f.isNumber,h=f.maybeAddConsts,i=f.maybeAddFunctions,j=f.registerPolyfill,k=f.toInteger,l=Math.abs,m=isFinite,n=isNaN,o=Math.pow(2,53)-1,p=-Math.pow(2,53)+1,q=Math.pow(2,-52);return j(e),{get MAX_SAFE_INTEGER(){return o},get MIN_SAFE_INTEGER(){return p},get EPSILON(){return q},get isFinite(){return a},get isInteger(){return b},get isNaN(){return c},get isSafeInteger(){return d},get polyfillNumber(){return e}}}),System.get("traceur-runtime@0.0.87/src/runtime/polyfills/Number.js"),System.registerModule("traceur-runtime@0.0.87/src/runtime/polyfills/fround.js",[],function(){"use strict";function a(a,b,c){function d(a){var b=k(a),c=a-b;return.5>c?b:c>.5?b+1:b%2?b+1:b}var e,f,g,h,o,p,q,r=(1<<b-1)-1;for(a!==a?(f=(1<<b)-1,g=n(2,c-1),e=0):a===1/0||a===-(1/0)?(f=(1<<b)-1,g=0,e=0>a?1:0):0===a?(f=0,g=0,e=1/a===-(1/0)?1:0):(e=0>a,a=j(a),a>=n(2,1-r)?(f=m(k(l(a)/i),1023),g=d(a/n(2,f)*n(2,c)),g/n(2,c)>=2&&(f+=1,g=1),f>r?(f=(1<<b)-1,g=0):(f+=r,g-=n(2,c))):(f=0,g=d(a/n(2,1-r-c)))),o=[],h=c;h;h-=1)o.push(g%2?1:0),g=k(g/2);for(h=b;h;h-=1)o.push(f%2?1:0),f=k(f/2);for(o.push(e?1:0),o.reverse(),p=o.join(""),q=[];p.length;)q.push(parseInt(p.substring(0,8),2)),p=p.substring(8);return q}function b(a,b,c){var d,e,f,g,h,i,j,k,l=[];for(d=a.length;d;d-=1)for(f=a[d-1],e=8;e;e-=1)l.push(f%2?1:0),f>>=1;return l.reverse(),g=l.join(""),h=(1<<b-1)-1,i=parseInt(g.substring(0,1),2)?-1:1,j=parseInt(g.substring(1,1+b),2),k=parseInt(g.substring(1+b),2),j===(1<<b)-1?0!==k?0/0:i*(1/0):j>0?i*n(2,j-h)*(1+k/n(2,c)):0!==k?i*n(2,-(h-1))*(k/n(2,c)):0>i?-0:0}function c(a){return b(a,8,23)}function d(b){return a(b,8,23)}function e(a){return 0===a||!f(a)||g(a)?a:c(d(Number(a)))}var f=isFinite,g=isNaN,h=Math,i=h.LN2,j=h.abs,k=h.floor,l=h.log,m=h.min,n=h.pow;return{get fround(){return e}}}),System.registerModule("traceur-runtime@0.0.87/src/runtime/polyfills/Math.js",[],function(){"use strict";function a(a){if(a=x(+a),0==a)return 32;var b=0;return 0===(4294901760&a)&&(a<<=16,b+=16),0===(4278190080&a)&&(a<<=8,b+=8),0===(4026531840&a)&&(a<<=4,b+=4),0===(3221225472&a)&&(a<<=2,b+=2),0===(2147483648&a)&&(a<<=1,b+=1),b}function b(a,b){a=x(+a),b=x(+b);var c=a>>>16&65535,d=65535&a,e=b>>>16&65535,f=65535&b;return d*f+(c*f+d*e<<16>>>0)|0}function c(a){return a=+a,a>0?1:0>a?-1:a}function d(a){return.4342944819032518*F(a)}function e(a){return 1.4426950408889634*F(a)}function f(a){if(a=+a,-1>a||z(a))return 0/0;if(0===a||a===1/0)return a;if(-1===a)return-(1/0);var b=0,c=50;if(0>a||a>1)return F(1+a);for(var d=1;c>d;d++)d%2===0?b-=G(a,d)/d:b+=G(a,d)/d;return b}function g(a){return a=+a,a===-(1/0)?-1:y(a)&&0!==a?D(a)-1:a}function h(a){return a=+a,0===a?1:z(a)?0/0:y(a)?(0>a&&(a=-a),a>21?D(a)/2:(D(a)+D(-a))/2):1/0}function i(a){return a=+a,y(a)&&0!==a?(D(a)-D(-a))/2:a}function j(a){if(a=+a,0===a)return a;if(!y(a))return c(a);var b=D(a),d=D(-a);return(b-d)/(b+d)}function k(a){return a=+a,1>a?0/0:y(a)?F(a+H(a+1)*H(a-1)):a}function l(a){return a=+a,0!==a&&y(a)?a>0?F(a+H(a*a+1)):-F(-a+H(a*a+1)):a}function m(a){return a=+a,-1===a?-(1/0):1===a?1/0:0===a?a:z(a)||-1>a||a>1?0/0:.5*F((1+a)/(1-a))}function n(){for(var a=arguments.length,b=new Array(a),c=0,d=0;a>d;d++){var e=arguments[d];if(e=+e,e===1/0||e===-(1/0))return 1/0;e=B(e),e>c&&(c=e),b[d]=e}0===c&&(c=1);for(var f=0,g=0,d=0;a>d;d++){var e=b[d]/c,h=e*e-g,i=f+h;g=i-f-h,f=i}return H(f)*c}function o(a){return a=+a,a>0?E(a):0>a?C(a):a}function p(a){if(a=+a,0===a)return a;var b=0>a;b&&(a=-a);var c=G(a,1/3);return b?-c:c}function q(q){var s=q.Math;v(s,["acosh",k,"asinh",l,"atanh",m,"cbrt",p,"clz32",a,"cosh",h,"expm1",g,"fround",r,"hypot",n,"imul",b,"log10",d,"log1p",f,"log2",e,"sign",c,"sinh",i,"tanh",j,"trunc",o])}var r,s,t=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/fround.js").fround,u=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/utils.js"),v=u.maybeAddFunctions,w=u.registerPolyfill,x=u.toUint32,y=isFinite,z=isNaN,A=Math,B=A.abs,C=A.ceil,D=A.exp,E=A.floor,F=A.log,G=A.pow,H=A.sqrt;return"function"==typeof Float32Array?(s=new Float32Array(1),r=function(a){return s[0]=Number(a),s[0]}):r=t,w(q),{get clz32(){return a},get imul(){return b},get sign(){return c},get log10(){return d},get log2(){return e},get log1p(){return f},get expm1(){return g},get cosh(){return h},get sinh(){return i},get tanh(){return j},get acosh(){return k},get asinh(){return l},get atanh(){return m},get hypot(){return n},get trunc(){return o},get fround(){return r},get cbrt(){return p},get polyfillMath(){return q}}}),System.get("traceur-runtime@0.0.87/src/runtime/polyfills/Math.js"),System.registerModule("traceur-runtime@0.0.87/src/runtime/polyfills/polyfills.js",[],function(){"use strict";var a=System.get("traceur-runtime@0.0.87/src/runtime/polyfills/utils.js").polyfillAll;a(Reflect.global);var b=$traceurRuntime.setupGlobals;return $traceurRuntime.setupGlobals=function(c){b(c),a(c)},{}}),System.get("traceur-runtime@0.0.87/src/runtime/polyfills/polyfills.js"),function(){"use strict";window.angular&&angular.module("w69b.es6",[]),Array.prototype.find||(Array.prototype.find=function(a){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;d>f;f++)if(b=c[f],a.call(e,b,f,c))return b;return void 0}),Array.prototype.contains||Object.defineProperty(Array.prototype,"contains",{enumerable:!1,configurable:!0,writable:!0,value:function(a){if(void 0===this||null===this)throw new TypeError("Cannot convert this value to object");var b=Object(this),c=parseInt(b.length,10)||0;if(0===c)return!1;var d=parseInt(arguments[1],10)||0;if(d>=c)return!1;var e;for(d>=0?e=d:(e=c+d,0>e&&(e=0));c>e;){var f=b[e];if(a===f||a!==a&&f!==f)return!0;e++}return!1}}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(a,b){var c=this.toString();(void 0===b||b>c.length)&&(b=c.length),b-=a.length;var d=c.indexOf(a,b);return-1!==d&&d===b}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(a,b){return b=b||0,this.lastIndexOf(a,b)===b}}),angular.module("castifyExt.AppDev",["ngRoute","ngAnimate","castifyExt.commonConfig","castifyExt.ui.options","castifyExt.ui.bugs","castifyExt.ui.livepreview","w69b.ui.pageTitle","w69b.chromePersistentLogger","castifyExt.recorder","w69b.ui.inputs","w69b.ui.locationChange","castifyExt.ui.fileList","castifyExt.ui.fileDetail","castifyExt.topnav","castifyExt.licensing","castifyExt.ui.about","castifyExt.ui.searchHelp","castifyExt.userInfo","castifyExt.userInfo","castifyExt.ui.syncSetup","castifyExt.ui.syncAuthErrorRedirector","castifyExt.ui.welcome","castifyExt.authConfig","castifyExt.ui.fileEdit","ngMaterial"]).config(["$routeProvider",function(a){a.when("/options",{templateUrl:"components/castifyExt/ui/options/options.html",controller:"OptionsCtrl",pageTitle:"Options"}).when("/files",{templateUrl:"components/castifyExt/ui/file-list/files-list.html",controller:"FileListCtrl",pageTitle:"Your Screencasts"}).when("/files/:fileId",{templateUrl:"components/castifyExt/ui/file-detail/file-detail.html",controller:"FileDetailCtrl"}).when("/edit/:fileId",{templateUrl:"components/castifyExt/ui/file-edit/file-edit.html",controller:"FileEditCtrl"}).when("/bugs",{templateUrl:"components/castifyExt/ui/bugs/bug-report.html",controller:"BugReportCtrl",pageTitle:"Report a Bug"}).when("/credits",{templateUrl:"components/castifyExt/ui/about/credits.html",pageTitle:"Credits"}).when("/about",{templateUrl:"components/castifyExt/ui/about/about.html",pageTitle:"About"}).when("/welcome",{templateUrl:"components/castifyExt/ui/welcome/welcome.html",controller:"WelcomeCtrl",showTopNav:!1,pageTitle:"Welcome"}).when("/getting-started",{templateUrl:"components/castifyExt/ui/getting-started/getting-started.html",pageTitle:"Getting Started",showTopNav:!1}).when("/sync-setup",{templateUrl:"components/castifyExt/ui/sync-setup/sync-setup-view.html",controller:"DriveSyncSetupCtrl",pageTitle:"Google Drive Setup"}).when("/update-notice",{templateUrl:"components/castifyExt/ui/update-notice/update-notice.html",pageTitle:"Screencastify has been updated"}).when("/e2e-signin",{template:'<span id="sign-in-state">{{state}}</span>',controller:["signInService","$scope",function(a,b){b.state="not_signed_in",a.signIn(!1).then(function(){b.state="signed_in"})}]}).otherwise({redirectTo:"/files"})}]).config(["chromePersistentLoggerProvider","$locationProvider",function(a,b){b.html5Mode(!1),a.setStorageKey("app"),a.enableGlobalHandler(!0),a.install()}]).run(["licensing","userInfo",function(a,b){a.initialize(),b.initialize()}]),angular.module("castifyExt.App",["templates","castifyExt.AppDev"]),angular.module("castifyExt.ui.livepreview",["w69b.promiseTool","castifyExt.recorder"]).directive("cfLivePreviewCanvas",["recorder","$window",function(a,b){return{restrict:"EA",templateUrl:"components/castifyExt/ui/livepreview/livePreviewCanvas.html",replace:!0,scope:{},link:function(c,d,e){function f(a,b){var c=Math.min(b.width/a.width,b.height/a.height);return{width:a.width*c,height:a.height*c}}function g(a,b){return{width:a.width*b,height:a.height*b}}function h(a){return{width:a[0].videoWidth,height:a[0].videoHeight}}function i(){if(m.cam&&m.screen){var b=a.info.config.camPosition,c=d[0].getBoundingClientRect(),e=h(k);e=f(e,c);var i=h(l);i=f(i,g(e,o));var j=Math.floor((c.width-e.width)/2),n=Math.floor((c.height-e.height)/2),p={width:i.width+"px",height:i.height+"px"};switch(b){case"topLeft":p.top=n+"px",p.left=j+"px";break;case"topRight":p.top=n+"px",p.right=j+"px";break;case"bottomLeft":p.bottom=n+"px",p.left=j+"px";break;default:p.bottom=n+"px",p.right=j+"px"}l.css(p),l.removeClass("ng-hide")}else l.addClass("ng-hide")}var j=d.find("video"),k=j.eq(0),l=j.eq(1),m={cam:!1,screen:!1},n=angular.element(b),o=e.camSizeRatio||.3;l[0].volume=0,k[0].volume=0,l.bind("canplay",function(){m.cam=!0,i()}),k.bind("canplay",function(){m.screen=!0,i()}),c.$watch(function(){return a.info.videoUrl},function(a){k.attr("src",a)}),c.$watch(function(){return a.info.cameraUrl},function(a){l.attr("src",a)}),n.bind("resize",i),d.bind("$destroy",function(){n.unbind("resize",i)})}}}]).controller("LivePreviewCtrl",["$scope","recorder",function(a,b){a.recorder=b}]),angular.module("castifyExt.ui.micLevel",["w69b.webrtc","castifyExt.audioContextPool","castifyExt.appOptions","w69b.throttle","castifyExt.appOptions"]).factory("micLevelFactory",["webrtc","audioContextPool","$rootScope","appOptions","$q",function(a,b,c,d,e){function f(){function f(a){return function(){var b=arguments,c=e.defer();return(q||e.when())["finally"](function(){var d=a.apply(null,b);c.resolve(d)}),q=c.promise,q["finally"](function(){q=null}),c.promise}}function g(){var a=s.analyser;a&&(m||(m=new Uint8Array(a.frequencyBinCount)),a.getByteFrequencyData(m),t=-1)}function h(){t=Math.max.apply(null,m)/255}function i(a){if(p)throw Error();n=a,p=b.acquire();var c=p,d=c.createMediaStreamSource(a),e=c.createAnalyser(),f=c.createGain();f.gain.value=v,e.smoothingTimeConstant=.3,e.fftSize=32,e.minDecibels=-70,e.maxDecibels=-10;var h=c.createScriptProcessor(2048,2,1);h.onaudioprocess=g,d.connect(f),f.connect(e),e.connect(h),h.connect(c.destination),s.input=d,s.analyser=e,s.capture=h,s.gain=f}function j(){var b=!0;return o&&(b={mandatory:{sourceId:o}}),a.getUserMedia({audio:b,video:!1})}function k(){n&&n.stop(),n=null}function l(a){v=a,s.gain&&(s.gain.gain.value=a)}var m,n,o,p,q,r={},s={},t=0,u=0,v=1,w=angular.noop;return r.start=f(function(){var a=null;return u||(w=c.$watch(function(){return d.localValues.micGain},l),a=j().then(i)),++u,a}),r.setSourceId=f(function(a){return o=a,k(),s.input?j().then(function(a){s.input.disconnect(),s.input=p.createMediaStreamSource(a),s.input.connect(s.gain)}):void 0}),r.stop=f(function(){u&&!--u&&(angular.forEach(s,function(a){a.disconnect()}),s={},k(),t=0,b.release(p),p=null,w())}),r.getVolume=function(){return 0>t&&h(),t},r}return f}]).directive("cfMicLevel",["micLevelFactory","$window","$timeout",function(a,b,c){return{restrict:"E",replace:!0,scope:{sourceId:"=?"},template:'<canvas class="cf-mic-level"></canvas>',link:function(d,e,f){function g(){j.clearRect(0,0,i.width,i.height);var a;a=k?j.createLinearGradient(0,0,i.width,0):j.createLinearGradient(0,i.height,0,0),a.addColorStop(0,"#0f0"),a.addColorStop(.7,"#ff0"),a.addColorStop(1,"#f00"),j.fillStyle=a,k?j.fillRect(0,0,Math.round(h.getVolume()*i.width),i.height):j.fillRect(0,i.height,i.width,-Math.round(h.getVolume()*i.height)),l=b.requestAnimationFrame(g)}var h=a(),i=e[0],j=i.getContext("2d"),k=!1;f.$observe("orientation",function(a){k="horizontal"===a});var l;c(h.start,0),l=b.requestAnimationFrame(g),e.bind("$destroy",function(){b.cancelAnimationFrame(l),h.stop()}),d.$watch("sourceId",function(a){a&&h.setSourceId(a)})}}}]).directive("cfMicLevelSlider",["appOptions","throttle","$window",function(a,b,c){return{restrict:"E",replace:!0,scope:{},templateUrl:"components/castifyExt/ui/mic-level/mic-level-slider.html",link:function(d){function e(){f.flush()}var f=b(a.saveLocal.bind(a),1e3),g=angular.element(c);d.$watch("micGainRange",function(b){b&&(b=Math.exp(Number(b)),a.localValues.micGain=b,f())}),a.loadedPromise.then(function(){var b=a.localValues.micGain;b=Math.log(b),d.micGainRange=b}),g.bind("unload",e),d.$on("$destroy",function(){g.unbind("unload",e),e()})}}}]),angular.module("castifyExt.appOptions",["w69b.chromeStorage","castifyExt.enterprisePolicy"]).factory("appOptions",["chromeStorage","$rootScope","$q","enterprisePolicy",function(a,b,c,d){var e={notifyAudio:!0,notifyFramerate:!1,notifyTabFocus:!0,uploadPrivacy:"public",autoOpen:!0,driveSync:!1,enableDiskSpaceWatcher:!0,notifySyncProgress:!0,notifyEditProgress:!0},f={micGain:1},g=!1,h={},i=angular.copy(e);return h.localValues=angular.copy(f),h.loadedPromise=c.all({sync:a.sync.getSingle("options"),local:a.local.getSingle("options"),managed:d.loadedPromise}).then(function(a){angular.extend(i,a.sync),angular.extend(h.localValues,a.local),g=!0}),h.values={},Object.keys(e).forEach(function(a){Object.defineProperty(h.values,a,{enumerable:!0,get:function(){return d.options&&d.options.hasOwnProperty(a)?d.options[a]:i[a]},set:function(b){i[a]=b}})}),h.save=function(){return a.sync.setSingle("options",i)},h.saveLocal=function(){return a.local.setSingle("options",h.localValues)},h.isLoaded=function(){return g},h.isSetByEnterprisePolicy=function(a){return d.options&&d.options.hasOwnProperty(a)},a.onChanged.addListener(function(a,c){"sync"==c&&a.options&&(angular.extend(i,a.options.newValue),b.$$phase||b.$digest()),"local"==c&&a.options&&(angular.extend(h.localValues,a.options.newValue),b.$$phase||b.$digest())}),h}]),angular.module("castifyExt.backgroundTool",["w69b.chromeRuntime"]).factory("backgroundTool",["chromeRuntime","$q","$log","$rootScope",function(a,b,c,d){function e(){var d=b.defer();return a.onMessage.addListener(function e(b){"bg:loaded"===b&&(a.onMessage.removeListener(e),d.resolve())}),a.sendMessage("bg:load")["catch"](function(){c.error("could not send load message")}),d.promise}var f,g={};return g.portHelper=function(c,f){var g,h={};return h.getPort=function(){var d=f===!1?b.when():e();return d.then(function(){return g||(g=a.connect({name:c})),g})},h.postMessage=function(a,b){return h.getPort().then(function(c){return c.postMessage({type:a,data:b})})},h.installHandlers=function(a){function b(b){a.hasOwnProperty(b.type)&&a[b.type](b.data),d.$$phase||d.$apply()}function c(){h.getPort().then(function(a){a.onMessage.removeListener(b)})}return h.getPort().then(function(a){a.onMessage.addListener(b)}),c},h},g.loadBackground=function(){return f||(f=e()),f},g}]),angular.module("castifyExt.recorder",["castifyExt.backgroundTool"]).factory("recorder",["backgroundTool",function(a){var b=a.portHelper("recorder"),c={};c.info={};var d={};return d.stateUpdate=function(a){angular.copy(a,c.info)},b.installHandlers(d),c.start=function(a){b.postMessage("start",a)},c.stop=function(){b.postMessage("stop")},c.pause=function(){b.postMessage("pause")},c.resume=function(){b.postMessage("resume")},c.replaceStream=function(a){b.postMessage("replaceStream",a)},c.showPreview=function(a){b.postMessage("showPreview",a)},b.getPort(),c}]),angular.module("castifyExt.audioContextPool",[]).factory("audioContextPool",["$window",function(a){var b=[],c={};return c.acquire=function(){return b.length?b.pop():new a.AudioContext},c.release=function(a){b.push(a)},c}]),angular.module("castifyExt.ui.bugs",["w69b.chromePersistentLogger","w69b.chromeRuntime","ui.bootstrap","castifyExt.licensing","castifyExt.userInfo"]).controller("BugReportCtrl",["$scope","chromePersistentLogger","chromeRuntime","$http","$location","licensing","userInfo",function(a,b,c,d,e,f,g){function h(){return b.getMergedLogs(["popup","background","app"])}var i="https://screencastify.uservoice.com/api/v1/tickets.json",j={oauth_consumer_key:"1Yb6N1ZB261nNDA1sVuBtA"};c.sendMessage(null,"bg:flushLogs",{}).then(h,h).then(function(b){a.logs=b.join("\n")}),a.$watch(g.getMe,function(b){!a.email&&b&&(a.email=b.email)}),a.attachLogs=!0,a.sending=!1,a.submitted=!1,e.search().msg&&(a.message=e.search().msg),a.messagePlaceholder=["Please describe the issue (required):","- Steps to reproduce the problem. If you cannot reproduce it, what did you do just before the problem appeared?","- What is the expected behaviour?","- What went wrong?"].join("\n"),a.submit=function(){a.sending=!0,a.showError=!1;var b={email:a.email,ticket:{subject:"Bug Report [Tool]",message:a.message,custom_field_values:{version:f.getVersionName()}}};a.attachLogs&&(b.ticket.attachments=[{name:"logs",data:btoa(unescape(encodeURIComponent(a.logs))),content_type:"text/plain"}]),d.post(i,b,{params:j}).success(function(){a.submitted=!0}).error(function(){a.showError=!0})["finally"](function(){a.sending=!1})}}]),angular.module("castifyExt.ui.fileList",["castifyExt.fileDbClient","w69b.analytics","w69b.ui.dropdown","castifyExt.ui.fileActions","w69b.ui.bytesFilter","castifyExt.ui.editableText","w69b.ui.bgImg","castifyExt.fileDbClient","castifyExt.ui.fileSyncInfo","castifyExt.ui.syncInfo","castifyExt.ui.editJobsInfo"]).controller("FileListCtrl",["$scope","fileDbClient","simpleDialog",function(a,b,c){a.loading=!0,b.listFiles().then(function(b){a.$watchCollection(function(){return b},function(){var c=a.files||[];c.length=0,angular.forEach(b,function(a){c.push(a)}),a.files=c})},function(){a.error=!0})["finally"](function(){a.loading=!1}),a.removeAll=function(){var a;a=b.isSyncEnabled()?"Deleting will remove all Screencasts from your device and also from your Drive account.":"Deleting will remove all Screencasts from your device. This cannot be undone.",c.confirm("Delete all Screencasts?",a,"Delete All").then(function(){b.removeAll()})}}]).directive("cfFileItem",function(){return{restrict:"E",templateUrl:"components/castifyExt/ui/file-list/file-item.html",scope:{file:"="},link:function(a){a.item={isRenaming:!1},a.editTitle=function(b){b.preventDefault(),a.item.isRenaming=!0}}}}),angular.module("castifyExt.ui.fileDetail",["castifyExt.fileDbClient","castifyExt.ui.editableText","castifyExt.ui.fileActions","w69b.ui.focus","ui.bootstrap","castifyExt.ui.uploadDialog","castifyExt.ui.pixelResolution","w69b.timeutil","w69b.ui.simpleDialog","castifyExt.ui.disableContextmenu","castifyExt.ui.uploadInfo","castifyExt.ui.fileSyncInfo","castifyExt.ui.videoPlayer","castifyExt.enterprisePolicy","castifyEdit.editJobSchedulerClient","castifyExt.upgradeHelper"]).controller("FileDetailCtrl",["$scope","$routeParams","fileDbClient","$location","$modal","enterprisePolicy","editJobSchedulerClient","upgradeHelper",function(a,b,c,d,e,f,g,h){var i={width:640,height:480},j=723517440;a.enterprisePolicy=f,a.file=null,a.item={isRenaming:!1},a.upgradeHelper=h,c.getFileDescriptor(b.fileId).then(function(b){a.file=b,a.$root.pageTitle=b.title})["catch"](function(){d.path("/files")}),a.showShareDialog=function(){var b=a.$new(!0);b.file=a.file;e.open({scope:b,templateUrl:"components/castifyExt/ui/share/share-dialog.html",controller:"ShareDialogCtrl"})},a.$watch("file.deleted",function(a){a&&d.path("/files")}),a.editTitle=function(b){b.preventDefault(),a.item.isRenaming=!0},a.canExportGif=function(){var b=a.file;if(!b||!b.width||!b.height)return!0;var c=8,d=Math.min(1,i.width/b.width,i.height/b.height),e=5*d*b.width*d*b.height*c*b.duration;return j>e},a.exportGif=function(){if(h.isPaid()){var b={meta:{fileId:a.file.id},scale:i,outFormat:"gif"};g.clearComplete(),g.addJob(b),d.path("/files/")}}}]),angular.module("castifyExt.ui.syncInfo",["castifyExt.syncStatusClient","castifyExt.ui.syncProgressIcon"]).directive("cfSyncInfo",["syncStatusClient",function(a){return{restrict:"E",scope:{},templateUrl:"components/castifyExt/ui/sync-info/sync-info.html",link:function(b){b.state=a.state,b.retry=function(){a.retry()}}}}]),angular.module("castifyExt.ui.options",["castifyExt.appOptions","w69b.chromeTabs","castifyExt.ui.micLevel","w69b.throttle","castifyExt.ui.policyHint"]).controller("OptionsCtrl",["$scope","appOptions","throttle","$window",function(a,b,c,d){function e(){f.flush()}a.opt=b.values,a.optLocal=b.localValues,a.$watch("opt",function(a,c){angular.equals(a,c)||(b.values=a,b.save())},!0);var f=c(b.saveLocal.bind(b),1e3);a.$watch("optLocal",function(a,c){angular.equals(a,c)||(b.localValues=a,f())},!0),d.addEventListener("unload",e),a.$on("$destroy",function(){d.removeEventListener("unload",e),e()})}]).directive("cfStorageOption",function(){return{restrict:"E",templateUrl:"components/castifyExt/ui/options/storage-option.html",scope:{ngModel:"="}}}),angular.module("castifyExt.ui.editableText",[]).directive("editableText",["$timeout",function(a){return{restrict:"EA",template:'<div><div data-ng-hide="isEditing" data-ng-transclude></div><input type="text" class="editable-text-input" data-ng-show="isEditing"/></div>',scope:{text:"=editableText",isEditing:"=",onRenamed:"&"},transclude:!0,link:function(b,c){function d(){var a=g.val();b.isEditing=!1,b.onRenamed({newText:a}),e(),b.$apply()}function e(){b.isEditing=!1,g.unbind("blur keydown"),b.$apply()}function f(){g.bind("blur",d),g.bind("keydown",function(a){switch(a.keyCode){case 13:d();break;case 27:e()}})}var g=c.find("input");b.$watch("isEditing",function(c){c&&(g.val(b.text),a(function(){g[0].select()}),f())})}}}]),angular.module("castifyExt.ui.fileActions",["castifyExt.fileDbClient","w69b.analytics","castifyExt.appOptions","w69b.ui.simpleDialog"]).controller("FileActionsCtrl",["$scope","fileDbClient","$window","analytics","simpleDialog",function(a,b,c,d,e){this.rename=function(a,c){c=c.trim(),c&&(b.rename(a.id,c),d.trackEvent("file","rename","list"))},this.remove=function(a){var c;return c=b.isSyncEnabled()?'Deleting will remove "'+a.title+'" from your device and also from your Drive account.':'Deleting will remove "'+a.title+'" from your device.',e.confirm("Delete Screencast?",c,"Delete").then(function(){b.remove(a.id),d.trackEvent("files","remove")})}}]).directive("cfSaveFileButton",["fileDbClient",function(a){return{restrict:"E",replace:!0,transclude:!0,template:'<button class="save-file-button" ng-disabled="loading" ng-class="{\'loading-overlay\': loading}" ng-transclude></button>',scope:{file:"=?"},link:function(b,c){b.loading=!1,c.bind("click",function(){var c=b.file;c&&(b.loading=!0,a.reload(c.id).then(function(){return c.getUrl()}).then(function(a){var b=angular.element("<a></a>"),d=c.title.replace(/[\/,\\]/g,"");/\.webm$/i.test(d)||(d+=".webm"),b.attr("href",a),b.attr("download",d),b[0].dispatchEvent(new MouseEvent("click"))})["finally"](function(){b.loading=!1}),b.$apply())})}}}]),angular.module("castifyExt.ui.uploadDialog",["w69b.analytics","w69b.chromeStorage","castifyExt.uploader","castifyExt.youtubeUtils","castifyExt.driveUtils","castifyExt.castifyAuth","castifyExt.ui.youtubeChannelChooser","castifyExt.youtubeAuth"]).controller("ShareDialogCtrl",["$scope","chromeStorage","uploader","youtubeUtils","driveUtils","$q","castifyAuth","$log","youtubeAuth",function(a,b,c,d,e,f,g,h){function i(){var c=a.options;return b.local.setSingle("uploadOptions",{target:c.target,privacy:c.privacy,youtubeChannelId:c.youtubeChannelId})}function j(){var b=a.file,c=o,g=[];c.drive.uploaded=!1,c.youtube.uploaded=!1,b.driveInfo&&g.push(e.getSimplePrivacy(b.driveInfo.id).then(function(a){c.drive.uploaded=!0,c.drive.privacy=a}));var h=a.options.youtubeChannelId;return b.youtubeInfo&&h&&g.push(d.getPrivacy(b.youtubeInfo.id,h).then(function(a){c.youtube.uploaded=!0,c.youtube.privacy=a})),f.all(g)}function k(b){return a.loading=!0,b["finally"](function(){a.loading=!1}),b}function l(){var b=a.options.target,c=a.options.privacy,f=a.file;if("youtube"===b)return d.setPrivacy(f.youtubeInfo.id,c,a.options.youtubeChannelId);if("drive"===b)return e.setSimplePrivacy(f.driveInfo.id,c);throw new Error("unknown target")}function m(){a.$watch(function(){return c.isQueuedOrActive(a.file.id,"youtube")},function(a,b){o.youtube.uploading=a,b&&!a&&k(j())}),a.$watch(function(){return c.isQueuedOrActive(a.file.id,"drive")},function(a,b){o.drive.uploading=a,b&&!a&&k(j())}),a.$watch("options.youtubeChannelId",function(){k(j())}),a.$watch(function(){var b=a.options.target;return{target:b,status:o[b]}},function(){var b=a.options.target,c=o[b];a.fileStatus=c,a.options.privacy=c.uploaded?c.privacy:n},!0)}a.options={youtubeChannelId:null},a.saveError=!1;var n,o={drive:{},youtube:{}};b.local.getSingle("uploadOptions").then(function(b){b=b||{target:"youtube",privacy:"public"},a.options.target=b.target,a.options.youtubeChannelId=b.youtubeChannelId,n=b.privacy,m()}),a.upload=function(){var b=a.options;i();var d,e={fileId:a.file.id,target:b.target,title:a.file.title,privacy:b.privacy};"youtube"===b.target?(d=f.when(),e.channelId=b.youtubeChannelId):d=g.getAuthToken({interactive:!0}),k(d),d.then(function(){c.upload(e),a.$close(!0)})},a.save=function(){a.saveError=!1;a.options.target,a.options.privacy;i();var b=l();k(b),b.then(function(){a.$close(!0)},function(b){h.warn("failed to set privacy",b),a.saveError=!0})},a.isValid=function(){var b=a.options;return!a.loading&&("youtube"!==b.target||b.youtubeChannelId)}}]),angular.module("castifyExt.ui.pixelResolution",[]).directive("pixelResolution",function(){return{template:"<span>{{resolution.width}}x{{resolution.height}}</span>",restrict:"A",scope:{resolution:"=pixelResolution"}}}),angular.module("castifyExt.topnav",["ngRoute","castifyExt.ui.appMenu","castifyExt.userInfo","castifyExt.licensing"]).controller("TopnavCtrl",["$scope","$route","userInfo","licensing",function(a,b,c,d){a.$on("$routeChangeSuccess",function(){a.showTopNav=b.current.showTopNav!==!1}),a.userInfo=c,a.licensing=d}]).directive("cfTopnav",function(){return{restrict:"E",scope:{},templateUrl:"components/castifyExt/ui/topnav/topnav.html",controller:"TopnavCtrl"}}),angular.module("castifyExt.ui.about",[]).directive("cfCredit",function(){return{restrict:"E",templateUrl:"components/castifyExt/ui/about/credit.html",scope:{url:"@",title:"@"},transclude:!0}}),angular.module("castifyExt.ui.searchHelp",[]).directive("cfSearchHelp",["chromeTabs",function(a){var b="https://screencastify.uservoice.com/knowledgebase/articles/all";return{link:function(c,d,e){d.bind("click",function(c){var d=b;e.cfSearchHelp&&(d+="?query="+encodeURIComponent(e.cfSearchHelp)),a.create({url:d}),c.preventDefault()})}}}]),angular.module("castifyExt.ui.appMenu",["castifyExt.licensing"]).directive("cfAppMenu",["licensing",function(a){return{restrict:"EA",replace:!0,templateUrl:"components/castifyExt/ui/app-menu/app-menu.html",link:function(b){b.licensing=a}}}]),angular.module("castifyExt.ui.disableContextmenu",[]).directive("disableContextmenu",function(){return{link:function(a,b){b.bind("contextmenu",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("castifyExt.ui.fileSyncInfo",["castifyExt.fileDbClient"]).controller("FileSyncInfoCtrl",["$scope","fileDbClient","uploader",function(a,b,c){function d(){var d=a.file;if(!d)return null;if(!b.isSyncEnabled())return{state:"disabled"};if(d.isSynced)return{state:"synced"};var e=c.getTargetState(d.id,"drive");
return e?{state:e.state,progress:e.progress}:{state:"queued"}}a.$watch(d,function(b){a.syncInfo=b},!0)}]).directive("cfFileSyncIcon",function(){return{restrict:"E",replace:!0,templateUrl:"components/castifyExt/ui/file-sync-info/file-sync-icon.html",scope:{file:"="},controller:"FileSyncInfoCtrl"}}).directive("cfFileSyncInfo",function(){return{restrict:"E",replace:!0,templateUrl:"components/castifyExt/ui/file-sync-info/file-sync-info.html",scope:{file:"="},controller:"FileSyncInfoCtrl"}}),angular.module("castifyExt.ui.uploadInfo",["castifyExt.uploader"]).directive("uploadInfo",function(){return{restrict:"E",templateUrl:"components/castifyExt/ui/upload-info/upload-info.html",replace:!0,scope:{file:"="},controller:"UploadInfoCtrl"}}).controller("UploadInfoCtrl",["$scope","uploader",function(a,b){a.getHumanTargetName=function(a){return{drive:"Google Drive",youtube:"Youtube"}[a]},a.$watch(function(){return a.file?b.getFileState(a.file.id):null},function(b){a.uploads=b?b:null})}]),angular.module("castifyExt.ui.syncSetup",["castifyExt.castifyAuth","castifyExt.fileDbClient","castifyExt.syncAuthTool"]).directive("cfSyncSetupAuthPrompt",["castifyAuth","chromeRuntime","$log",function(a,b,c){return{restrict:"E",templateUrl:"components/castifyExt/ui/sync-setup/sync-setup-auth-prompt.html",scope:{authGranted:"&"},link:function(d){d.dialogShown=!1,d.grantAuth=function(){d.dialogShown=!0,a.getAuthToken({interactive:!0}).then(function(){b.sendMessage({type:"event:syncSetupComplete"}),d.authGranted()},function(a){c.warn("sync setup getToken error",a)})["finally"](function(){d.dialogShown=!1})}}}}]).controller("DriveSyncSetupCtrl",["$scope","fileDbClient","castifyAuth","syncAuthTool",function(a,b,c,d){a.state="loading",a.$watch(b.isSyncEnabled,function(b){b?d.hasValidAuthToken().then(function(){a.onAuthGranted()},function(){a.state="authMissing"}):a.state="disabled"}),a.onAuthGranted=function(){a.state="complete"}}]),angular.module("castifyExt.ui.syncAuthErrorRedirector",["castifyExt.chromeEventPublisher"]).directive("cfSyncAuthErrorRedirector",["$location",function(a){var b="/sync-setup";return{restrict:"EA",link:function(c){c.$on("event:syncAuthError",function(){a.path()!==b&&a.path(b)})}}}]),angular.module("castifyExt.ui.videoPlayer",["castifyExt.castifyAuth","castifyExt.fileDbClient"]).directive("cfVideoPlayer",["$q","$document","$log",function(a,b){return{restrict:"E",replace:!1,templateUrl:"components/castifyExt/ui/video-player/video-player.html",scope:{file:"=?"},link:function(a,c){function d(){g.paused?g.play():g.pause()}function e(a){32===a.which&&a.target===i&&(d(),a.preventDefault())}var f=c.find("video"),g=f[0],h=0;a.loading=!0,f.bind("canplay",function(){a.loading=!1,a.$digest()}),f.bind("loadedmetadata",function(){g.currentTime!==h&&(g.currentTime=h)}),f.bind("loadstart seeking",function(){a.loading=!0,a.$digest()}),f.bind("timeupdate",function(){a.loading||(h=g.currentTime)});var i=b.find("body")[0];c.bind("click",d),b.bind("keydown",e),a.$on("$destroy",function(){b.unbind("keydown",e)})}}}]).directive("cfVideoLoad",["fileDbClient","$log",function(a,b){return{restrict:"A",scope:{file:"=cfVideoLoad"},link:function(c,d){var e=d[0];c.$watchGroup(["file.url","file.urlRequiresAccessToken"],function(){c.loading=!0,c.file&&c.file.getUrl().then(function(a){e.src=a})}),d.bind("error",function(d){b.warn("video playback error",d.target.error),a.reload(c.file.id),c.$apply()})}}}]),angular.module("castifyExt.ui.welcome",["w69b.chromeRuntime","castifyExt.requestMicPermission","castifyExt.castifyAuth","castifyExt.syncAuthTool","castifyExt.castifyAuth","castifyExt.appOptions","castifyExt.ui.syncSetup","castifyExt.ui.options","castifyExt.ui.policyHint"]).controller("WelcomeCtrl",["$scope","chromeRuntime","$log","requestMicPermission","syncAuthTool","castifyAuth","appOptions",function(a,b,c,d,e,f,g){function h(){b.sendMessage(null,"bg:hasCamAccess",{}).then(function(a){c.debug("setup state of cam is ",a),i.cam=a}),e.hasValidAuthToken().then(function(){i.signIn=!0},function(){i.signIn=!1})}var i={cam:null,signIn:null};a.setupState=i,a.setupCam=function(){d().then(function(){i.cam=!0},function(){i.cam=!1})},a.appOptions=g,a.$watch(function(){return g.values.driveSync},function(b){a.driveSync=b}),a.$watchGroup(["driveSync","setupState.signIn"],function(b,c){angular.equals(b,c)||g.values.driveSync===a.driveSync||a.setupState.signIn&&(g.values.driveSync=a.driveSync,g.save())}),a.$watch("!appOptions.isLoaded() || setupState.cam == null || setupState.signIn == null",function(b){a.loading=b}),a.$watch("setupState.cam && (!driveSync || setupState.signIn)",function(b){a.setupComplete=b}),a.onSignedIn=function(){i.signIn=!0},h()}]),angular.module("castifyExt.ui.syncProgressIcon",[]).directive("cfSyncProgressIcon",function(){return{replace:!0,restrict:"E",templateUrl:"components/castifyExt/ui/sync-progress-icon/sync-progress-icon.html",scope:{progress:"=value"}}}),angular.module("castifyExt.ui.youtubeChannelChooser",["castifyExt.youtubeAuth"]).directive("cfYoutubeChannelChooser",["youtubeAuth",function(a){return{restrict:"E",replace:!0,require:"ngModel",templateUrl:"components/castifyExt/ui/youtube-channel-chooser/youtube-channel-chooser.html",scope:{},link:function(b,c,d,e){function f(){var a=(b.channels||[]).filter(function(a){return a.id===e.$viewValue});b.selected=a.length?a[0]:i}function g(a){return b.loading=!0,a["finally"](function(){b.loading=!1}),a}function h(){return a.listChannels().then(function(a){b.channels=a})}var i={title:"Please Select",id:null};e.$render=f,b.select=function(a){b.selected=a,e.$setViewValue(a.id)},b.remove=function(c,d){b.channels.splice(b.channels.indexOf(c),1),a.removeChannel(c.id),d.stopPropagation(),d.preventDefault()},b.openOrAdd=function(a){b.channels.length?b.isDropdownOpen=!0:b.addChannel(),a.stopPropagation(),a.preventDefault()},b.addChannel=function(){var c=a.addChannel().then(function(a){return b.select(a),h()});g(c)},b.$watchCollection("channels",f),b.channels=[],b.loading=!1,b.isDropdownOpen=!1,g(h())}}}]),angular.module("castifyExt.ui.policyHint",["castifyExt.appOptions"]).directive("cfPolicyHint",["appOptions",function(a){return{restrict:"E",replace:!0,scope:{},templateUrl:"components/castifyExt/ui/policy-hint/policy-hint.html",link:function(b,c,d){b.$watch(function(){return a.isSetByEnterprisePolicy(d.key)},function(a){b.show=a})}}}]),angular.module("castifyEdit.ui.trimSlider",["ngMaterial"]).directive("cfTrimSlider",function(){return{restrict:"E",scope:{start:"=",end:"=",max:"@"},templateUrl:"components/castifyEdit/ui/trim-slider/trim-slider.html",link:function(a){a.$watchGroup(["start","end"],function(){var b=parseFloat(a.max),c=a.start,d=a.end;a.start=Math.min(c,Math.max(d-1,0)),a.end=Math.max(Math.min(c+1,b),d)})}}}),angular.module("castifyEdit.ui.timeLine",["castifyEdit.ui.trimSlider"]).directive("cf-time-ticks",function(){return{restrict:"E",require:["cfTimeTicks","cfTimeLine"],controller:"TimeTicksCtrl",scope:{},link:function(){}}}).directive("cfTimeLine",function(){return{restrict:"E",priority:-1e3,templateUrl:"components/castifyEdit/ui/time-line/time-line.html",scope:{config:"="},controller:["$element","$scope",function(a,b){this.init=function(){var c=a[0],d=c.querySelector(".scroll-container"),e=d.getBoundingClientRect();this.scrollToCenter=function(a){d.scrollLeft=a.offsetLeft-e.width/2},b.zoom=1,b.$watch("zoom",function(a){b.scrollWidth=e.width*a})}}],link:function(a,b,c,d){d.init()}}}),angular.module("castifyEdit.ui.videoEditor",["castifyEdit.ui.videoCanvas","castifyEdit.ui.cropCanvas","castifyEdit.ui.videoControls","castifyExt.ui.videoPlayer","castifyExt.upgradeHelper"]).directive("cfVideoEditor",["$mdToast","upgradeHelper",function(a,b){return{restrict:"E",templateUrl:"components/castifyEdit/ui/video-editor.html",scope:{file:"=cfFile",cfCancel:"&",cfSave:"&"},link:function(c){c.config={meta:{copy:!0}};var d=a.simple().content("Move and resize the box to crop your video.").position("top right").hideDelay(0).action("Got it");d._options.parent="cf-video-editor",a.show(d),c.upgradeHelper=b}}}]),angular.module("castifyEdit.ui.videoCanvas",[]).directive("cfVideoCanvas",["$window",function(a){return{restrict:"E",transclude:!0,controller:["$scope","$element",function(b,c){this.init=function(){function d(a,b){var c=Math.min(b.width/a.width,b.height/a.height);return{width:a.width*c,height:a.height*c}}function e(a){return a&&a.videoWidth?{width:a.videoWidth,height:a.videoHeight}:null}function f(a,b){if(!a)return null;var c={};return["width","height","top","left"].forEach(function(d){a.hasOwnProperty(d)&&(c[d]=a[d]*b)}),c}function g(){if(h=e(k[0])){var a=i[0].getBoundingClientRect(),c=d(h,a);j=c.width/h.width;var f=Math.floor((a.width-c.width)/2),g=Math.floor((a.height-c.height)/2),l={width:c.width+"px",height:c.height+"px",top:g+"px",left:f+"px",position:"absolute"};k.css(l);var m=i.children().eq(1);m.css(l),b.$broadcast("videoCanvas:resize")}}var h,i=c,j=1;this.toCanvasCoordinates=function(a){return f(a,j)},this.toVideoCoordinates=function(a){return f(a,1/j)},this.scaleDimToCanvas=function(a){return a*j},this.getVideoSize=function(){return h};var k=i.children().eq(0);i.css("position","relative"),k.bind("loadedmetadata",g),a.addEventListener("resize",g),i.bind("$destroy",function(){a.removeEventListener("resize",g)}),g()}}],link:function(a,b,c,d,e){if(e(function(a){b.append(a)}),2!=b.children().length)throw Error();d.init()}}}]),angular.module("castifyEdit.ui.cropCanvas",[]).directive("cfCropCanvas",function(){function a(a,b,c,d){function e(b){var c=d.toCanvasCoordinates(a.box);c.bottom=c.top+c.height,c.right=c.left+c.width;var e={left:c.left,top:c.top},f={left:c.right,top:c.top},g={left:c.left,top:c.bottom},h={left:c.right,top:c.bottom},i=b.classList;return i.contains("top-left")?{corner:e,counter:h}:i.contains("top-right")?{corner:f,counter:g}:i.contains("bottom-left")?{corner:g,counter:f}:i.contains("bottom-right")?{corner:h,counter:e}:void 0}function f(a,b){var c=Math.min(a.left,b.left),d=Math.min(a.top,b.top),e=Math.max(a.top,b.top),f=Math.max(a.left,b.left);return{top:d,left:c,width:f-c,height:e-d}}function g(a){var b=d.scaleDimToCanvas(s);a.width=Math.max(a.width,b),a.height=Math.max(a.height,b)}function h(a){a.left=Math.min(Math.max(a.left,0),r.width),a.top=Math.min(Math.max(a.top,0),r.height)}function i(b){b.preventDefault(),p||(p=e(b.target));var c=angular.copy(p.corner);c.top+=b.deltaY,c.left+=b.deltaX,h(c);var i=f(c,p.counter);g(i),j(i),i=l(i),n(i),b.isFinal&&(p=null,a.box=d.toVideoCoordinates(i),k(a.box),a.$apply())}function j(a){var b=a.left+a.width-r.width;b>0&&(a.left-=b);var c=a.top+a.height-r.height;c>0&&(a.top-=c)}function k(a){a.left=Math.round(a.left),a.top=Math.round(a.top),a.width=Math.round(a.width),a.height=Math.round(a.height)}function l(a){return a=d.toVideoCoordinates(a),k(a),a=d.toCanvasCoordinates(a),k(a),a}function m(b){b.preventDefault(),q||(q=d.toCanvasCoordinates(a.box));var c=angular.copy(q);c.top+=b.deltaY,c.left+=b.deltaX,h(c),j(c),c=l(c),n(c),b.isFinal&&(q=null,a.box=d.toVideoCoordinates(c),k(a.box),a.$apply())}function n(a){a.bottom=a.top+a.height,a.right=a.left+a.width,u.css("height",a.top+"px"),v.css("top",a.bottom+"px"),w.css("top",a.top+"px"),w.css("width",a.left+"px"),w.css("height",a.height+"px"),x.css("top",a.top+"px"),x.css("left",a.right+"px"),x.css("height",a.height+"px"),y.css({top:a.top+"px",left:a.left+"px",width:a.width+"px",height:a.height+"px"})}function o(){if(!a.box){var c=d.getVideoSize();if(!c)return;var e=Math.min(c.width,c.height)/20;a.box={top:e,left:e,width:c.width-2*e,height:c.height-2*e}}r=b[0].getBoundingClientRect();var f=d.toCanvasCoordinates(a.box);n(f)}var p,q,r,s=16,t=b[0],u=angular.element(t.querySelector(".overlay.top")),v=angular.element(t.querySelector(".overlay.bottom")),w=angular.element(t.querySelector(".overlay.left")),x=angular.element(t.querySelector(".overlay.right")),y=angular.element(t.querySelector(".crop-box")),z=angular.element(t.querySelector(".move-handle")),A=[];a.$on("videoCanvas:resize",o),angular.forEach(t.querySelectorAll(".handle"),function(a){var b=new Hammer.Manager(a);b.add(new Hammer.Pan({threshold:0,pointers:0})),b.on("pan",i),A.push(b)});var B=new Hammer.Manager(z[0]);B.add(new Hammer.Pan({threshold:0,pointers:0})),B.on("pan",m),A.push(B),a.$on("$destroy",function(){A.forEach(function(a){a.destroy()})}),o()}return{restrict:"E",require:"^cfVideoCanvas",templateUrl:"components/castifyEdit/ui/crop-canvas/crop-canvas.html",scope:{box:"="},link:a}}),angular.module("castifyEdit.ui.videoControls",["w69b.throttle"]).directive("cfVideoControls",["$document","throttle",function(a,b){function c(c){function d(){j()}function e(){i.paused=g.paused,i.ended=g.ended}var f=a[0].querySelectorAll("video[cf-video-ctrl-target]");if(1!==f.length)throw new Error("no cf-video-ctrl-target found");var g=f[0],h=angular.element(f[0]),i={loading:!0};c.state=i,c.play=function(){g.play()},c.pause=function(){g.pause()};var j=b(function(){i.currentTime=g.currentTime,c.seekTime=i.currentTime},50,!1),k=b(function(a){g.currentTime=a},100);h.bind("timeupdate",d),h.bind("loadedmetadata",function l(){i.duration=g.duration,h.unbind("loadedmetadata",l),c.$apply()}),h.bind("playing pause ended",function(){e(),c.$apply()}),h.bind("loadstart seeking",function(){i.loading=!0,c.$digest()}),h.bind("canplay",function(){i.loading=!1,c.$digest()}),c.$watch("seekTime",function(a){a&&a!==i.currentTime&&k(a)}),e()}return{restrict:"E",templateUrl:"components/castifyEdit/ui/video-controls/video-controls.html",scope:{},link:c}}]),angular.module("castifyEdit.editJobSchedulerClient",["castifyExt.backgroundTool"]).factory("editJobSchedulerClient",["backgroundTool","$timeout",function(a,b){var c,d=a.portHelper("editor",!1),e=!0,f={};f.jobs=[];var g={jobsList:function(a){f.jobs.length=0,f.jobs.push.apply(f.jobs,a),c&&b.cancel(c),c=null,e&&f.getJobsByState("running").length&&(c=b(f.getJobs,1e3))}};return d.installHandlers(g),f.addJob=function(a){d.postMessage("addJob",a)},f.cancel=function(a){d.postMessage("cancel",a)},f.getJobs=function(){d.postMessage("getJobs")},f.clearComplete=function(){d.postMessage("clearComplete")},f.getJobsByState=function(a){return f.jobs.filter(function(b){return b.state===a})},f.getLastCompleteExportJob=function(){var a=f.jobs.filter(function(a){return"done"===a.state&&a.result.url}).sort(function(a,b){return b.id-a.id});return a.length?a[0]:null},f}]),angular.module("castifyExt.ui.fileEdit",["castifyEdit.ui.videoEditor","castifyEdit.editJobSchedulerClient","castifyExt.licensing"]).controller("FileEditCtrl",["$scope","$routeParams","fileDbClient","$location","editJobSchedulerClient","licensing",function(a,b,c,d,e,f){a.fileId=b.fileId,c.getFileDescriptor(a.fileId).then(function(b){a.file=b}),a.onSave=function(b){f.isPaid()&&(b.meta.fileId=a.fileId,e.addJob(b),d.path("/files/"))},a.onCancel=function(){d.replace().path("/files/"+a.fileId)}}]),angular.module("castifyExt.ui.editJobsInfo",["castifyEdit.editJobSchedulerClient"]).directive("cfEditJobsInfo",["editJobSchedulerClient",function(a){return{restrict:"E",scope:{},templateUrl:"components/castifyExt/ui/edit-jobs-info/edit-jobs-info.html",link:function(b){b.scheduler=a,b.$watch(function(){return a.getJobsByState("queued").length},function(a){b.numQueued=a}),b.$watch(a.getLastCompleteExportJob,function(a){b.lastCompleteExportJob=a}),b.saveGif=function(b){var c=angular.element("<a></a>"),d=b.fileTitle.replace(/[\/,\\]/g,"");d+=".gif",c.attr("href",b.result.url),c.attr("download",d),c[0].dispatchEvent(new MouseEvent("click")),a.clearComplete()},a.getJobs()}}}]),angular.module("castifyExt.syncStatusClient",["castifyExt.backgroundTool"]).factory("syncStatusClient",["backgroundTool",function(a){var b=a.portHelper("syncStatus",!1),c={};c.state={};var d={};return d.stateUpdate=function(a){angular.copy(a,c.state)},b.installHandlers(d),c.retry=function(){b.postMessage("retry")},b.getPort(),c}]),angular.module("castifyExt.uploader",["castifyExt.backgroundTool"]).factory("uploader",["backgroundTool",function(a){var b=a.portHelper("uploader"),c={};c.state={};var d={};return d.stateUpdate=function(a){angular.copy(a,c.state)},b.installHandlers(d),c.upload=function(a){b.postMessage("upload",a)},c.getFileState=function(a){return c.state[a]},c.getTargetState=function(a,b){var d=c.getFileState(a);return d?d[b]:null},c.isQueuedOrActive=function(a,b){var d=c.getTargetState(a,b);return d&&("uploading"===d.state||"queued"===d.state)},c}]),angular.module("castifyExt.localFileDb",["w69b.chromeStorage","w69b.filesHelper","w69b.chromeRuntime","castifyExt.chromeEventPublisher"]).factory("localFileDb",["$rootScope","chromeStorage","$q","filesHelper",function(a,b,c,d){function e(a){return k+a}function f(a){var b=e(a),c=j.getSingle(b).then(function(a){return a=g(a)});return c}function g(a){return a||(a={}),a.title||(a.title="Untitled Screencast"),a}function h(a){angular.extend(this,a)}var i={},j=b.local,k="filedb_",l=null,m=h.prototype;return h.createFromIdOrFileEntry=function(a){var b,e,g=angular.isString(a)?d.getFileEntryByPath(i.idToFilename(a)):c.when(a);return g.then(function(a){return b=a,e=i.filenameToId(a.name),c.all({metadata:d.getMetadata(b),info:f(e)}).then(function(a){var c=b.toURL(),d={id:e,uuid:e,url:c,createdAt:a.metadata.modificationTime,title:a.info.title,size:a.metadata.size};if(a.info.videoInfo){var f=a.info.videoInfo;angular.extend(d,{duration:f.duration,width:f.size.width,height:f.size.height})}if(a.info.previewImages&&(d.thumbnailUrl=a.info.previewImages[0].url),a.info.driveInfo&&(d.driveInfo=a.info.driveInfo),a.info.youtubeInfo){var g=a.info.youtubeInfo;d.youtubeInfo={id:g.id}}return new h(d)})})},m.rename=function(a){return i.updateInfo(this.id,{title:a})},m.remove=function(){var a=this.id;return c.all({result:d.removeByPath(i.idToFilename(a)),info:f(a)}).then(function(a){return a.info.previewImages?c.all(a.info.previewImages.map(function(a){return d.removeByPath(a.path)})):void 0}).then(function(){return j.remove(e(a))})},m.updateYoutubeInfo=function(a){return i.updateInfo(this.id,{youtubeInfo:a})},i.listFiles=function(){return d.listByPath("/").then(function(a){var b=[];return a.forEach(function(a){a.isFile&&"."!==a.name[0]&&i.filenameToId(a.name)!==l&&b.push(h.createFromIdOrFileEntry(a))}),c.all(b).then(function(a){var b={};return a.forEach(function(a){b[a.id]=a}),b})})},i.filenameToId=function(a){if(/\.webm/i.test(a))return a.slice(0,-5);throw new Error("invalid filename: "+a)},i.idToFilename=function(a){return a+".webm"},i.getFileDescriptor=function(a){return h.createFromIdOrFileEntry(a)},i.updateInfo=function(a,b,d){var f,g=e(a);return f=d?c.when(b):j.get(g).then(function(a){return angular.extend(a[g]||{},b)}),f.then(function(a){var b={};return b[g]=a,j.set(b),a})},i.migrateToUuid_=function(a,b,c){var g=i.idToFilename(c),h=a.name;return d.moveTo(a,b,g).then(function(){f(h).then(function(a){return i.updateInfo(c,a)}).then(function(){return j.remove(e(h))})})},a.$on("recorder:started",function(a,b){l=b}),a.$on("recorder:stopped",function(){l=null}),i}]),angular.module("castifyExt.licensing",["castifyExt.castifyAuth","w69b.chromeStorage","w69b.chromeRuntime","castifyExt.signInService","w69b.spawn","w69b.promiseTool"]).factory("licensing",["castifyAuth","$http","chromeRuntime","chromeStorage","$q","$rootScope","$log","signInService","castifyConfig","promiseTool","spawn",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){return h.getToken(a)}function m(){function a(){var a=window.chrome.identity,b=j.wrapChromeError(a.getAuthToken,a);return b({interactive:!1,scopes:["email","https://www.googleapis.com/auth/chromewebstore.readonly"]})}function f(){return k($traceurRuntime.initGeneratorFunction(function d(){var e,f,g,h,i;return $traceurRuntime.createGeneratorInstance(function(d){for(;;)switch(d.state){case 0:e=q+c.id,d.state=17;break;case 17:return d.state=2,a();case 2:f=d.sent,d.state=4;break;case 4:return d.state=6,b.get(e,{headers:{Authorization:"Bearer "+f}});case 6:g=d.sent,d.state=8;break;case 8:h=g.data,d.state=19;break;case 19:d.state=h.result&&h.createdTime?11:10;break;case 11:i=new Date(Number(h.createdTime)),d.state=12;break;case 12:d.returnValue=s>i,d.state=-2;break;case 10:d.returnValue=!1,d.state=-2;break;default:return d.end()}},d,this)}))}return y.isTester()?e.when(!0):d.sync.getSingle(v).then(function(a){return angular.isDefined(a)?a:e.reject()})["catch"](function(){return f().then(function(a){return d.sync.setSingle(v,a),a})})["catch"](function(){return!1})}function n(){return b.get(r+"/license",t).then(function(a){return a.data})}function o(){return!x||p&&"trial"!==p.access}var p,q="https://www.googleapis.com/chromewebstore/v1.1/userlicenses/",r=i.API_URL,s=1413892757176,t=h.AUTH_CONFIG,u="license",v="cws_license",w=600,x=!0,y={};return y.updateLicense=function(){var a=l().then(function(){return e.all([m(),n()])}).then(function(a){var b=a[1],c=a[0];return c&&"full"!==b.access&&(b.access="tester",b.maxAgeSecs=3600),b.validTill=Date.now()+1e3*b.maxAgeSecs,d.sync.setSingle(u,b),b});return a["catch"](function(a){g.debug("update failed",a)}),a},y.shouldLimitLength=function(){return!o()},y.isPaid=function(){return p&&"full"===p.access},y.isTester=function(){return p&&"tester"===p.access},y.getMaxLength=function(){return o()?Number.POSITIVE_INFINITY:w},y.getVersionName=function(){var a=o()?"Full":"Free";return p&&(a+=" ("+p.access+")"),a+" v"+c.getManifest().version},y.initialize=function(){return d.sync.getSingle(u).then(function(a){p=a,d.onChanged.addListener(function(a,b){"sync"==b&&a[u]&&(p=a[u].newValue,f.$$phase||f.$digest())}),c.getBackgroundPage()})},y.updateIfNeeded=function(){var a=p;(!a||!a.validTill||a.validTill<Date.now())&&y.updateLicense()},y.getToken=l,y.hasLicense=function(){return x&&!!p},y}]),angular.module("castifyExt.userInfo",["castifyExt.signInService","castifyExt.chromeEventPublisher"]).factory("userInfo",["$http","signInService","$rootScope",function(a,b,c){function d(){return b.getToken(!1).then(function(){return a.get(f,b.AUTH_CONFIG)}).then(function(a){var b=a.data;return{email:b.emails[0].value,displayName:b.displayName,image:b.image}})}function e(){d().then(function(a){g.me=a,g.isSignedIn=!0},function(){g.me=null,g.isSignedIn=!1})}var f="https://www.googleapis.com/plus/v1/people/me",g={isSignedIn:null,me:null};return g.getMe=function(){return g.me},g.signIn=function(){b.signIn()},g.initialize=function(){e()},c.$on("event:signInChanged",function(){e()}),g}]),angular.module("castifyExt.chromeEventPublisher",[]).run(["chromeRuntime","$rootScope",function(a,b){var c="event:";a.onMessage.addListener(function(a){angular.isObject(a)&&angular.isString(a.type)&&0===a.type.lastIndexOf(c,0)&&b.$broadcast(a.type,a.data),b.$$phase||b.$digest()})}]),angular.module("castifyExt.signInService",["castifyExt.castifyAuth"]).factory("signInService",["castifyAuth","chromeRuntime","$rootScope","$log",function(a,b,c,d){var e=["https://www.googleapis.com/auth/plus.me","email"],f={googleAuth:!0,googleAuthScopes:e},g={SCOPES:e,AUTH_CONFIG:f};return g.getToken=function(b,c){var d={interactive:!!b,scopes:e,validate:c};return a.getAuthToken(d)},g.signIn=function(b){var c={interactive:"select_account",scopes:e,validate:!0};b===!1&&(c.useChromeAccount=!1);var f=a.getAuthToken(c);return f["catch"](function(a){d.warn("Sign in failed",a)}),f},g}]),angular.module("castifyExt.driveUtils",["w69b.googledrive","castifyExt.castifyAuth"]).factory("driveUtils",["googledrive","$q",function(a,b){function c(){return a.postFile({title:"Screencastify",mimeType:"application/vnd.google-apps.folder",description:"Screencastify uses this folder to store Screencasts that you upload. You may rename or move it, it will upload to this folder.",properties:[{key:"isScreencastifyUploadFolder",value:!0,visibility:"PRIVATE"}]})}function d(){var b="mimeType = 'application/vnd.google-apps.folder' and trashed = false and properties has { key='isScreencastifyUploadFolder' and value='true' and visibility='PRIVATE' }";return a.listFiles({q:b,maxResults:1}).then(function(a){return a.length?a[0]:null})}function e(a){var b=a.filter(function(a){return"anyone"===a.type});return b.length?b[0]:null}function f(b){return a.listPermissions(b).then(e)}function g(a){return a?a.withLink?"unlisted":"public":"private"}var h,i={};return i.getDriveUploadParentId=function(a){return(!h||a)&&(h=d().then(function(a){return a?a:c()}).then(function(a){return a.id}),h["catch"](function(){h=null})),h},i.getSimplePrivacy=function(a){return f(a).then(g)},i.setSimplePrivacy=function(c,d){return f(c).then(function(e){if(g(e)===d)return b.when(null);if(e&&"private"===d)return a.removePermission(c,e.id);var f={role:"reader",type:"anyone",withLink:"unlisted"===d};return e?a.patchPermission(c,e.id,f):a.insertPermission(c,f)})},i}]),angular.module("castifyExt.youtubeUtils",["castifyExt.castifyAuth"]).factory("youtubeUtils",["$http","$q",function(a,b){function c(a){var c=a.data.items;return c.length?c[0]:b.reject("not found")}function d(b,d){return a.get(f,angular.extend({params:{id:b,part:"status,snippet"}},{youtubeAuth:d})).then(c)}function e(b,c,d){return d=angular.extend({id:b},d),a.put(f,d,angular.extend({params:{part:"status"}},{youtubeAuth:c})).then(function(a){return a.data})}var f="https://www.googleapis.com/youtube/v3/videos",g={};return g.getPrivacy=function(a,c){return d(a,c).then(function(a){return c!==a.snippet.channelId?b.reject():a.status.privacyStatus})},g.setPrivacy=function(a,b,c){return e(a,c,{status:{privacyStatus:b}})},g}]),angular.module("castifyExt.driveFileDb",["castifyExt.driveUtils","castifyExt.offline","w69b.chromeStorage","castifyExt.castifyAuth"]).factory("driveFileDb",["googledrive","driveUtils","castifyAuth","$q","onlineState","chromeStorage",function(a,b,c,d,e,f){function g(a,b){if(a){var c=a.match(/(.*)=s\d+$/);if(c)return c[1]+"=s"+b}return a}function h(a){var b=[];return angular.forEach(a,function(a,c){angular.isObject(a)?angular.forEach(a,function(a,d){b.push({key:c+"_"+d,value:a,visibility:"PRIVATE"})}):b.push({key:c,value:a,visibility:"PRIVATE"})}),b}function i(a){var b={};return a.forEach(function(a){if("PRIVATE"===a.visibility){if(a.key.indexOf("_")>0){var c=a.key.split("_",2),d=c[0],e=c[1];b[d]||(b[d]={}),b[d][e]=a.value}b[a.key]=a.value}}),b}function j(a){this.updateFromDriveResource_(a)}function k(){return d.when(f.local.getSingle(n,[]))}function l(a){a.then(function(a){f.local.setSingle(n,a)})}var m=400,n="drive_files",o={},p=j.prototype;return p.updateFromDriveResource_=function(a){var b=i(a.properties),c={id:b.uuid,driveId:a.id,thumbnailUrl:g(a.thumbnailLink,m),createdAt:new Date(b.recordingDate?Number(b.recordingDate):a.createdDate),url:a.downloadUrl,urlRequiresAccessToken:!0,size:Number(a.fileSize),duration:Number(b.duration),width:Number(b.width),height:Number(b.height),driveInfo:a},d="."+a.fileExtension;c.title=a.fileExtension&&-1!==a.title.indexOf(d,a.title.length-d.length)?a.title.slice(0,-d.length):a.title,b.youtubeInfo&&(c.youtubeInfo=b.youtubeInfo),angular.extend(this,c)},p.remove=function(){return a.trashFile(this.driveId)},p.rename=function(b){var c=this.driveInfo.fileExtension;return c&&(c="."+c,b.indexOf(c,b.length-c.length)<0&&(b+=c)),a.patchFile(this.driveId,{title:b}).then(this.updateFromDriveResource_.bind(this))},p.updateYoutubeInfo=function(b){var c=i(this.driveInfo.properties);return c.youtubeInfo=b,a.patchFile(this.driveId,{properties:h({youtubeInfo:b})})},o.getFileDescriptor=function(b){var c="properties has { key='uuid' and value='"+b+"' and visibility='PRIVATE' }";return a.listFiles({maxResults:1,q:c}).then(function(a){return a.length?a[0]:d.reject()}).then(function(a){return new j(a)})},o.listFiles=function(){var c;return e.isOnline()?(c=b.getDriveUploadParentId().then(function(b){var c="'"+b+"' in parents and trashed = false and properties has { key='isScreencastifySyncFile' and value='true' and visibility='PRIVATE' }";return a.listFiles({maxResults:1e3,q:c})}),l(c)):c=k(),c.then(function(a){var b={};return a.forEach(function(a){var c=new j(a);b[c.id]=c}),b})},o}]),angular.module("castifyExt.fileDbClient",["castifyExt.backgroundTool","castifyExt.appOptions","castifyExt.castifyAuth"]).factory("fileDbClient",["backgroundTool","$q","appOptions","castifyAuth",function(a,b,c,d){function e(){return m||(m=b.defer(),j.postMessage("subscribe")),m.promise}function f(a){angular.extend(this,a),this.createdAt&&(this.createdAt=new Date(this.createdAt))}function g(a){var b=k[a.id];return b?(angular.copy(a,b),b):(k[a.id]=a,a)}function h(a){var b=k[a];b&&(b.deleted=!0,delete k[a])}function i(a,b){var c;b&&(c={},angular.forEach(k,function(a,b){c[b]=!0})),angular.forEach(a,function(a,d){g(new f(a)),b&&delete c[d]}),b&&angular.forEach(c,function(a,b){h(b)})}var j=a.portHelper("syncManager",!1),k={},l={},m=null,n=!1,o={},p=0,q=f.prototype;q.getUrl=function(){var a=this;return a.urlRequiresAccessToken?d.getAuthToken({interactive:!1}).then(function(b){var c=a.url;return c+=c.indexOf("?")>=0?"&":"?",c+"access_token="+b}):b.when(a.url)};var r={};return r.filesUpdate=function(a){a.remove&&a.remove.forEach(h),a.add&&i(a.add,!1),a.full?(i(a.full,!0),!n&&m&&(n=!0,m.resolve())):a.error&&(n=!1,m&&(m.reject(),m=null)),p++},r.reloadSuccess=function(a){o[a]&&(o[a].resolve(),delete o[a])},r.reloadError=function(a){o[a]&&(o[a].reject(),delete o[a])},j.installHandlers(r),l.getFileDescriptor=function(a){return e().then(function(){var c=k[a];return c?c:b.reject()})},l.listFiles=function(){return e().then(function(){return k})},l.rename=function(a,b){var c=k[a];c&&(c.title=b),j.postMessage("rename",{id:a,title:b})},l.reload=function(a){return o[a]||(o[a]=b.defer(),j.postMessage("reload",a)),o[a].promise},l.remove=function(a){h(a),j.postMessage("remove",a)},l.removeAll=function(a){angular.copy({},k),j.postMessage("removeAll",a)},l.isSyncEnabled=function(){return c.values.driveSync},l.getListVersionId=function(){return p},l}]),angular.module("castifyExt.syncAuthTool",["castifyExt.castifyAuth","w69b.chromeRuntime","castifyExt.appOptions","castifyExt.driveUtils"]).factory("syncAuthTool",["castifyAuth","$http","$q","$log","appOptions","chromeRuntime","$rootScope","driveUtils",function(a,b,c,d,e,f,g,h){var i={};return i.broadcastIfSyncError=function(a){return e.values.driveSync&&i.checkSetup()["catch"](function(b){switch(b){case"token":d.debug("syncAuthTool: sync enabled but we do not have a valid token"),g.$broadcast("event:syncAuthError"),f.sendMessage({type:"event:syncAuthError"});break;case"forbidden":d.debug("syncAuthTool: detected drive-forbidden error",a),g.$broadcast("event:syncForbiddenError");break;default:d.warn("syncAuthTool: unhandled sync error detected",a)}}),c.reject(a)},i.isGoogleForbiddenError=function(a){return!!(angular.isObject(a)&&403===a.status&&a.data&&a.data.error)},i.hasValidAuthToken=function(){return a.getAuthToken({interactive:!1,validate:!0})},i.checkSetup=function(){function a(){return h.getDriveUploadParentId()["catch"](function(a){return c.reject(i.isGoogleForbiddenError(a)?"forbidden":"unknown")})}return i.hasValidAuthToken()["catch"](function(){return c.reject("token")}).then(a).then(function(){return!0})},i}]),angular.module("castifyExt.youtubeAuth",["w69b.uritool","castifyExt.castifyAuth"]).provider("youtubeAuth",function(){var a,b=["https://www.googleapis.com/auth/youtube"];this.setScopes=function(a){b=a},this.setClientId=function(b){a=b},this.$get=["castifyAuth","$log","uritool","$q","$http","castifyConfig",function(c,d,e,f,g,h){function i(a){return q+"?"+e.encodeQuery(a)}function j(a){return a.data}function k(){var e={redirect_uri:c.getRedirectURL(),scope:b.join(" "),response_type:"code",client_id:a,access_type:"offline",include_granted_scopes:!1,prompt:"select_account consent"},g=i(e),h={url:g,interactive:!0};return c.launchWebAuthFlow(h).then(function(a){return d.debug("youtube oauth result",a),a.code?a.code:f.reject("youtube_flow_returned_no_code")})}function l(a){return g.post(o,{code:a,version:2},{googleAuth:!0}).then(j,function(a){return d.warn("adding youtube code failed",a),
f.reject("youtube_add_code_failed")})}function m(a){return g.get(p+"/"+a,{googleAuth:!0}).then(j).then(function(a){return a.expiresAt=Number(new Date(a.expiresAt)),a.issuedAt=Number(new Date(a.issuedAt)),a})}var n=h.API_URL+"/youtube/",o=n+"channels",p=n+"tokens",q="https://accounts.google.com/o/oauth2/auth",r={},s=0,t={};return t.addChannel=function(){return c.getAuthToken({interactive:!0}).then(k).then(l)},t.listChannels=function(){return g.get(o,{googleAuth:!0}).then(j)},t.removeChannel=function(a){return g["delete"](o+"/"+a,{googleAuth:!0}).then(j)},t.getAuthToken=function(a){if(!a.channelId)throw new Error;var b,c=a.channelId,d=Math.floor(Date.now()-s)+12e4,e=r[c];return e&&e.expiresAt>d?b=f.when(e):(b=m(c),b.then(function(a){r[c]=a,a.issuedAt&&(s=Date.now()-Number(a.issuedAt))})),b.then(function(a){return a.accessToken})},t}]}).factory("youtubeHttpAuthInterceptor",["$q","$injector","$log",function(a,b,c){function d(a){var b={channelId:a};return f().getAuthToken(b)}function e(a){return{Authorization:"Bearer "+a}}function f(){return g||(g=b.get("youtubeAuth")),g}var g;return{request:function(b){return b.youtubeAuth?(b.googleAuth&&delete b.googleAuth,d(b.youtubeAuth).then(function(a){return b.headers=angular.extend(b.headers||{},e(a)),b},function(b){return c.warn("youtubeAuth failed",b),a.reject("youtubeAuth failed")})):b}}}]),angular.module("castifyExt.castifyAuth",["w69b.chromeStorage","w69b.uritool","w69b.es6","w69b.chromeRuntime","w69b.uuid","w69b.promiseTool","castifyExt.oauthTokenCache"]).provider("castifyAuth",function(){var a,b=[],c="",d=!1;this.setScopes=function(a){b=a},this.setClientId=function(b){a=b},this.setRedirectUri=function(a){c=a},this.useChromeAccount=function(a){d=a},this.$get=["$q","uritool","$rootElement","$window","chromeRuntime","$interval","castifyConfig","$http","chromeStorage","oauthTokenCache","uuid","promiseTool","$log","$rootScope",function(e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(){var a=h.chrome.identity;return p.wrapChromeError(a.getProfileUserInfo,a)().then(function(a){return a.email?a.email:e.reject()})}function t(){h.chrome.tabs.create({url:"chrome://chrome-signin/"},angular.noop)}function u(a){return l.get("https://www.googleapis.com/oauth2/v1/tokeninfo",{params:{access_token:a.accessToken}}).then(function(){return a},function(b){return 400===b.status?e.reject("invalid token"):a})}function v(a){return l.get(F,{headers:{Authorization:"Bearer "+a}}).then(function(a){return a.data.haveCredentials})["catch"](function(a){return 0===a.status||a.status>=500})}function w(b){return b=angular.extend({redirect_uri:c,response_type:"code",client_id:a,access_type:"offline",include_granted_scopes:"true"},b),E+"?"+f.encodeQuery(b)}function x(a){var b=e.defer(),c=function(c){if("oauth2AuthResult"===c.type){var d=c.data,e=f.parseUrl(d),g=f.parseQuery((e.hash||e.query).substring(1));if(!g||g.state!==a)return;g.error?b.reject({error:g.error||"immediate_failed"}):b.resolve(g)}};return i.onMessage.addListener(c),b.promise["finally"](function(){i.onMessage.removeListener(c)}),b}function y(a,b){var c=angular.element('<iframe src="'+a+'" tabindex="-1" style="display:hidden"></iframe>');g.append(c);var d=x(b);return d.promise["finally"](function(){c.remove()}),p.withTimeout(function(){return d.promise},J,function(){return d.reject(),q.debug("castifyAuth: iframe load timed out"),e.reject(M.NetworkError)})}function z(a){var b=o(),c=w({scope:a.scope,access_type:"online",response_type:"token",login_hint:a.email,state:b,prompt:"none"});return y(c,b).then(function(a){return{expiresAt:Date.now()+1e3*Number(a.expires_in),accessToken:a.access_token}})}function A(a){return l.post(F,{code:a}).then(function(a){return a.data}).then(function(a){return a.expiresAt=Number(new Date(a.expiresAt)),a.issuedAt=Number(new Date(a.issuedAt)),a})}function B(a,b){var c=h.open(a,"castifySignIn","location=no"),d=!1,e=x(b);e.promise.then(function(){d=!0});var f=j(function(){c.closed&&!d&&(q.debug("castifyAuth: user closed oauth window"),e.reject("auth_window_closed"))},200);return e.promise["finally"](function(){j.cancel(f)}),e.promise}function C(b){var c=o(),d={scope:b.scope,response_type:"code",client_id:a,access_type:"offline",state:c},e=[];b.email?d.login_hint=b.email:e.push("select_account"),b.forceConsent&&e.push("consent"),d.prompt=e.join(" ");var f=w(d),g=B(f,c);return g.then(function(a){return a.code})}function D(a){function b(a){return C(a).then(A).then(function(c){return a.email&&c.email!==a.email?b(a):c})}return b(a)["catch"](function(c){return c&&c.data&&"no_refresh_code"===c.data.error?b(angular.extend({},a,{forceConsent:!0})):e.reject(c)})}var E="https://accounts.google.com/o/oauth2/auth",F=k.API_URL+"/auth",G="castifyAuth:account",H="castifyAuth:cache",I=n(H),J=1e4,K=p.serializer(),L=[],M={};return M.NotSignedInError="not_signed_in",M.NetworkError="network_error",M.getAccount=function(){return m.local.getSingle(G).then(function(a){return a?a:e.reject()})},M.setAccount=function(a){return m.local.setSingle(G,a).then(M.onSignInChanged.$fire)},M.getAuthToken=function(a){function c(a){return a+":"+l.scope}function f(b){return v(b.accessToken).then(function(c){if(c)return b;if(a.interactive){q.debug("castifyAuth: token not stored on server, getting code");var d=D(l);return d.then(M.onSignInChanged.$fire),d}return e.reject(M.NotSignedInError)})}function g(b){return l.email=b,I.withCache(c(b),function(){return z(l)["catch"](function(b){if(a.interactive&&b&&"immediate_failed"===b.error){var c=D(l);return c.then(M.onSignInChanged.$fire),c}return e.reject(b)}).then(f)})}function h(){return!a.interactive||a.useChromeAccount?e.reject(M.NotSignedInError):D(l).then(function(a){return e.all([I.put(c(a.email),a),M.setAccount(a.email)]).then(function(){return a})})}function i(b){return g(b).then(function(d){return a.validate?u(d)["catch"](function(){return I.remove(c(b)).then(function(){return g(b).then(u)})}):d})}function j(){return a.useChromeAccount?s()["catch"](M.getAccount):"select_account"===a.interactive?e.reject():M.getAccount()}function k(){var b=j().then(i,h).then(function(a){return a.accessToken});return b["catch"](function(b){b===M.NotSignedInError&&a.useChromeAccount&&a.interactive&&t()}),b}a=angular.extend({interactive:!1,scopes:b,useChromeAccount:d},a),a.scopes||(a.scopes=b);var l={scope:a.scopes.join(" ")};return K(k)},M.removeCachedAuthToken=function(a){return I.removeByToken(a.token)},M.launchWebAuthFlow=function(a){return a.interactive?B(a.url,a.state):B(a.url,a.state)},M.getRedirectURL=function(){return c},M.onSignInChanged={$fire:function(){L.forEach(function(a){a()}),r.$broadcast("castifyAuth:signInChanged")},addListener:function(a){L.push(a)},removeListener:function(a){L=L.filter(function(b){return b!==a})}},d&&h.chrome.identity.onSignInChanged.addListener(M.onSignInChanged.$fire),M}]}).factory("googleauth",["castifyAuth","$q",function(a,b){var c={};return c.loadClient=function(){return b.when()},c.getAuthToken=function(b){a.getAuthToken(angular.isObject(b)?b:{interactive:!!b})},c}]),angular.module("castifyExt.oauthTokenCache",["w69b.chromeStorage"]).factory("oauthTokenCache",["chromeStorage","$q",function(a,b){function c(c){function d(){return a.local.getSingle(c).then(function(a){return a||{}})}function e(a){var b=f();angular.forEach(a,function(c,d){(!d.expiresAt||d.expiresAt<=b)&&delete a[c]})}function f(){return Math.floor(Date.now()-g)+12e4}var g=0,h={};return h.get=function(a){return d().then(function(c){var d=c[a];return d&&d.expiresAt>f()?b.when(d):b.reject()})},h.put=function(b,f){return d().then(function(d){return d[b]=f,f.issuedAt&&(g=Date.now()-Number(f.issuedAt)),e(d),a.local.setSingle(c,d)})},h.removeByToken=function(b){return d().then(function(d){return angular.forEach(d,function(a,c){a.accessToken===b&&delete d[c]}),a.local.setSingle(c,d)})},h.remove=function(b){return d().then(function(d){return delete d[b],a.local.setSingle(c,d)})},h.withCache=function(a,b){return h.get(a)["catch"](function(){return b().then(function(b){return h.put(a,b).then(function(){return b})})})},h}return c}]),angular.module("castifyExt.requestMicPermission",[]).factory("requestMicPermission",["$window","$q","$interval",function(a,b,c){return function(){var d=b.defer(),e=a.open("mic.html","mic",""),f=!1;e.clGotStream=function(){f=!0,d.resolve()};var g=c(function(){e.closed&&!f&&d.reject("closed mic permission window without granting permission")},200);return d.promise["finally"](function(){c.cancel(g)}),d.promise}}]),angular.module("castifyExt.commonConfig",["castifyExt.castifyAuth","w69b.analytics","w69b.chromeRuntime","castifyExt.licensing","castifyExt.helpCenterConfig"]).config(["$compileProvider","$sceDelegateProvider","analyticsProvider",function(a,b,c){c.setTrackingId("UA-23874345-14"),b.resourceUrlWhitelist(["self","http://localhost:9008/**","blob:**","filesystem:chrome-extension://**","https://**"]);var d=/^\s*(https?|mailto|blob|chrome-extension|filesystem:chrome-extension):/;a.aHrefSanitizationWhitelist(d),a.imgSrcSanitizationWhitelist(d)}]).run(["$rootScope","analytics","chromeRuntime","licensing","$location",function(a,b,c,d,e){b.setEnabled(!1),b.loadLib(),b.callInternal(["set","dimension3","ext"]),b.callInternal(["set","dimension2",c.getManifest().version]);var f;a.$on("$viewContentLoaded",function(){var c=e.path();b.set("title",a.pageTitle),b.trackPageView(c),f=c}),a.$watch(function(){return d.hasLicense()?d.isPaid()?"paid":d.isTester()?"tester":"trial":"unknown"},function(a){b.callInternal(["set","dimension1",a])})}]).value("castifyConfig",{API_URL:"https://www.screencastify.com/api"}),angular.module("castifyExt.authConfig",["castifyExt.youtubeAuth","castifyExt.castifyAuth","w69b.chromeRuntime","w69b.googleHttpAuthInterceptor"]).config(["$httpProvider","youtubeAuthProvider","castifyAuthProvider","googleHttpAuthInterceptorProvider",function(a,b,c,d){var e="242262968495-o42n5tqeo08dsa75p3j4dk1k61t05ln3.apps.googleusercontent.com";b.setClientId(e),c.setClientId(e),c.setScopes(chrome.runtime.getManifest().oauth2.scopes),c.useChromeAccount(!0),c.setRedirectUri("https://www.screencastify.com/oauth2postback"),a.interceptors.push("youtubeHttpAuthInterceptor"),a.interceptors.push("googleHttpAuthInterceptor"),d.enableAuthAutoRetry(!0),d.setAuthProvider("castifyAuth")}]).run(["castifyAuth","chromeRuntime","$rootScope",function(a,b,c){a.onSignInChanged.addListener(function(){c.$evalAsync(function(){c.$broadcast("event:signInChanged"),b.sendMessage({type:"event:signInChanged"})})})}]),angular.module("castifyExt.enterprisePolicy",["w69b.chromeStorage"]).factory("enterprisePolicy",["chromeStorage","$rootScope",function(a,b){var c={},d=!1,e={},f=["disableSharing","disableSaveToDisk","options"];return f.forEach(function(a){Object.defineProperty(c,a,{get:function(){return e[a]}})}),c.loadedPromise=a.managed.get(f).then(function(a){angular.extend(e,a),d=!0}),c.isLoaded=function(){return d},c.has=function(a){return e.hasOwnProperty(a)},c.get=function(a){return e[a]},a.onChanged.addListener(function(a,c){"managed"===c&&(angular.forEach(a,function(a,b){e[b]=a.newValue}),b.$$phase||b.$digest())}),c}]),angular.module("castifyExt.upgradeHelper",["castifyExt.licensing","w69b.chromeTabs"]).factory("upgradeHelper",["chromeTabs","licensing",function(a,b){var c={};return c.openBuy=function(b){var c="https://www.screencastify.com/buy?utm_source=app&utm_medium="+b+"&utm_campaign=editor";a.create({url:c})},c.isPaid=function(){return b.isPaid()},c}]),angular.module("castifyExt.helpCenter",["w69b.chromeTabs"]).factory("helpCenter",["chromeTabs",function(a){var b={};return b.tagUrls={},b.registerUrl=function(a,c){b.tagUrls[a]=c},b.openHelp=function(c){var d=b.tagUrls[c];if(!d)throw new Error("No help url registered for "+c);a.create({url:d})},b.setNotifyHelp=function(a,c){a.onButtonClicked=a.onClicked=function(){b.openHelp(c),a.close()}},b}]),angular.module("castifyExt.helpCenterConfig",["castifyExt.helpCenter"]).run(["helpCenter",function(a){a.registerUrl("load_nacl","https://screencastify.uservoice.com/knowledgebase/articles/507908"),a.registerUrl("disk_space","https://screencastify.uservoice.com/knowledgebase/articles/507914"),a.registerUrl("drive_apps","https://screencastify.uservoice.com/knowledgebase/articles/460525"),a.registerUrl("start_recording","https://screencastify.uservoice.com/knowledgebase/articles/448826")}]),angular.module("w69b.chromePersistentLogger",["w69b.chromeStorage","w69b.logging","w69b.structs.CircularBuffer"]).provider("chromePersistentLogger",["$logProvider",function(a){function b(a,b){var d={level:a,args:b,timestamp:(new Date).getTime()};return c?c.add(d):e.push(d),!0}var c,d="logs",e=[],f=!1,g=1e3,h="logs_",i=!1,j=!0;this.setStorageKey=function(a){d=a},this.setMaxNumLogs=function(a){g=a},this.enableAutoLoad=function(a){f=a},this.enableAutoSave=function(a){j=a},this.enableGlobalHandler=function(a){i=a},this.install=function(){this.enableAutoLoad(!0),a.setCustomHook(b)},this.$get=["$window","$q","chromeStorage","CircularBuffer","$log",function(a,k,l,m,n){function o(a){var b=a.args.map(function(a){if(!angular.isObject(a))return a;try{return angular.toJson(a)}catch(b){return a}});return[new Date(a.timestamp).toISOString(),a.level.toUpperCase(),b.join(", ")].join(" ")}function p(a){var b=new m(g);return a.forEach(function(a){b.add(a)}),b}var q={};return q.load=function(){return l.local.getSingle(h+d).then(function(a){a&&a.length&&(c=p(a.concat(q.getEntries())))})},q.save=function(a){return l.local.setSingle(h+(a||d),q.getEntries())},q.clear=function(){c.clear()},q.getEntries=function(){return c.getValues()},q.getLogs=function(){return q.getEntries().map(o)},q.getMergedLogs=function(a){return a=a.map(function(a){return h+a}),l.local.get(a).then(function(a){var b=[];return angular.forEach(a,function(a,c){a&&a.length&&a.forEach(function(a){a.storageKey=c.substr(h.length),b.push(a)})}),b.sort(function(a,b){return a.timestamp-b.timestamp}),b.map(function(a){return"["+a.storageKey+"] "+o(a)})})},q.hookFn=b,c=p(e),e=null,f&&q.load(),i&&(a.onerror=function(a,b,c){n.error("global error",a,b,c)}),j&&a.addEventListener("unload",function(){q.save()}),q}]}]).run(["chromePersistentLogger",angular.noop]),angular.module("w69b.chromeRuntime",["w69b.promiseTool"]).factory("chromeRuntime",["promiseTool",function(a){var b={};return b.sendMessage=a.wrapChromeError(chrome.runtime.sendMessage,chrome.runtime),b.getBackgroundPage=a.wrapChromeError(chrome.runtime.getBackgroundPage,chrome.runtime),b.connect=chrome.runtime.connect.bind(chrome.runtime),b.getManifest=chrome.runtime.getManifest.bind(chrome.runtime),b.id=chrome.runtime.id,["onMessage","onConnect","onConnectExternal","onInstalled","onSuspend"].forEach(function(a){b[a]={addListener:function(b){chrome.runtime[a].addListener(b)},removeListener:function(b){chrome.runtime[a].removeListener(b)}}}),b}]),angular.module("w69b.chromeStorage",["w69b.promiseTool"]).factory("chromeStorage",["promiseTool",function(a){var b=chrome.storage,c={};return["local","sync","managed"].forEach(function(d){c[d]={},["set","get","remove","clear"].forEach(function(e){c[d][e]=a.wrapChromeError(b[d][e],b[d])}),c[d].setSingle=function(a,b){var e={};return e[a]=b,c[d].set(e)},c[d].getSingle=function(a,b){return c[d].get(a).then(function(c){return c.hasOwnProperty(a)?c[a]:b})}}),c.onChanged=b.onChanged,c}]),angular.module("w69b.chromeTabs",["w69b.promiseTool"]).factory("chromeTabs",["$window","promiseTool","$q",function(a,b,c){if(!a.chrome||!a.chrome.tabs)return null;var d=a.chrome,e={};return e.query=b.wrapChromeError(d.tabs.query,d.tabs),e.getActiveTab=function(){return e.query({active:!0,windowId:d.windows.WINDOW_ID_CURRENT}).then(function(a){return a.length?a[0]:c.reject()})},e.get=b.wrapChromeError(d.tabs.get,d.tabs),e.update=b.wrapChromeError(d.tabs.update,d.tabs),e.remove=b.wrapChromeError(d.tabs.remove,d.tabs),e.create=b.wrapChromeError(d.tabs.create,d.tabs),e.connect=d.tabs.connect.bind(d.tabs),e.executeScript=b.wrapChromeError(d.tabs.executeScript,d.tabs),e.insertCSS=b.wrapChromeError(d.tabs.insertCSS,d.tabs),e.sendMessage=b.wrapChromeError(d.tabs.sendMessage,d.tabs),e.onUpdated=d.tabs.onUpdated,e.onActivated=d.tabs.onActivated,e.sendMessageActive=function(a,b){return e.getActiveTab().then(function(c){return e.sendMessage(c.id,a,b)})},e}]).directive("newTab",["chromeTabs",function(a){return{restrict:"A",link:function(b,c,d){c.bind("click",function(b){b.preventDefault(),a.create({url:d.href}).then(function(a){chrome.windows.update(a.windowId,{focused:!0},angular.noop)})})}}}]),angular.module("w69b.chromeWindows",[]).factory("chromeWindows",["promiseTool",function(a){var b={};return b.get=a.wrapChromeError(chrome.windows.get,chrome.windows),b.create=a.wrapChromeError(chrome.windows.create,chrome.windows),b.update=a.wrapChromeError(chrome.windows.update,chrome.windows),b.getCurrent=a.wrapChromeError(chrome.windows.getCurrent,chrome.windows),b.remove=a.wrapChromeError(chrome.windows.remove,chrome.windows),b.onRemoved=chrome.windows.onRemoved,b}]),angular.module("w69b.googleHttpAuthInterceptor",[]).provider("googleHttpAuthInterceptor",function(){var a=0,b="googleauth";this.enableAuthAutoRetry=function(b){a=b?1:0},this.setAuthProvider=function(a){b=a},this.$get=["$q","$log","$injector",function(c,d,e){function f(){return l||(l=e.get(b)),l}function g(a){return f().getAuthToken(a)}function h(a){return{Authorization:"Bearer "+a}}function i(){return k||(k=e.get("$http")),k}function j(b){var e=b.status;if(401==e&&b.config.googleAuth&&b.config.authAutoRetry!==!1){d.debug("auth error detected",b);var f=angular.copy(b.config);if(f.authRetryCount?f.authRetryCount++:f.authRetryCount=1,f.authRetryCount<=a)return g({scopes:f.googleAuthScopes,validate:!0}).then(function(){return d.debug("googleAuthHttpInterceptor: auto-retrying with validated token"),i()(f)})}return c.reject(b)}var k,l;return{request:function(a){return a.googleAuth?g({scopes:a.googleAuthScopes}).then(function(b){return a.headers=angular.extend(a.headers||{},h(b)),a},function(a){return d.warn("googleAuthHttpInterceptor: no token, aborting request",a),c.reject("googleAuthFailed")}):a},responseError:j}}]}),angular.module("w69b.logging",[]).provider("$log",function(){var a=!0,b=this,c=!1;this.debugEnabled=function(b){return angular.isDefined(b)?(a=b,this):a},this.setCustomHook=function(a){c=a},this.$get=["$window",function(d){function e(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function f(a){var b=d.console||{},f=b[a]||b.log||angular.noop,g=!1;try{g=!!f.apply}catch(h){}return g?function(){var d=[];return angular.forEach(arguments,function(a){d.push(e(a))}),c&&c(a,d)?f.apply(b,d):void 0}:function(b,d){c&&c(a,[b,d])&&f(b,null===d?"":d)}}return{log:f("log"),info:f("info"),warn:f("warn"),error:f("error"),debug:function(){var c=f("debug");return function(){a&&c.apply(b,arguments)}}()}}]}),angular.module("w69b.filesHelper",["w69b.promiseTool"]).factory("filesHelper",["$window","promiseTool","$q",function(a,b,c){function d(a){var b=a.split("/"),c=b.slice(0,-1).join("/"),d=b.slice(-1)[0];return[c,d]}a.requestFileSystem=a.requestFileSystem||a.webkitRequestFileSystem;var e=window.PERSISTENT,f=104857600,g={},h=["readEntries","remove","getFile","getMetadata","moveTo","file","getDirectory","createWriter"];return h.forEach(function(a){g[a]=function(c){var d=[].slice.call(arguments,1);return b.wrapCallbacks(c[a],c).apply(null,d)}}),g.getFileSystem=function(c,d){return angular.isUndefined(c)&&(c=e),d=d||f,b.wrapCallbacks(a.requestFileSystem,a)(c,d)},g.getPersistentQuota=function(){var b=c.defer();return a.navigator.webkitPersistentStorage.queryUsageAndQuota(function(a,c){b.resolve({usage:a,quota:c})},function(a){b.reject(a)}),b.promise},chrome.system&&chrome.system.storage&&(g.getStorageInfo=b.wrapChromeError(chrome.system.storage.getInfo,chrome.system.storage)),g.getDirByPath=function(a,b){function d(a,e){return e.length?g.getDirectory(a,e[0],b||{}).then(function(a){return d(a,e.slice(1))}):c.when(a)}var e=a.split("/");return""===e[0]&&e.splice(0,1),g.getFileSystem().then(function(a){return d(a.root,e,b)})},g.moveFileByPath=function(a,b){var e=d(b),f=e[0],h=e[1];return c.all({file:g.getFileEntryByPath(a),targetDir:g.getDirByPath(f)}).then(function(a){return g.moveTo(a.file,a.targetDir,h)})},g.getFileEntryByPath=function(a,b,c){var e=d(a),f=e[0],h=e[1];return g.getDirByPath(f,c).then(function(a){return g.getFile(a,h,b||{})})},g.getFileByPath=function(a){return g.getFileEntryByPath(a).then(function(a){return g.file(a)})},g.removeByPath=function(a){return g.getFileEntryByPath(a).then(function(a){return g.remove(a)})},g.listByPath=function(a){return g.getDirByPath(a).then(function(a){var b=a.createReader();return g.readEntries(b)})},g.requestPersistentQuota=function(a){return b.wrapCallbacks(navigator.webkitPersistentStorage.requestQuota,navigator.webkitPersistentStorage)(a||f)},g.requestTemporaryQuota=function(a){return b.wrapCallbacks(navigator.webkitTemporaryStorage.requestQuota,navigator.webkitTemporaryStorage)(a||f)},g}]),angular.module("w69b.timeutil",[]).factory("timeutil",function(){var a={};return a.formatDuration=function(a){function b(a){return 10>a?"0"+a:a}angular.isNumber(a)||(a=0);var c=Math.floor(a%60),d=Math.floor(a/60%60),e=[b(d),b(c)],f=Math.floor(a/3600);return f&&e.unshift(f),e.join(":")},a}).filter("duration",["timeutil",function(a){return function(b){return a.formatDuration(b||0)}}]),angular.module("w69b.analytics",[]).provider("analytics",[function(){var a;this.setTrackingId=function(b){a=b},this.$get=["$document","$window",function(b,c){var d={};return d.trackPageView=function(a){d.callInternal(["send","pageview",a])},d.setEnabled=function(b){c["ga-disable-"+a]=!b},d.loadLib=function(){!function(a,b,c,d,e){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date;var f=b.createElement(c),g=b.getElementsByTagName(c)[0];f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(c,b[0],"script","https://www.google-analytics.com/analytics.js","ga"),d.callInternal(["create",a,"auto"]),d.callInternal(["set","forceSSL",!0])},d.set=function(a,b){d.callInternal(["set",a,b])},d.trackEvent=function(){var a=Array.prototype.slice.call(arguments);d.callInternal(["send","event"].concat(a))},d.sendTiming=function(){var a=Array.prototype.slice.call(arguments);d.callInternal(["send","timing"].concat(a))},d.callInternal=function(a){c.ga&&c.ga.apply(null,a)},d.trackTimer=function(a,b,c){var e,f={};return f.start=function(){return e=(new Date).getTime(),f},f.send=function(g,h,i){var j=(new Date).getTime();return d.sendTiming(g||a,h||b,j-e,i||c),f},f.start(),f},d}]}]).directive("analyticsEvent",["analytics",function(a){return{restrict:"A",link:function(b,c,d){var e=d.analyticsEvent;if(!e)throw new Error;var f=e.split(",");c.bind("click",function(){a.trackEvent.apply(a,f)})}}}]),angular.module("w69b.promiseTool",[]).factory("promiseTool",["$q","$timeout",function(a,b){var c={};return c.wrapChromeError=function(b,c){return function(){var d=Array.prototype.slice.call(arguments,0),e=a.defer();return d.push(function(a){chrome.runtime.lastError?e.reject(chrome.runtime.lastError):e.resolve(a)}),b.apply(c,d),e.promise}},c.wrapCallbacks=function(b,c){return function(){var d=Array.prototype.slice.call(arguments,0),e=a.defer();return d.push(e.resolve.bind(e)),d.push(e.reject.bind(e)),b.apply(c,d),e.promise}},c.serializer=function(){var b=null;return function(c){var d=a.defer();return(b||a.when())["finally"](function(){var a=c.call();d.resolve(a)}),b=d.promise,b["finally"](function(){b=null}),d.promise}},c.withTimeout=function(c,d,e){e||(e=angular.noop);var f=a.defer(),g=b(function(){var a=e();angular.isDefined(a)?f.resolve(a):f.reject("timeout"),f=null},d),h=c(),i=f.promise;return h["finally"](function(){b.cancel(g),g=null}),h.then(function(){f&&f.resolve.apply(f,arguments)},function(){f&&f.reject.apply(f,arguments)}),i},c}]),angular.module("w69b.uritool",[]).factory("uritool",function(){function a(a){return decodeURIComponent(a.replace(b," "))}var b=/\+/g,c={};return c.parseQuery=function(b,c){"?"==b[0]&&(b=b.substring(1));for(var d,e=/([^&=]+)=?([^&]*)/g,f={};d=e.exec(b);){var g=a(d[1]),h=a(d[2]);c&&f.hasOwnProperty(g)?f[g].push(h):f[g]=c?[h]:h}return f},c.parseUrl=function(a){var b=document.createElement("a");return b.href=a,{protocol:b.protocol.replace(":",""),host:b.hostname,port:b.port,query:b.search,hash:b.hash,path:b.pathname}},c.encodeQuery=function(a){var b=[];return angular.forEach(a,function(a,c){angular.isArray(a)?angular.forEach(a,function(a){b.push(encodeURIComponent(c)+(a===!0?"":"="+encodeURIComponent(a)))}):b.push(encodeURIComponent(c)+(a===!0?"":"="+encodeURIComponent(a)))}),b.length?b.join("&"):""},c}),angular.module("w69b.uuid",[]).factory("uuid",["$window",function(a){function b(a){for(var b=a.toString(16);b.length<4;)b="0"+b;return b}function c(){var c=new Uint16Array(8);return a.crypto.getRandomValues(c),b(c[0])+b(c[1])+"-"+b(c[2])+"-4"+b(c[3]).substring(1)+"-y"+b(c[4]).substring(1)+"-"+b(c[5])+b(c[6])+b(c[7])}return c}]),angular.module("w69b.structs.CircularBuffer",[]).factory("CircularBuffer",function(){var a=function(a){this.maxSize_=a||100,this.buff_=[]},b=a.prototype;return b.nextPtr_=0,b.add=function(a){this.buff_[this.nextPtr_]=a,this.nextPtr_=(this.nextPtr_+1)%this.maxSize_},b.get=function(a){return a=this.normalizeIndex_(a),this.buff_[a]},b.set=function(a,b){a=this.normalizeIndex_(a),this.buff_[a]=b},b.getCount=function(){return this.buff_.length},b.isEmpty=function(){return 0===this.buff_.length},b.clear=function(){this.buff_.length=0,this.nextPtr_=0},b.getValues=function(){return this.getNewestValues(this.getCount())},b.getNewestValues=function(a){for(var b=this.getCount(),c=this.getCount()-a,d=[],e=c;b>e;e++)d.push(this.get(e));return d},b.getKeys=function(){for(var a=[],b=this.getCount(),c=0;b>c;c++)a[c]=c;return a},b.containsKey=function(a){return a<this.getCount()},b.containsValue=function(a){for(var b=this.getCount(),c=0;b>c;c++)if(this.get(c)==a)return!0;return!1},b.getLast=function(){return 0===this.getCount()?null:this.get(this.getCount()-1)},b.normalizeIndex_=function(a){if(a>=this.buff_.length)throw Error("Out of bounds exception");return this.buff_.length<this.maxSize_?a:(this.nextPtr_+Number(a))%this.maxSize_},a}),angular.module("w69b.spawn",[]).factory("spawn",["$q",function(a){return function(b){function c(b,c){var d;try{d=b(c)}catch(g){return a.reject(g)}return d.done?d.value:a.when(d.value).then(e,f)}var d=b(),e=c.bind(null,d.next.bind(d)),f=c.bind(null,d["throw"].bind(d));return e()}}]),angular.module("w69b.throttle",[]).factory("throttle",["$timeout",function(a){function b(b,c,d){var e,f,g;d=d!==!1;var h=function(){g=angular.copy(arguments,[]),f=function(){return e=null,f=null,b.apply(null,g)},d?(e&&a.cancel(e),e=a(f,c)):e||(e=a(f,c))};return h.flush=function(){e&&(a.cancel(e),f())},h}return b}]),angular.module("w69b.ui.inputs",[]).directive("input",function(){return{restrict:"E",link:function(a,b,c){if("checkbox"===c.type||"radio"===c.type){var d=angular.element('<span class="wbInputSibling"></span>');b.after(d)}}}}).directive("dropdownMenuInputs",function(){return{restrict:"C",link:function(a,b){b.bind("click",function(a){var b=a.target.tagName;("LABEL"===b||"INPUT"===b)&&a.stopPropagation()})}}}),angular.module("w69b.ui.pageTitle",[]).controller("titleController",["$scope","$route",function(a,b){a.$root.$on("$routeChangeSuccess",function(){a.$root.pageTitle=b.current.pageTitle})}]),angular.module("w69b.webrtc",["w69b.promiseTool"]).factory("webrtc",["promiseTool","$window","$q",function(a,b){var c={},d=b.navigator;return c.getUserMedia=a.wrapCallbacks(d.getUserMedia||d.webkitGetUserMedia||d.mozGetUserMedia||d.msGetUserMedia,d),c.getSources=a.wrapCallbacks(MediaStreamTrack.getSources,MediaStreamTrack),c.getSourcesByKind=function(a){return c.getSources().then(function(b){return b.filter(function(b){return b.kind===a})})},c.getVideoSources=function(){return c.getSourcesByKind("video")},c.getAudioSources=function(){return c.getSourcesByKind("audio")},c.hasCamera=function(){return c.getVideoSources().then(function(a){return a.length>0})},c.hasMicrophone=function(){return c.getAudioSources().then(function(a){return a.length>0})},c}]),angular.module("w69b.ui.focus",[]).directive("wbLoopFocus",["$document","$timeout",function(a,b){return{restrict:"A",link:function(c,d){function e(){var a=g.querySelector('input:not([tabindex^="-"]),textarea:not([tabindex^="-"]),button:not([tabindex^="-"]),*[tabindex]:not([tabindex^="-"])');a&&a.focus()}function f(a){var c=a.target;a.relatedTarget||g.contains(c)&&c!==g||b(e)}var g=d[0];d.attr("tabindex",-1);var h=a.find("body");h[0].addEventListener("focus",f,!0),d.on("$destroy",function(){h[0].removeEventListener("focus",f,!0)})}}}]).directive("wbFocus",["$timeout",function(a){return{link:function(b,c,d){b.$watch(d.wbFocus,function(b){b&&a(function(){c[0].focus(),c[0].select&&c[0].select()})},!0),c.bind("blur",function(){angular.isDefined(d.wbFocusLost)&&b.$apply(d.wbFocusLost)})}}}]).directive("wbAutoselect",["$timeout",function(a){return{link:function(b,c){c.bind("focus click",function(){a(function(){c[0].select()})})}}}]),angular.module("w69b.ui.drivepicker",["w69b.googledrive"]).directive("wbDrivePickerButton",["googleauth","googledrive","$log",function(a,b,c){return{restrict:"EA",templateUrl:"components/w69b/ui/drivepicker.html",scope:{onPicked:"&",mimeTypes:"@",includeFolders:"@",selectFolderEnabled:"@",listMode:"@",title:"@"},transclude:!0,replace:!0,link:function(d){function e(a){c.debug(a);var b=google.picker;if(a[b.Response.ACTION]===b.Action.PICKED){var e=a[b.Response.DOCUMENTS],f=e.map(function(a){return a[b.Document.ID]});d.onPicked({ids:f,docs:e}),d.$apply()}}function f(b){var c=new google.picker.DocsView;d.mimeTypes&&c.setMimeTypes(d.mimeTypes),c.setIncludeFolders(!!d.includeFolders),c.setSelectFolderEnabled(!!d.selectFolderEnabled),"grid"==d.listMode?c.setMode(google.picker.DocsViewMode.GRID):"list"==d.listMode&&c.setMode(google.picker.DocsViewMode.LIST);var f=(new google.picker.PickerBuilder).setAppId(a.getAppId()).setOAuthToken(b).enableFeature(google.picker.Feature.NAV_HIDDEN).setTitle(d.title||"Open File").addView(c).setCallback(e).build();f.setVisible(!0)}d.isDisabled=!0,d.openDriveDialog=function(){a.getAuthToken(!0).then(f)},b.loadLibs().then(function(){return c.debug("drive libs loaded"),a.getAuthToken()}).then(function(){c.debug("drive authorized")})["finally"](function(){d.isDisabled=!1})}}}]),angular.module("w69b.googledrive",[]).factory("googledrive",["$q","googleauth","$location","$interval","$http",function(a,b,c,d,e){function f(a){return a.data}function g(a,b){return e.get(k+a,{googleAuth:!0,params:b}).then(f)}function h(a,b){return e.post(k+a,b,{googleAuth:!0}).then(f)}function i(a,b){return e({method:"PATCH",url:k+a,data:b,googleAuth:!0}).then(f)}var j=!1,k="https://www.googleapis.com/drive/v2/",l={};return l.isLoaded=function(){return j},l.loadLibs=function(){if(j)return a.when(null);var c=b.loadClient().then(function(){return a.all([b.gapiLoad("picker")])});return c.then(function(){j=!0})},l.getFile=function(a){return g("files/"+a)},l.listFiles=function(a){return g("files/",a).then(function(a){return a.items})},l.postFile=function(a){return h("files",a)},l.patchFile=function(a,b){return i("files/"+a,b)},l.trashFile=function(a){return h("files/"+a+"/trash")},l.getAbout=function(){return g("about")},l.showShareSettings=function(c){return b.gapiLoad("drive-share").then(function(){var e=new gapi.drive.share.ShareClient(b.getAppId());e.setItemIds([c]),e.showSettingsDialog();var f=a.defer(),g=d(function(){for(var a=!1,b=document.activeElement;b!==document.documentElement;){if(b.classList.contains("dcs-ad-dcs-c")){a=!0;break}b=b.parentNode}a||(d.cancel(g),f.resolve())},300);return f.promise})},l.listPermissions=function(a){return g("files/"+a+"/permissions").then(function(a){
return a.items})},l.insertPermission=function(a,b){e.post(k+"files/"+a+"/permissions",b,{googleAuth:!0}).then(f)},l.patchPermission=function(a,b,c){return i(k+"files/"+a+"/permissions/"+b,c)},l.removePermission=function(a,b){e["delete"](k+"files/"+a+"/permissions/"+b,{googleAuth:!0}).then(f)},l.getContextAction=function(){var a=c.search().state,b=null;if(angular.isString(a))try{b=JSON.parse(a)}catch(d){}if(b){var e=b.ids||[],f=b.exportIds||[];return{action:b.action,ids:e.concat(f),parentId:b.parentId,userId:b.userId}}return null},l}]),angular.module("w69b.ui.dropdown",["ui.bootstrap.position","ui.bootstrap.dropdown"]).directive("wbAbsPositioned",["$document","$position","$window","$timeout","$animate","dropdownConfig",function(a,b,c,d,e,f){return{restrict:"A",require:"?^dropdown",link:function(g,h,i,j){function k(){var a=h.css("display");"none"==a&&h.css("display","block");var c=b.offset(h);return"none"==a&&h.css("display",a),c}function l(){var a=k(),b={left:a.left+"px",top:a.top+"px",position:"absolute"};q.css(b)}function m(){i.deferred?d(l,100):l()}var n=f.openClass,o=a.find("body"),p=angular.element(c),q=h.children();if(q.length>1)throw new Error("only one child allowed in wb-abs-positioned");o.append(q),l(),p.bind("resize",m),g.$on("$destroy",function(){p.unbind("resize",m)}),h.bind("$destroy",function(){q.remove()}),j&&g.$watch(j.isOpen,function(a){a&&l(),e[a?"addClass":"removeClass"](q,n)})}}}]).directive("dropdownCloser",["$document","$location",function(a,b){return{restrict:"A",require:"?^wbDropdownRoot",link:function(c,d,e,f){function g(b){var c=d[0],e=f&&f.getElement()[0].contains(b);return a[0].contains(b)&&!e&&!c.contains(b)}function h(a){g(a.target)&&(c[k]=!1,c.$root.$$phase||c.$$phase||c.$digest())}function i(){m&&a.unbind("click",m),l()}function j(){l=c.$watch(function(){return b.path()},function(a,b){b!=a&&(c[k]=!1)})}var k=e.dropdownCloser,l=angular.noop,m=null;c.$watch(k,function(b){b?(m=h,a.bind("click",m),j()):i()}),c.$on("$destroy",i)}}}]).directive("wbDropdownRoot",function(){return{restrict:"AC",controller:["$element",function(a){this.getElement=function(){return a}}]}}),angular.module("w69b.ui.simpleDialog",["ui.bootstrap.modal","w69b.ui.locationChange"]).factory("simpleDialog",["$modal","$rootScope",function(a,b){function c(c){c=angular.extend({ok:"OK",cancel:"Cancel"},c);var d=b.$new(!0);d.options=c;var e=a.open({scope:d,templateUrl:"components/w69b/ui/simple-dialog/simple-dialog.html"});return e.result}var d={};return d.confirm=function(a,b,d){var e={title:a,message:b};return d&&(e.ok=d),c(e)},d.alert=function(a,b){return c({title:a,message:b,ok:null,cancel:"Close"})},d}]),angular.module("w69b.ui.bytesFilter",[]).filter("bytes",["$injector",function(a){function b(b,d){return c||(c=a.get("$filter")("number")),c(b,d)}var c;return function(a,c){if(!angular.isNumber(a))return"-";if(angular.isUndefined(c)&&(c=1),0>=a)return"0 B";var d=["B","KB","MB","GB","TB","PB"],e=Math.floor(Math.log(a)/Math.log(1024));return b(a/Math.pow(1024,Math.floor(e)),c)+" "+d[e]}}]),angular.module("w69b.ui.bgImg",[]).directive("wbBgImg",function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.wbBgImg,function(a){a?b.css("background-image","url('"+a+"')"):b.css("background-image","")})}}}),angular.module("w69b.ui.locationChange",[]).directive("wbLocationChange",["$parse",function(a){return{link:function(b,c,d){var e=a(d.wbLocationChange);b.$on("$locationChangeStart",function(){e(b)})}}}])}()}();