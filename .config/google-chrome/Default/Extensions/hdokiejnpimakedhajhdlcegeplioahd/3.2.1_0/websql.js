g_chrome.Cu.import("resource://gre/modules/XPCOMUtils.jsm");g_chrome.Cu.import("resource://gre/modules/Services.jsm");
openDatabase=window.openDatabase=function(f){function l(){}var g=XPCNativeWrapper.unwrap(window.location);XPCNativeWrapper.unwrap(window.alert);var b=g_chrome.Cc["@mozilla.org/file/directory_service;1"].getService(g_chrome.Ci.nsIProperties).get("ProfD",g_chrome.Ci.nsIFile);b.append("databases");try{b.create(g_chrome.Ci.nsIFile.DIRECTORY_TYPE,448)}catch(p){}b.append(g.protocol.replace(":","")+"_"+g.hostname+"_"+g.port);try{b.create(g_chrome.Ci.nsIFile.DIRECTORY_TYPE,448)}catch(r){}b.append(f+".sqlite");
var j=g_chrome.Cc["@mozilla.org/storage/service;1"].getService(g_chrome.Ci.mozIStorageService).openDatabase(b);l.prototype={__exposedProps__:{executeSql:"r"},executeSql:function(d,c,e,m){var b=this;d=d.split("?");for(var h="",a=1;a<d.length;a++)h+=d[a-1]+"?"+a;h+=d[d.length-1];if(h.match(/^CREATE /i)){try{j.executeSimpleSQL(h)}catch(f){"function"==typeof e&&m(b,f)}"function"==typeof e&&e(b,{})}else{var k;try{if(k=j.createStatement(h),void 0!=c){for(var g=k.newBindingParamsArray(),l=g.newBindingParams(),
a=0;a<c.length;a++)l.bindByIndex(a,c[a]);g.addParams(l);k.bindParameters(g)}}catch(q){"function"==typeof m&&m(b,q);return}c={};if("function"==typeof e){var n=[];c.handleResult=function(b){for(var c;c=b.getNextRow();){for(var a={__exposedProps__:{}},d=0;d<k.columnCount;d++){var e=k.getColumnName(d);a[e]=c.getResultByIndex(d);a.__exposedProps__[e]="r"}n.push(a)}};c.handleCompletion=function(a){0==a&&(a={insertId:j.lastInsertRowID,rowsAffected:-1,rows:n,__exposedProps__:{rows:"r",rowsAffected:"r",insertId:"r"}},
a.rows.item=function(a){return n[a]},a.rows.length=n.length,a.rows.__exposedProps__={item:"r"},e(b,a))}}"function"==typeof m&&(c.handleError=function(a){m(b,a)});k.executeAsync(c)}}};f={__exposedProps__:{transaction:"r",readTransaction:"r",changeVersion:"r"},transaction:function(b,c,e){if("function"!=typeof b)throw"Callback must be a function";var f=new l;try{try{j.beginTransaction()}catch(g){}b(f);try{j.commitTransaction()}catch(h){}"function"==typeof e&&e()}catch(a){try{j.rollbackTransaction()}catch(p){}"function"==
typeof c&&c(a)}}};f.readTransaction=this.transaction;f.changeVersion=function(){};return f};
